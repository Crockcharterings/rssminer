<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <script type="text/javascript" src="jquery-1.6.1.js"></script>
    <script type="text/javascript" src="handlebars.1.0.0.beta.3.js"></script>

    <script type="text/javascript">
        $(function() {
            var source = $("#entry-template").html();
            var template = Handlebars.compile(source);

            var context = {title: "My New Post", body: "This is my first post!"};

            var context2 = {
                title: "All about <p> Tags",
                body: "<p>This is a post about &lt;p&gt; tags</p>"
            };
            
            

            console.log(template(context));
            console.log(template(context2));

            var list_data = {
                people: [
                    {firstName: "Yehuda", lastName: "Katz"},
                    {firstName: "Carl", lastName: "Lerche"},
                    {firstName: "Alan", lastName: "Johnson"}
                ],
                dog : "this is a dog"
            };
            
            

            Handlebars.registerHelper('list', function(items, dog, fn) {
                var out = "<ul>";

                console.log(this);
                console.log(dog);
                for (var i = 0, l = items.length; i < l; i++) {
                    out = out + "<li>" + fn(items[i]) + dog + "</li>";
                }

                return out + "</ul>";
            });
            var template_list = Handlebars.compile($("#template-2").html());
            console.log(template_list(list_data));

            var with_data = {
                title: "My first post!",
                author: {
                    firstName: "Charles",
                    lastName: "Jolley"
                }
            };
            var with_template = Handlebars.compile($("#with-block").html());
            console.log(with_template(with_data));


            var each_template = Handlebars.compile($("#each-block").html());
            console.log(each_template(list_data));

        });
    </script>
</head>
<body>

<script id="entry-template" type="text/x-handlebars-template">
    <div class="entry">
        <h1>{{title}}</h1>

        <div class="body">
            {{{body}}}
        </div>
    </div>
</script>

<script type="text/x-handlebars-template" id="template-2">
    {{#list people dog}}{{firstName}} {{lastName}}{{/list}}}}
</script>

<script type="text/x-handlebars-template" id="with-block">
    <div class="entry">
        <h1>{{title}}</h1>

        {{#with author}}
        <h2>By {{firstName}} {{lastName}}</h2>
        {{/with}}

        <h2>By {{author/firstName}} {{author/lastName}}</h2>

    </div>
</script>
<script type="text/x-handlebars-template" id="each-block">
    <div class="entry">
        <h1>{{title}}</h1>
        {{#each people}}
        <li>{{this/firstName}} {{this/lastName}}</li>
        {{/each}}
    </div>
</script>
</body>
</html>
