<!doctype html>
<html>
  <head>
    <title>Planet Clojure</title>
    <meta charset="utf-8" />
    <meta name="generator" content="http://intertwingly.net/code/venus/" />
    <link href="#" rel="apple-touch-icon" />
    <link rel="stylesheet" href="static/css/screen.css" media="screen, projection" />

<!--[if IE]>
<link rel="stylesheet" type="text/css" href="static/css/ie.css" media="screen, projection" />
<script type="text/javascript" src="static/js/html5.js"></script>
<![endif]-->

    <link rel="icon" type="image/vnd.microsoft.icon" href="static/i/favicon.gif" />
    <link rel="shortcut icon" href="static/i/favicon.gif" />
    <link rel="alternate" href="http://planet.clojure.in/atom.xml" type="application/rss+xml" title="Planet Clojure RSS Feed" />
<!--    <link rel="alternate" href="http://feeds.feedburner.com/clojure" type="application/rss+xml" title="Planet Clojure RSS Feed" />-->
  </head>
  <body>
    <div id="planet">
      <div id="main">
        <div id="main-content">

          <header id="header">
            <h1><a href="" id="title"><span>Planet Clojure</span></a></h1>
          </header>

          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=f8b56ef73099743fdfe6336dd7cd0d5c" title="Javalobby">Javalobby</a></h2>
              <p>
July 07, 2012 04:00 AM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=f8b56ef73099743fdfe6336dd7cd0d5c">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://feeds.dzone.com/~r/javalobby/frontpage/~3/Kd14Sl7x1FY/how-set-jvm-memory-clojure">How to Set JVM Memory for Clojure REPL in Emacs</a></h2>
              <p>
How to increase heap size for Clojure REPL started from Emacs, either standalone or as a part of a project.
1. Clojure REPL Started for a Lein Project
If you have a Leiningen 2.0 project and start Clojure REPL for it in Emacs via M-x clojure-jack-in then you can set JVM arguments such as heap size in the project.clj:
      Preview Text: 
    
            
                    How to increase...<img height="1" src="http://feeds.feedburner.com/~r/javalobby/frontpage/~4/Kd14Sl7x1FY" width="1" />              </p>
              <p class="meta"><a href="http://feeds.dzone.com/~r/javalobby/frontpage/~3/Kd14Sl7x1FY/how-set-jvm-memory-clojure">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://proctorit.wordpress.com" title="Proctor It » Clojure">Steven Proctor</a></h2>
              <p>
July 06, 2012 10:51 PM                <br />
                <a href="http://proctorit.wordpress.com">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://proctorit.wordpress.com/2012/07/06/project-euler-in-clojure-problem-10/">Project Euler in Clojure – Problem 10</a></h2>
              <p>
<p>This is my solution to Problem 10 of Project Euler. As always, my progress you can tracked on GitHub at <a href="https://github.com/stevenproctor/project-euler-clojure">https://github.com/stevenproctor/project-euler-clojure</a>.</p>
<p><a href="http://projecteuler.net/problem=10">Problem 10</a> of Project Euler is described as:</p>
<pre>Find the sum of all the primes below two million.</pre>
<p>And my solution for this, including previously defined functions created as part of solving the previous problems, is the following:</p>
<p></p><pre class="brush: clojure;">(defn square [n]
  (* n n))

(defn sum [s]
  (reduce + s))

(defn primes-under2 [n]
  (let [sieve (transient (set (cons 2 (range 3 n 2))))]
    (loop[s sieve
           f 3]
      (cond (&gt; (square f) n) (persistent! s)
            :else (recur (reduce disj! s (range (square f) n f)) (inc f))))))

(defn problem10
  ([] (problem10 2000000))
  ([n] (bigint (sum (primes-under2 n)))))
</pre><p></p>
<p>The functions sum and square came from the suggestion of <a href="http://arcanesentiment.blogspot.com/" target="_blank" title="Arcane Sentiment">Arcane Sentiment</a> in a comment on a previous problem, as well as a post of his <a href="http://arcanesentiment.blogspot.com/2012/05/square-in-r7rs.html" target="_blank" title="Square in R7RS">Square in R7RS.</a></p>
<p>The function primes-under2, is my second attempt at creating the primes under a given number using the Sieve of Eratosthenes.  The short description is that the function uses sets of multiples of each integral number up to the square root of the number specifies and removes those items from the set.  A more detailed write up can be found in my post <a href="http://proctorit.wordpress.com/2012/06/12/sieve-of-eratosthenes-in-clojure-using-sets/" target="_blank" title="Sieve of Eratosthenes in Clojure using sets">Sieve of Eratosthenes in Clojure using Sets.</a></p>
<p>With those functions defined, I simply get the sum of the call to primes-under2 and make it a bigint to try to ensure the sum will be handled nicely for large numbers, but looking at it now, it is probably not even needed.</p>
<p>–Proctor</p>
<br />Filed under: <a href="http://proctorit.wordpress.com/category/clojure/">Clojure</a>, <a href="http://proctorit.wordpress.com/category/deliberate-practice/">Deliberate Practice</a>, <a href="http://proctorit.wordpress.com/category/lisp/">Lisp</a>, <a href="http://proctorit.wordpress.com/category/project-euler/">Project Euler</a> Tagged: <a href="http://proctorit.wordpress.com/tag/clojure/">Clojure</a>, <a href="http://proctorit.wordpress.com/tag/deliberate-practice/">Deliberate Practice</a>, <a href="http://proctorit.wordpress.com/tag/project-euler/">Project Euler</a> <a href="http://feeds.wordpress.com/1.0/gocomments/proctorit.wordpress.com/240/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/proctorit.wordpress.com/240/" /></a> <a href="http://feeds.wordpress.com/1.0/godelicious/proctorit.wordpress.com/240/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/delicious/proctorit.wordpress.com/240/" /></a> <a href="http://feeds.wordpress.com/1.0/gofacebook/proctorit.wordpress.com/240/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/facebook/proctorit.wordpress.com/240/" /></a> <a href="http://feeds.wordpress.com/1.0/gotwitter/proctorit.wordpress.com/240/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/twitter/proctorit.wordpress.com/240/" /></a> <a href="http://feeds.wordpress.com/1.0/gostumble/proctorit.wordpress.com/240/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/stumble/proctorit.wordpress.com/240/" /></a> <a href="http://feeds.wordpress.com/1.0/godigg/proctorit.wordpress.com/240/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/digg/proctorit.wordpress.com/240/" /></a> <a href="http://feeds.wordpress.com/1.0/goreddit/proctorit.wordpress.com/240/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/reddit/proctorit.wordpress.com/240/" /></a> <img alt="" border="0" height="1" src="http://stats.wordpress.com/b.gif?host=proctorit.wordpress.com&amp;blog=16765922&amp;post=240&amp;subd=proctorit&amp;ref=&amp;feed=1" width="1" />              </p>
              <p class="meta"><a href="http://proctorit.wordpress.com/2012/07/06/project-euler-in-clojure-problem-10/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2620de78bcda86952188892c48b4caf1" title="Flying Machine Studios">Flying Machine Studios</a></h2>
              <p>
July 06, 2012 12:47 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2620de78bcda86952188892c48b4caf1">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://www.flyingmachinestudios.com/programming/refactoring-to-datamappers-in-clojure/">Refactoring to Datamappers Clojure</a></h2>
              <p>
<h1>Refactoring to Datamappers in Clojure</h1>
<p>In this post I give a detailed description of a recent refactoring for my site <a href="http://omgsmackdown.com" rel="nofollow" target="_blank"><span class="caps">OMG</span>! <span class="caps">SMACKDOWN</span>!!!</a>. I make no attempt to enliven the article with “cats” or “memes” or “humor” – it’s straight up code and commentary.</p>
<p>The refactoring was largely influenced by Rich Hickey’s talk <a href="http://www.confreaks.com/videos/860-railsconf2012-keynote-simplicity-matters" rel="nofollow" target="_blank">Simplicity Matters</a>. The main purposes were:</p>
<ol>
	<li>Reduce complexity in the Hickeysian sense – untangle bits of code that don’t need to be tangled together</li>
	<li>Introduce an explicit <a href="http://www.flyingmachinestudios.com/design/anatomy-of-frustration/" rel="nofollow" target="_blank">design</a></li>
	<li>Reduce repetition</li>
</ol>
<p>In order to do this, I kept the following guidelines in mind:</p>
<ol>
	<li>Create clear separation between data and the functions which transform them</li>
	<li>Reduce coupling through information and implementation hiding</li>
	<li>Abstract out the “bones” of functionality</li>
</ol>
<p>In the process I may have created an even more terrible monster than the one I started with and perhaps lost a few <a href="http://www.amazon.com/gp/product/1589942108/ref=as_li_ss_tl?ie=UTF8&amp;tag=aflyingmachin-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1589942108" rel="nofollow" target="_blank">sanity points</a> but the process was fun and educational.</p>
<h2>Quick Project Overview</h2>
<p><a href="http://omgsmackdown.com/" rel="nofollow" target="_blank"><span class="caps">OMG</span>! <span class="caps">SMACKDOWN</span>!!!</a>, perhaps one of the most important web sites in Internet history, is a <a href="http://webnoir.org/" rel="nofollow" target="_blank">Noir</a> project which allows users (well, just me for now) to create <code>arenas</code> wherein <code>fighters</code> <code>battle</code> it out.</p>
<p>The project code accomplishes the following:</p>
<ol>
	<li>Show two randomly selected fighters from different teams on the home page</li>
	<li>Record each click on a fighter as a “win” for that fighter</li>
	<li>Allow me to create, update, and delete arenas</li>
	<li>Allow me to create, update, and delete fighters, including their images which get uploaded to S3</li>
</ol>
<p>It uses <a href="https://github.com/weavejester/clj-aws-s3" rel="nofollow" target="_blank">clj-aws-s3</a> and <a href="http://clojuremongodb.info/" rel="nofollow" target="_blank">Clojure Monger</a>.</p>
<p>All the code discussed here is <a href="https://github.com/flyingmachine/nanoc-blog/tree/master/content/assets/source/clojure/refactoring-to-datamappers" rel="nofollow" target="_blank">available on github</a>.</p>
<h2>The Original Monster</h2>
<p>Below is the most complex of my models:</p>
<div class="attachment-path source"><a rel="nofollow">clojure/refactoring-to-datamappers/original/fighter.clj</a></div><div class="code pygments"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="kd">ns </span><span class="nv">arenaverse.models.fighter</span>
  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">arenaverse.config</span> <span class="ss">:as</span> <span class="nv">config</span><span class="p">]</span>
            <span class="p">[</span><span class="nv">monger.collection</span> <span class="ss">:as</span> <span class="nv">mc</span><span class="p">]</span>
            <span class="p">[</span><span class="nv">arenaverse.lib.aws.s3</span> <span class="ss">:as</span> <span class="nv">s3</span><span class="p">])</span>

  <span class="p">(</span><span class="ss">:import</span> <span class="p">[</span><span class="nv">org.bson.types</span> <span class="nv">ObjectId</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">org.imgscalr</span> <span class="nv">Scalr</span> <span class="nv">Scalr$Method</span> <span class="nv">Scalr$Mode</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">javax.imageio</span> <span class="nv">ImageIO</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">java.awt.image</span> <span class="nv">BufferedImageOp</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">java.awt.image</span> <span class="nv">BufferedImage</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">org.apache.commons.io</span> <span class="nv">FilenameUtils</span><span class="p">]))</span>

<span class="c1">;; Used to generate the different sizes</span>
<span class="p">(</span><span class="k">def </span><span class="nv">*image-versions</span> <span class="p">[[</span><span class="s">"card"</span> <span class="mi">192</span><span class="p">]</span>
                      <span class="p">[</span><span class="s">"listing"</span> <span class="mi">64</span><span class="p">]</span>
                      <span class="p">[</span><span class="s">"battle"</span> <span class="mi">432</span> <span class="mi">638</span><span class="p">]])</span>

<span class="c1">;; For monger</span>
<span class="p">(</span><span class="k">def </span><span class="nv">*collection</span> <span class="s">"fighters"</span><span class="p">)</span>

<span class="c1">;; ----</span>
<span class="c1">;; Image processing and storage</span>
<span class="c1">;; ----</span>

<span class="c1">;; The image-path functions are used both to store the image in S3 and</span>
<span class="c1">;; to generate the URL for the image when viewed on the web</span>
<span class="p">(</span><span class="kd">defn </span><span class="nv">image-relative-path</span> <span class="p">[</span><span class="nv">version</span> <span class="p">{</span><span class="ss">:keys</span> <span class="p">[</span><span class="nv">_id</span> <span class="nv">image-extension</span><span class="p">]}]</span>
  <span class="p">(</span><span class="nb">str </span><span class="s">"fighters/"</span> <span class="nv">_id</span> <span class="s">"/"</span> <span class="nv">version</span> <span class="s">"."</span> <span class="nv">image-extension</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">image-path</span> <span class="p">[</span><span class="nv">version</span> <span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">str </span><span class="s">"/"</span> <span class="p">(</span><span class="nf">image-relative-path</span> <span class="nv">version</span> <span class="nv">record</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">bucket-name</span> <span class="p">[]</span>
  <span class="p">(</span><span class="nb">str </span><span class="s">"arenaverse-"</span> <span class="p">(</span><span class="nb">name </span><span class="nv">config/env</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">amazon-image-path</span> <span class="p">[</span><span class="nv">version</span> <span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">str </span><span class="s">"https://s3.amazonaws.com/"</span> <span class="p">(</span><span class="nf">bucket-name</span><span class="p">)</span> <span class="p">(</span><span class="nf">image-path</span> <span class="nv">version</span> <span class="nv">record</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">image-fields</span> <span class="p">[</span><span class="nv">object-id</span> <span class="nv">image-extension</span><span class="p">]</span>
  <span class="p">{</span><span class="ss">:_id</span> <span class="nv">object-id</span>
   <span class="ss">:image-extension</span> <span class="p">(</span><span class="nf">clojure.string/replace</span> <span class="nv">image-extension</span> <span class="s">"jpeg"</span> <span class="s">"jpg"</span><span class="p">)})</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">save-image</span> <span class="p">[</span><span class="nb">path </span><span class="nv">file</span> <span class="nv">content-type</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">s3/put-object</span> <span class="nv">config/*aws-credentials*</span>
                 <span class="p">(</span><span class="nf">bucket-name</span><span class="p">)</span>
                 <span class="nv">path</span>
                 <span class="nv">file</span>
                 <span class="p">{</span><span class="ss">:content-type</span> <span class="nv">content-type</span><span class="p">}</span>
                 <span class="o">#</span><span class="p">(</span><span class="nf">.withCannedAcl</span> <span class="nv">%</span> <span class="nv">com.amazonaws.services.s3.model.CannedAccessControlList/PublicRead</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">resize</span>
  <span class="p">([</span><span class="nv">image</span> <span class="nv">box</span><span class="p">]</span>
     <span class="p">(</span><span class="nf">resize</span> <span class="nv">image</span> <span class="nv">box</span> <span class="nv">box</span><span class="p">))</span>
  <span class="p">([</span><span class="nv">image</span> <span class="nv">target-width</span> <span class="nv">target-height</span><span class="p">]</span>
     <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">width</span>  <span class="p">(</span><span class="nf">.getWidth</span> <span class="nv">image</span><span class="p">)</span>
           <span class="nv">height</span> <span class="p">(</span><span class="nf">.getHeight</span> <span class="nv">image</span><span class="p">)</span>
           <span class="nv">fit</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">/ </span><span class="nv">target-width</span> <span class="nv">width</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">target-height</span> <span class="nv">height</span><span class="p">))</span> <span class="nv">Scalr$Mode/FIT_TO_HEIGHT</span> <span class="nv">Scalr$Mode/FIT_TO_WIDTH</span><span class="p">)]</span>
       <span class="p">(</span><span class="nf">Scalr/resize</span> <span class="nv">image</span> <span class="nv">Scalr$Method/ULTRA_QUALITY</span> <span class="nv">fit</span> <span class="nv">target-width</span> <span class="nv">target-height</span> <span class="p">(</span><span class="nb">into-array </span><span class="nv">BufferedImageOp</span> <span class="p">[])))))</span>

<span class="c1">;; This is necessary because the S3 java library works with input</span>
<span class="c1">;; streams</span>
<span class="p">(</span><span class="kd">defn- </span><span class="nv">buffered-image-&gt;input-stream</span> <span class="p">[</span><span class="nv">buffered-image</span> <span class="nv">extension</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">os</span> <span class="p">(</span><span class="nf">java.io.ByteArrayOutputStream.</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">ImageIO/write</span> <span class="nv">buffered-image</span> <span class="nv">extension</span> <span class="nv">os</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">java.io.ByteArrayInputStream.</span> <span class="p">(</span><span class="nf">.toByteArray</span> <span class="nv">os</span><span class="p">))))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">resize-and-save-image</span> <span class="p">[</span><span class="nv">object-id</span> <span class="nv">file-upload</span><span class="p">]</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">= </span><span class="mi">0</span> <span class="p">(</span><span class="ss">:size</span> <span class="nv">file-upload</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">extension</span>    <span class="p">(</span><span class="nf">FilenameUtils/getExtension</span> <span class="p">(</span><span class="ss">:filename</span> <span class="nv">file-upload</span><span class="p">))</span>
          <span class="nv">content-type</span> <span class="p">(</span><span class="ss">:content-type</span> <span class="nv">file-upload</span><span class="p">)</span>
          <span class="nv">file</span>         <span class="p">(</span><span class="ss">:tempfile</span> <span class="nv">file-upload</span><span class="p">)</span>
          <span class="nv">img-fields</span>   <span class="p">(</span><span class="nf">image-fields</span> <span class="nv">object-id</span> <span class="nv">extension</span><span class="p">)]</span>
      <span class="c1">;; save original</span>
      <span class="p">(</span><span class="nf">save-image</span> <span class="p">(</span><span class="nf">image-relative-path</span> <span class="s">"original"</span> <span class="nv">img-fields</span><span class="p">)</span> <span class="nv">file</span> <span class="nv">content-type</span><span class="p">)</span>
      <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">buff-img</span> <span class="p">(</span><span class="nf">ImageIO/read</span> <span class="nv">file</span><span class="p">)]</span>
        <span class="p">(</span><span class="nb">doseq </span><span class="p">[[</span><span class="nv">version</span> <span class="o">&amp;</span> <span class="nv">dim</span><span class="p">]</span> <span class="nv">*image-versions</span><span class="p">]</span>
          <span class="p">(</span><span class="nf">save-image</span> <span class="p">(</span><span class="nf">image-relative-path</span> <span class="nv">version</span> <span class="nv">img-fields</span><span class="p">)</span>
                      <span class="p">(</span><span class="nf">buffered-image-&gt;input-stream</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">resize</span> <span class="p">(</span><span class="nb">cons </span><span class="nv">buff-img</span> <span class="nv">dim</span><span class="p">))</span> <span class="nv">extension</span><span class="p">)</span>
                      <span class="nv">version</span><span class="p">))))))</span>

<span class="c1">;;----</span>
<span class="c1">;; CRUD-related</span>
<span class="c1">;;---- </span>
<span class="p">(</span><span class="kd">defn </span><span class="nv">delete-images</span> <span class="p">[</span><span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">doseq </span><span class="p">[[</span><span class="nv">vname</span><span class="p">]</span> <span class="p">(</span><span class="nb">conj </span><span class="nv">*image-versions</span> <span class="p">[</span><span class="s">"original"</span><span class="p">])]</span>
    <span class="p">(</span><span class="nf">s3/delete-object</span> <span class="nv">config/*aws-credentials*</span> <span class="s">"arenaverse-test"</span> <span class="p">(</span><span class="nf">image-relative-path</span> <span class="nv">vname</span> <span class="nv">record</span><span class="p">))))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">create</span> <span class="p">[</span><span class="nv">attrs</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">object-id</span> <span class="p">(</span><span class="nf">ObjectId.</span><span class="p">)</span>
        <span class="nv">file-upload</span> <span class="p">(</span><span class="ss">:file</span> <span class="nv">attrs</span><span class="p">)</span>
        <span class="nv">fields</span> <span class="p">(</span><span class="nf">merge</span>
                <span class="p">(</span><span class="nb">dissoc </span><span class="nv">attrs</span> <span class="ss">:file</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">image-fields</span> <span class="nv">object-id</span> <span class="p">(</span><span class="nf">FilenameUtils/getExtension</span> <span class="p">(</span><span class="ss">:filename</span> <span class="nv">file-upload</span><span class="p">))))]</span>
    <span class="p">(</span><span class="nf">mc/insert</span> <span class="nv">*collection</span> <span class="nv">fields</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">future</span> <span class="p">(</span><span class="nf">resize-and-save-image</span> <span class="nv">object-id</span> <span class="nv">file-upload</span><span class="p">))</span>
    <span class="nv">fields</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">image-extension-for-update</span> <span class="p">[</span><span class="nv">attrs</span> <span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">file-upload</span> <span class="p">(</span><span class="ss">:file</span> <span class="nv">attrs</span><span class="p">)]</span>
    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">not= </span><span class="mi">0</span> <span class="p">(</span><span class="ss">:size</span> <span class="nv">file-upload</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">image-fields</span> <span class="s">""</span> <span class="p">(</span><span class="nf">FilenameUtils/getExtension</span> <span class="p">(</span><span class="ss">:filename</span> <span class="nv">file-upload</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">select-keys </span><span class="nv">record</span> <span class="p">[</span><span class="ss">:image-extension</span><span class="p">]))))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">update</span> <span class="p">[</span><span class="nv">attrs</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">_id</span> <span class="p">(</span><span class="ss">:_id</span> <span class="nv">attrs</span><span class="p">)</span>
        <span class="nv">bson-id</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="nv">_id</span><span class="p">)</span>
        <span class="nv">record</span> <span class="p">(</span><span class="nf">mc/find-map-by-id</span> <span class="nv">*collection</span> <span class="nv">bson-id</span><span class="p">)</span>
        <span class="nv">updated-fields</span> <span class="p">(</span><span class="nb">dissoc </span><span class="p">(</span><span class="nb">merge </span><span class="nv">record</span>
                                      <span class="nv">attrs</span>
                                      <span class="p">(</span><span class="nf">image-extension-for-update</span> <span class="nv">attrs</span> <span class="nv">record</span><span class="p">))</span>
                               <span class="ss">:_id</span>
                               <span class="ss">:file</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">mc/update-by-id</span> <span class="nv">*collection</span> <span class="nv">bson-id</span> <span class="nv">updated-fields</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">future</span> <span class="p">(</span><span class="nf">resize-and-save-image</span> <span class="nv">_id</span> <span class="p">(</span><span class="ss">:file</span> <span class="nv">attrs</span><span class="p">)))</span>
    <span class="nv">updated-fields</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">destroy</span> <span class="p">[</span><span class="nv">_id</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">delete-images</span> <span class="p">(</span><span class="nf">mc/find-map-by-id</span> <span class="nv">*collection</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="nv">_id</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">mc/remove-by-id</span> <span class="nv">*collection</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="nv">_id</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">one</span> <span class="p">[</span><span class="o">&amp;</span> <span class="p">[</span><span class="nv">query-doc</span><span class="p">]]</span>
  <span class="p">(</span><span class="nf">mc/find-one-as-map</span> <span class="nv">*collection</span> <span class="nv">query-doc</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">all</span> <span class="p">[</span><span class="o">&amp;</span> <span class="p">[</span><span class="nv">query-doc</span><span class="p">]]</span>
  <span class="p">(</span><span class="nf">mc/find-maps</span> <span class="nv">*collection</span> <span class="nv">query-doc</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">idstr</span> <span class="p">[</span><span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">.toString</span> <span class="p">(</span><span class="ss">:_id</span> <span class="nv">record</span><span class="p">)))</span>
</pre></div>
</td></tr></tbody></table></div><p>So, yeah, that’s a ton of code. Breaking it into two groups, image-handling and <span class="caps">CRUD</span> operations, might help to quickly grok it.</p>
<p>The main problem with the fighter model is that it has little explicit structure. There’s no design. It’s all just “keep doing stuff until you get the result you want.” Sure, you have common functionality refactored into separate functions. For instance, <code>resize-and-save-image</code> is needed by both <code>create</code> and <code>update</code>, so it gets its own function.</p>
<p>But that’s not design. That’s coding by convenience. <a href="http://www.flyingmachinestudios.com/design/anatomy-of-frustration/" rel="nofollow" target="_blank">Well-designed</a> code is predictable code. It follows a pattern, giving you a headstart when writing new code and allowing you to quickly assimilate unfamiliar parts of the system.</p>
<p>To complete the picture, here’s the arena model:</p>
<div class="attachment-path source"><a rel="nofollow">clojure/refactoring-to-datamappers/original/arena.clj</a></div><div class="code pygments"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="kd">ns </span><span class="nv">arenaverse.models.arena</span>
  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">arenaverse.config</span> <span class="ss">:as</span> <span class="nv">config</span><span class="p">]</span>
            <span class="p">[</span><span class="nv">monger.collection</span> <span class="ss">:as</span> <span class="nv">mc</span><span class="p">])</span>

  <span class="p">(</span><span class="ss">:import</span> <span class="p">[</span><span class="nv">org.bson.types</span> <span class="nv">ObjectId</span><span class="p">]))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">*collection</span> <span class="s">"arenas"</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">destroy</span> <span class="p">[</span><span class="nv">_id</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">mc/remove-by-id</span> <span class="nv">*collection</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="nv">_id</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">all</span> <span class="p">[]</span>
  <span class="p">(</span><span class="nf">mc/find-maps</span> <span class="nv">*collection</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">one</span> <span class="p">[</span><span class="o">&amp;</span> <span class="p">[</span><span class="nv">query-doc</span><span class="p">]]</span>
  <span class="p">(</span><span class="nf">mc/find-one-as-map</span> <span class="nv">*collection</span> <span class="nv">query-doc</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">idstr</span> <span class="p">[</span><span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">.toString</span> <span class="p">(</span><span class="ss">:_id</span> <span class="nv">record</span><span class="p">)))</span>
</pre></div>
</td></tr></tbody></table></div><p>As you can see, the functions are essentially the same as those in the fighter model. Good ol’ copy-and-paste coding. Clipboard-driven design. One of the cardinal sins of programming. Truly, I am ashamed.</p>
<h2>Enter the Hero: Datamapper</h2>
<p>(Wow, check out that heading! This is getting epic! As befits an article about a site as majestic and grand as <span class="caps">OMG</span>! <span class="caps">SMACKDOWN</span>!!!)</p>
<p>I have something embarrasing to admit. I’ve already revealed my clipboard abuse, and nothing could be as bad that, so here goes: I don’t really know what a Model is. Sure, it’s the “M” in <span class="caps">MVC</span>, it’s a staple of software design, it’s something that’s been in every Rails (and merb! yeah I was one of those guys for awhile) project, large and small, that I’ve been involved with since I first watched <a href="http://www.youtube.com/watch?v=Gzj723LkRJY" rel="nofollow" target="_blank">DHH’s Danish-accented, whoops-laden screencast</a>.</p>
<p>But in writing the above code, I felt like I was throwing everything into the <code>fighter</code> model out of habit. I kept asking myself, “what <em>is</em> a model, really?” I know, I know, I should stop with the soul searching and get back to the code. What I’m getting at, though, is that Clojure (and to some extent Noir) is really forcing me to re-examine my current habits and assumptions about coding and software design.</p>
<p>Here are the decisions I introduced to impose order:</p>
<h3>I’m dealing with “data mappers”, not “models”</h3>
<p>The code above concerns itself with:</p>
<ol>
	<li>Transforming user input in order to persist it</li>
	<li>Persisting the transformed data</li>
	<li>Retrieving data from storage</li>
	<li>Transforming retrieved data for consumption by the system</li>
</ol>
<p>This data-centric view of the world speaks more of lightweight, “dumb” data structures than heavyweight, overly-smart “models”. Perhaps the distinction is all in my head, but by using the term “data mapper” I want to communicate that the code’s purpose is to act as a pipe – a “map”, if you will – between the domain layer and the persistence layer.</p>
<h3>Data mappers should clearly distinguish data, transformation, and persistence</h3>
<p>In the original <code>fighter.clj</code>, I mix together transformation and persistence functions, as you can see below:</p>
<div class="attachment-path source"><a rel="nofollow">clojure/refactoring-to-datamappers/original/fighter.clj</a></div><div class="code pygments"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>67
68
69
70
71
72
73
74
75
76
77
78
79</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="kd">defn- </span><span class="nv">resize-and-save-image</span> <span class="p">[</span><span class="nv">object-id</span> <span class="nv">file-upload</span><span class="p">]</span>
  <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">= </span><span class="mi">0</span> <span class="p">(</span><span class="ss">:size</span> <span class="nv">file-upload</span><span class="p">)))</span>
    <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">extension</span>    <span class="p">(</span><span class="nf">FilenameUtils/getExtension</span> <span class="p">(</span><span class="ss">:filename</span> <span class="nv">file-upload</span><span class="p">))</span>
          <span class="nv">content-type</span> <span class="p">(</span><span class="ss">:content-type</span> <span class="nv">file-upload</span><span class="p">)</span>
          <span class="nv">file</span>         <span class="p">(</span><span class="ss">:tempfile</span> <span class="nv">file-upload</span><span class="p">)</span>
          <span class="nv">img-fields</span>   <span class="p">(</span><span class="nf">image-fields</span> <span class="nv">object-id</span> <span class="nv">extension</span><span class="p">)]</span>
      <span class="c1">;; save original</span>
      <span class="p">(</span><span class="nf">save-image</span> <span class="p">(</span><span class="nf">image-relative-path</span> <span class="s">"original"</span> <span class="nv">img-fields</span><span class="p">)</span> <span class="nv">file</span> <span class="nv">content-type</span><span class="p">)</span>
      <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">buff-img</span> <span class="p">(</span><span class="nf">ImageIO/read</span> <span class="nv">file</span><span class="p">)]</span>
        <span class="p">(</span><span class="nb">doseq </span><span class="p">[[</span><span class="nv">version</span> <span class="o">&amp;</span> <span class="nv">dim</span><span class="p">]</span> <span class="nv">*image-versions</span><span class="p">]</span>
          <span class="p">(</span><span class="nf">save-image</span> <span class="p">(</span><span class="nf">image-relative-path</span> <span class="nv">version</span> <span class="nv">img-fields</span><span class="p">)</span>
                      <span class="p">(</span><span class="nf">buffered-image-&gt;input-stream</span> <span class="p">(</span><span class="nb">apply </span><span class="nv">resize</span> <span class="p">(</span><span class="nb">cons </span><span class="nv">buff-img</span> <span class="nv">dim</span><span class="p">))</span> <span class="nv">extension</span><span class="p">)</span>
                      <span class="nv">version</span><span class="p">))))))</span>
</pre></div>
</td></tr></tbody></table></div><p>I mean, the name is “resize-<span class="caps">AND</span>-save-image”. Transform <span class="caps">AND</span> persist, mooshed together. This looks like exactly the kind of “complecting” that Rich Hickey talked about. I’m shoving two things together which really don’t belong together.</p>
<p>What I decided to instead was to be explicit about the persistence process. Functions should transform input data into a representation appropriate for the storage medium. Then a separate function should store that representation. This way, the persistence function has no knowledge of the transformation function and vice versa.</p>
<p>The same applies to data retrieval. First, retrieve a representation from storage. Next, transform that data using a function. Return the new representation.</p>
<p>One specific benefit I wanted to get out of this process was to remove any need for domain code to translate between string ID’s and mongodb’s <span class="caps">BSON</span> <code>ObjectIDs</code>. I had <code>(idstr fighter)</code> littered all throughout my views, and that was ugly and unnecessary.</p>
<h2>The Refactored Code</h2>
<p>Here’s the refactored fighter.clj file:</p>
<div class="attachment-path source"><a rel="nofollow">clojure/refactoring-to-datamappers/refactored/fighter.clj</a></div><div class="code pygments"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="kd">ns </span><span class="nv">arenaverse.data-mappers.fighter</span>
  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">arenaverse.data-mappers.db</span> <span class="ss">:as</span> <span class="nv">db</span><span class="p">]</span>
            <span class="p">[</span><span class="nv">arenaverse.lib.aws.s3</span> <span class="ss">:as</span> <span class="nv">s3</span><span class="p">]</span>
            <span class="p">[</span><span class="nv">arenaverse.config</span> <span class="ss">:as</span> <span class="nv">config</span><span class="p">])</span>

  <span class="p">(</span><span class="ss">:import</span> <span class="p">[</span><span class="nv">org.bson.types</span> <span class="nv">ObjectId</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">org.imgscalr</span> <span class="nv">Scalr</span> <span class="nv">Scalr$Method</span> <span class="nv">Scalr$Mode</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">javax.imageio</span> <span class="nv">ImageIO</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">java.awt.image</span> <span class="nv">BufferedImageOp</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">java.awt.image</span> <span class="nv">BufferedImage</span><span class="p">]</span>
           <span class="p">[</span><span class="nv">org.apache.commons.io</span> <span class="nv">FilenameUtils</span><span class="p">]))</span>

<span class="p">(</span><span class="kd">declare </span><span class="nv">one-by-id</span><span class="p">)</span>

<span class="p">(</span><span class="nf">db/add-db-reqs</span><span class="p">)</span>
<span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">collection-name</span> <span class="s">"fighters"</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">db/add-db-fns</span> <span class="nv">collection-name</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">db/add-finder-fns</span><span class="p">))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">*image-versions</span> <span class="p">[[</span><span class="s">"card"</span> <span class="mi">192</span><span class="p">]</span>
                      <span class="p">[</span><span class="s">"listing"</span> <span class="mi">64</span><span class="p">]</span>
                      <span class="p">[</span><span class="s">"battle"</span> <span class="mi">432</span> <span class="mi">638</span><span class="p">]])</span>

<span class="c1">;;----</span>
<span class="c1">;; Images</span>
<span class="c1">;;----</span>
<span class="p">(</span><span class="kd">defn </span><span class="nv">image-relative-path</span> <span class="p">[</span><span class="nv">version</span> <span class="p">{</span><span class="ss">:keys</span> <span class="p">[</span><span class="nv">_id</span> <span class="nv">image-extension</span><span class="p">]}]</span>
  <span class="p">(</span><span class="nb">str </span><span class="s">"fighters/"</span> <span class="nv">_id</span> <span class="s">"/"</span> <span class="nv">version</span> <span class="s">"."</span> <span class="nv">image-extension</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">image-path</span> <span class="p">[</span><span class="nv">version</span> <span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">str </span><span class="s">"/"</span> <span class="p">(</span><span class="nf">image-relative-path</span> <span class="nv">version</span> <span class="nv">record</span><span class="p">)))</span>

<span class="c1">;; TODO not hardcode this</span>
<span class="p">(</span><span class="kd">defn- </span><span class="nv">bucket-name</span> <span class="p">[]</span>
  <span class="p">(</span><span class="nb">str </span><span class="s">"arenaverse-"</span> <span class="p">(</span><span class="nb">name </span><span class="nv">config/env</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">amazon-image-path</span> <span class="p">[</span><span class="nv">version</span> <span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">str </span><span class="s">"https://s3.amazonaws.com/"</span> <span class="p">(</span><span class="nf">bucket-name</span><span class="p">)</span> <span class="p">(</span><span class="nf">image-path</span> <span class="nv">version</span> <span class="nv">record</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">normalize-image-extension</span> <span class="p">[</span><span class="nv">extension</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">clojure.string/replace</span> <span class="nv">extension</span> <span class="s">"jpeg"</span> <span class="s">"jpg"</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">image-fields</span> <span class="p">[</span><span class="nv">object-id</span> <span class="nv">image-extension</span><span class="p">]</span>
  <span class="p">{</span><span class="ss">:_id</span> <span class="nv">object-id</span>
   <span class="ss">:image-extension</span> <span class="p">(</span><span class="nf">normalize-image-extension</span> <span class="nv">image-extension</span><span class="p">)})</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">resize</span>
  <span class="p">([</span><span class="nv">image</span> <span class="nv">box</span><span class="p">]</span>
     <span class="p">(</span><span class="nf">resize</span> <span class="nv">image</span> <span class="nv">box</span> <span class="nv">box</span><span class="p">))</span>
  <span class="p">([</span><span class="nv">image</span> <span class="nv">target-width</span> <span class="nv">target-height</span><span class="p">]</span>
     <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">width</span>  <span class="p">(</span><span class="nf">.getWidth</span> <span class="nv">image</span><span class="p">)</span>
           <span class="nv">height</span> <span class="p">(</span><span class="nf">.getHeight</span> <span class="nv">image</span><span class="p">)</span>
           <span class="nv">fit</span> <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nb">/ </span><span class="nv">target-width</span> <span class="nv">width</span><span class="p">)</span> <span class="p">(</span><span class="nb">/ </span><span class="nv">target-height</span> <span class="nv">height</span><span class="p">))</span> <span class="nv">Scalr$Mode/FIT_TO_HEIGHT</span> <span class="nv">Scalr$Mode/FIT_TO_WIDTH</span><span class="p">)]</span>
       <span class="p">(</span><span class="nf">Scalr/resize</span> <span class="nv">image</span> <span class="nv">Scalr$Method/ULTRA_QUALITY</span> <span class="nv">fit</span> <span class="nv">target-width</span> <span class="nv">target-height</span> <span class="p">(</span><span class="nb">into-array </span><span class="nv">BufferedImageOp</span> <span class="p">[])))))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">buffered-image-&gt;input-stream</span> <span class="p">[</span><span class="nv">buffered-image</span> <span class="nv">extension</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">os</span> <span class="p">(</span><span class="nf">java.io.ByteArrayOutputStream.</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">ImageIO/write</span> <span class="nv">buffered-image</span> <span class="nv">extension</span> <span class="nv">os</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">java.io.ByteArrayInputStream.</span> <span class="p">(</span><span class="nf">.toByteArray</span> <span class="nv">os</span><span class="p">))))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">input-&gt;image-extension</span> <span class="p">[</span><span class="nv">input</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">FilenameUtils/getExtension</span> <span class="p">(</span><span class="ss">:filename</span> <span class="p">(</span><span class="ss">:file</span> <span class="nv">input</span><span class="p">))))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">image-uploaded?</span> <span class="p">[</span><span class="nv">input</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">not </span><span class="p">(</span><span class="nb">= </span><span class="mi">0</span> <span class="p">(</span><span class="ss">:size</span> <span class="p">(</span><span class="ss">:file</span> <span class="nv">input</span><span class="p">)))))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">input-&gt;images</span> <span class="p">[</span><span class="nv">input</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">file-upload</span>   <span class="p">(</span><span class="ss">:file</span> <span class="nv">input</span><span class="p">)</span>
        <span class="nv">original-file</span> <span class="p">(</span><span class="ss">:tempfile</span> <span class="nv">file-upload</span><span class="p">)</span>
        <span class="nv">content-type</span>  <span class="p">(</span><span class="ss">:content-type</span> <span class="nv">file-upload</span><span class="p">)</span>
        <span class="nv">original-image</span> <span class="p">{</span><span class="ss">:version</span> <span class="s">"original"</span>
                        <span class="ss">:file</span> <span class="nv">original-file</span>
                        <span class="ss">:content-type</span> <span class="nv">content-type</span><span class="p">}</span>
        <span class="nv">image-extension</span> <span class="p">(</span><span class="nf">normalize-image-extension</span> <span class="p">(</span><span class="nf">input-&gt;image-extension</span> <span class="nv">input</span><span class="p">))</span>
        <span class="nv">buff-img</span> <span class="p">(</span><span class="nf">ImageIO/read</span> <span class="nv">original-file</span><span class="p">)]</span>
    
    <span class="c1">;; TODO make this a lazy seq</span>
    <span class="p">(</span><span class="nb">conj </span><span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">fn </span><span class="p">[[</span><span class="nv">version</span> <span class="o">&amp;</span> <span class="nv">dim</span><span class="p">]]</span>
                 <span class="p">{</span><span class="ss">:version</span> <span class="nv">version</span>
                  <span class="ss">:file</span> <span class="p">(</span><span class="nf">buffered-image-&gt;input-stream</span>
                         <span class="p">(</span><span class="nb">apply </span><span class="nv">resize</span> <span class="p">(</span><span class="nb">cons </span><span class="nv">buff-img</span> <span class="nv">dim</span><span class="p">))</span>
                         <span class="nv">image-extension</span><span class="p">)</span>
                  <span class="ss">:content-type</span> <span class="nv">content-type</span><span class="p">})</span>
               <span class="nv">*image-versions</span><span class="p">)</span>
          <span class="nv">original-image</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">store-image</span> <span class="p">[</span><span class="nv">image</span>, <span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">s3/put-object</span> <span class="nv">config/*aws-credentials*</span>
                 <span class="p">(</span><span class="nf">bucket-name</span><span class="p">)</span>
                 <span class="p">(</span><span class="nf">image-relative-path</span> <span class="p">(</span><span class="ss">:version</span> <span class="nv">image</span><span class="p">)</span> <span class="nv">record</span><span class="p">)</span>
                 <span class="p">(</span><span class="ss">:file</span> <span class="nv">image</span><span class="p">)</span>
                 <span class="p">{</span><span class="ss">:content-type</span> <span class="p">(</span><span class="ss">:content-type</span> <span class="nv">image</span><span class="p">)}</span>
                 <span class="o">#</span><span class="p">(</span><span class="nf">.withCannedAcl</span> <span class="nv">%</span> <span class="nv">com.amazonaws.services.s3.model.CannedAccessControlList/PublicRead</span><span class="p">)))</span>


<span class="p">(</span><span class="kd">defn- </span><span class="nv">store-images</span> <span class="p">[</span><span class="nv">input</span> <span class="nv">db-fields</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">future</span>
    <span class="p">(</span><span class="nb">doseq </span><span class="p">[</span><span class="nv">image</span> <span class="p">(</span><span class="nf">input-&gt;images</span> <span class="nv">input</span><span class="p">)]</span>
      <span class="p">(</span><span class="nf">store-image</span> <span class="nv">image</span> <span class="nv">db-fields</span><span class="p">))))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">create-input-&gt;db-fields</span> <span class="p">[</span><span class="nv">input</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">object-id</span> <span class="p">(</span><span class="nf">ObjectId.</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">merge</span>
     <span class="p">(</span><span class="nb">dissoc </span><span class="nv">input</span> <span class="ss">:file</span><span class="p">)</span>
     <span class="p">(</span><span class="nf">image-fields</span> <span class="nv">object-id</span> <span class="p">(</span><span class="nf">input-&gt;image-extension</span> <span class="nv">input</span><span class="p">)))))</span>

<span class="p">(</span><span class="kd">defn- </span><span class="nv">update-input-&gt;db-fields</span> <span class="p">[</span><span class="nv">input</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">object-id</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="p">(</span><span class="ss">:_id</span> <span class="nv">input</span><span class="p">))</span>
        <span class="nv">record</span> <span class="p">(</span><span class="nf">db-one-by-id</span> <span class="nv">object-id</span><span class="p">)</span>
        <span class="c1">;; ensure that the user doesn't alter the arena id</span>
        <span class="c1">;; and that image-extension isn't overwritten when no file is present</span>
        <span class="nv">db-fields</span> <span class="p">(</span><span class="nf">merge</span>
                   <span class="p">(</span><span class="nb">select-keys </span><span class="nv">record</span> <span class="p">[</span><span class="ss">:image-extension</span><span class="p">])</span>
                   <span class="p">(</span><span class="nb">dissoc </span><span class="nv">input</span> <span class="ss">:_id</span> <span class="ss">:file</span><span class="p">)</span>
                   <span class="p">(</span><span class="nb">select-keys </span><span class="nv">record</span> <span class="p">[</span><span class="ss">:arena-id</span><span class="p">]))]</span>
    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">image-uploaded?</span> <span class="nv">input</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">merge </span><span class="nv">db-fields</span> <span class="p">(</span><span class="nf">image-fields</span> <span class="nv">object-id</span> <span class="p">(</span><span class="nf">input-&gt;image-extension</span> <span class="nv">input</span><span class="p">)))</span>
      <span class="nv">db-fields</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">create</span> <span class="p">[</span><span class="nv">input</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">db-fields</span> <span class="p">(</span><span class="nf">create-input-&gt;db-fields</span> <span class="nv">input</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">db-insert</span> <span class="nv">db-fields</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">when </span><span class="p">(</span><span class="nf">image-uploaded?</span> <span class="nv">input</span><span class="p">)</span> <span class="p">(</span><span class="nf">store-images</span> <span class="nv">input</span> <span class="nv">db-fields</span><span class="p">))</span>
    <span class="nv">db-fields</span><span class="p">))</span>

<span class="c1">;; this is weird... i remove the object id in the -&gt;db-fields method,</span>
<span class="c1">;; then add it back again</span>
<span class="p">(</span><span class="kd">defn </span><span class="nv">update</span> <span class="p">[</span><span class="nv">input</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">db-fields</span> <span class="p">(</span><span class="nf">update-input-&gt;db-fields</span> <span class="nv">input</span><span class="p">)</span>
        <span class="nv">object-id</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="p">(</span><span class="ss">:_id</span> <span class="nv">input</span><span class="p">))</span>
        <span class="nv">record</span>    <span class="p">(</span><span class="nb">merge </span><span class="nv">db-fields</span> <span class="p">{</span><span class="ss">:_id</span> <span class="nv">object-id</span><span class="p">})]</span>
    <span class="p">(</span><span class="nf">db-update-by-id</span> <span class="nv">object-id</span> <span class="nv">db-fields</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">when </span><span class="p">(</span><span class="nf">image-uploaded?</span> <span class="nv">input</span><span class="p">)</span> <span class="p">(</span><span class="nf">store-images</span> <span class="nv">input</span> <span class="nv">db-fields</span><span class="p">))</span>
    <span class="nv">db-fields</span><span class="p">))</span>

<span class="c1">;; TODO query S3 first to avoid missing any images if i.e. image</span>
<span class="c1">;; version names change</span>
<span class="p">(</span><span class="kd">defn- </span><span class="nv">delete-images</span> <span class="p">[</span><span class="nv">record</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">doseq </span><span class="p">[[</span><span class="nv">vname</span><span class="p">]</span> <span class="p">(</span><span class="nb">conj </span><span class="nv">*image-versions</span> <span class="p">[</span><span class="s">"original"</span><span class="p">])]</span>
    <span class="p">(</span><span class="nf">s3/delete-object</span> <span class="nv">config/*aws-credentials*</span> <span class="p">(</span><span class="nf">bucket-name</span><span class="p">)</span> <span class="p">(</span><span class="nf">image-relative-path</span> <span class="nv">vname</span> <span class="nv">record</span><span class="p">))))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">destroy</span> <span class="p">[</span><span class="nv">_id</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">object-id</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="nv">_id</span><span class="p">)</span>
        <span class="nv">record</span> <span class="p">(</span><span class="nf">db-one-by-id</span> <span class="nv">object-id</span><span class="p">)]</span>
    <span class="p">(</span><span class="nf">delete-images</span> <span class="nv">record</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">db-destroy</span> <span class="nv">object-id</span><span class="p">)))</span>
</pre></div>
</td></tr></tbody></table></div><p><code>resize-and-save-image</code> has been broken into <code>input-&gt;images</code> and <code>store-image</code>, lines 67 and 87, and neither has knowledge of the other. I also introduced <code>create-input-&gt;db-fields</code> and <code>update-input-&gt;db-fields</code>.</p>
<p>You might also have noticed some weird code at lines 15-18. The functions being used are here:</p>
<div class="attachment-path source"><a rel="nofollow">clojure/refactoring-to-datamappers/refactored/db.clj</a></div><div class="code pygments"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="kd">ns </span><span class="nv">arenaverse.data-mappers.db</span><span class="p">)</span>

<span class="p">(</span><span class="kd">defmacro </span><span class="nv">add-db-reqs</span> <span class="p">[]</span>
  <span class="o">'</span><span class="p">(</span><span class="nf">do</span>
     <span class="p">(</span><span class="nf">require</span> <span class="ss">'monger.collection</span><span class="p">)</span>
     <span class="p">(</span><span class="nb">import </span><span class="ss">'org.bson.types.ObjectId</span><span class="p">)))</span>

<span class="c1">;; TODO ~' Insanity! #cthulhu</span>
<span class="c1">;; These macros are meant to infect the namespace with functions. Why</span>
<span class="c1">;; would I want to do this? Should I take heed of the fact that</span>
<span class="c1">;; Clojure really doesn't want me to?</span>

<span class="c1">;; I wrote these fucntions to avoid having to write collection-name</span>
<span class="c1">;; all over the place</span>
<span class="p">(</span><span class="kd">defmacro </span><span class="nv">add-db-fns</span> <span class="p">[</span><span class="nv">collection-name</span><span class="p">]</span>
  <span class="o">`</span><span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">collection-name#</span> <span class="o">~</span><span class="nv">collection-name</span><span class="p">]</span>
    <span class="p">(</span><span class="k">def </span><span class="o">~</span><span class="ss">'db-destroy</span> <span class="p">(</span><span class="nb">partial </span><span class="nv">monger.collection/remove-by-id</span> <span class="nv">collection-name#</span><span class="p">))</span>     
    <span class="p">(</span><span class="k">def </span><span class="o">~</span><span class="ss">'db-one</span> <span class="p">(</span><span class="nb">partial </span><span class="nv">monger.collection/find-one-as-map</span> <span class="nv">collection-name#</span><span class="p">))</span>
    <span class="p">(</span><span class="k">def </span><span class="o">~</span><span class="ss">'db-one-by-id</span> <span class="p">(</span><span class="nb">partial </span><span class="nv">monger.collection/find-map-by-id</span> <span class="nv">collection-name#</span><span class="p">))</span>
    <span class="p">(</span><span class="k">def </span><span class="o">~</span><span class="ss">'db-all</span> <span class="p">(</span><span class="nb">partial </span><span class="nv">monger.collection/find-maps</span> <span class="nv">collection-name#</span><span class="p">))</span>
    <span class="p">(</span><span class="k">def </span><span class="o">~</span><span class="ss">'db-insert</span> <span class="p">(</span><span class="nb">partial </span><span class="nv">monger.collection/insert</span> <span class="nv">collection-name#</span><span class="p">))</span>
    <span class="p">(</span><span class="k">def </span><span class="o">~</span><span class="ss">'db-update-by-id</span> <span class="p">(</span><span class="nb">partial </span><span class="nv">monger.collection/update-by-id</span> <span class="nv">collection-name#</span><span class="p">))</span>
    <span class="p">(</span><span class="k">def </span><span class="o">~</span><span class="ss">'db-update</span> <span class="p">(</span><span class="nb">partial </span><span class="nv">monger.collection/update</span> <span class="nv">collection-name#</span><span class="p">))))</span>

<span class="c1">;; These methods are meant to generate the representations which</span>
<span class="c1">;; non-db parts of the code will use. They all convert ObjectId's to</span>
<span class="c1">;; strings because no other part of the system should care about ObjectId's</span>
<span class="p">(</span><span class="kd">defmacro </span><span class="nv">add-finder-fns</span> <span class="p">[]</span>
  <span class="o">'</span><span class="p">(</span><span class="nf">do</span>
     <span class="c1">;; TODO this doesn't feel like it belongs here. It's a helper</span>
     <span class="c1">;; method. But this macro approach is infecting everything!</span>
     <span class="p">(</span><span class="kd">defn </span><span class="nv">idstr</span> <span class="p">[</span><span class="nv">record</span><span class="p">]</span>
       <span class="p">(</span><span class="nf">.toString</span> <span class="p">(</span><span class="ss">:_id</span> <span class="nv">record</span><span class="p">)))</span>
     
     <span class="p">(</span><span class="kd">defn </span><span class="nv">object-id-&gt;idstr</span> <span class="p">[</span><span class="nv">record</span><span class="p">]</span>
       <span class="p">(</span><span class="nb">assoc </span><span class="nv">record</span> <span class="ss">:_id</span> <span class="p">(</span><span class="nf">idstr</span> <span class="nv">record</span><span class="p">)))</span>

     <span class="c1">;; TODO I don't like mapping in the all fn, feels wasteful.</span>
     <span class="p">(</span><span class="kd">defn </span><span class="nv">all</span> <span class="p">[</span><span class="o">&amp;</span> <span class="p">[</span><span class="nv">query-doc</span><span class="p">]]</span>
       <span class="p">(</span><span class="nb">map </span><span class="nv">object-id-&gt;idstr</span> <span class="p">(</span><span class="nf">db-all</span> <span class="nv">query-doc</span><span class="p">)))</span>
     
     <span class="p">(</span><span class="kd">defn </span><span class="nv">one</span> <span class="p">[</span><span class="o">&amp;</span> <span class="p">[</span><span class="nv">query-doc</span><span class="p">]]</span>
       <span class="p">(</span><span class="nb">if-let </span><span class="p">[</span><span class="nv">r</span> <span class="p">(</span><span class="nf">db-one</span> <span class="nv">query-doc</span><span class="p">)]</span>
         <span class="p">(</span><span class="nf">object-id-&gt;idstr</span> <span class="nv">r</span><span class="p">)))</span>
     
     <span class="p">(</span><span class="kd">defn </span><span class="nv">one-by-id</span> <span class="p">[</span><span class="nv">_id</span><span class="p">]</span>
       <span class="p">(</span><span class="nb">if-let </span><span class="p">[</span><span class="nv">r</span> <span class="p">(</span><span class="nf">db-one-by-id</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="nv">_id</span><span class="p">))]</span>
         <span class="p">(</span><span class="nf">object-id-&gt;idstr</span> <span class="nv">r</span><span class="p">)))))</span>
</pre></div>
</td></tr></tbody></table></div><p>Now this is some seriously weird code. I don’t know if this is a good idea at all – it doesn’t feel like good Clojure or good lisp.</p>
<p>That being said, there are two macros, both of which create new functions in the namespace in which they’re called. The first set simply wraps monger functions and keeps me from having to repeat the mongodb collection name argument over and over. The second set of functions performs the storage-to-domain-representation transformations.</p>
<p>You can see in the comments that I feel seriously weirded out by this code. It had me questioning what I’m really using namespaces for. If <code>idstr</code> does the exact same thing in every namespace that it’s copied to, then why am I throwing it into multiple namespaces? <code>add-db-fns</code> helps me reduce duplication, but is it really worth it? Perhaps that’ll be the subject of another blog post about another refactoring.</p>
<p>For completeness’s sake, here’s the refactored arena.clj:</p>
<div class="attachment-path source"><a rel="nofollow">clojure/refactoring-to-datamappers/refactored/arena.clj</a></div><div class="code pygments"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">(</span><span class="kd">ns </span><span class="nv">arenaverse.data-mappers.arena</span>
  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">arenaverse.data-mappers.db</span> <span class="ss">:as</span> <span class="nv">db</span><span class="p">]))</span>

<span class="p">(</span><span class="nf">db/add-db-reqs</span><span class="p">)</span>
<span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">collection-name</span> <span class="s">"arenas"</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">db/add-db-fns</span> <span class="nv">collection-name</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">db/add-finder-fns</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">destroy</span> <span class="p">[</span><span class="nv">_id</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">db-destroy</span> <span class="p">(</span><span class="nf">ObjectId.</span> <span class="nv">_id</span><span class="p">)))</span>
</pre></div>
</td></tr></tbody></table></div><h2>A Scarier Monster?</h2>
<p>Some more doubts about the new code:</p>
<ul>
	<li>Should the image processing code be somewhere else?</li>
	<li>Should I write a wrapper around the S3 code, as I did for the monger code? Should I be more explicit about the representation/persistence relationship?</li>
	<li>How about the <code>amazon-image-path</code> function? Where does that go? In this case, I actually am doing something beyond just mapping data.</li>
</ul>
<h2>The End</h2>
<p>Thus ends our exhausting – I mean, exhaustive – tour of this little refactoring. I’d love any feedback on the code!</p>
<p>Special thanks to <a href="http://danielchoi.com/software/" rel="nofollow" target="_blank">Daniel Choi</a> for linking to the Rich Hickey talk and to <a href="http://bostonrb.org/" rel="nofollow" target="_blank">bostonrb</a> for a great discussion on simplicity.</p>              </p>
              <p class="meta"><a href="http://www.flyingmachinestudios.com/programming/refactoring-to-datamappers-in-clojure/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a0161f6185ca965613735b6b06f2e3ef" title="Mark Watson">Mark Watson</a></h2>
              <p>
July 06, 2012 10:19 AM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a0161f6185ca965613735b6b06f2e3ef">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://blog.markwatson.com/2012/07/shoutout-and-thanks-to-pharo-smalltalk.html">A shoutout and thanks to the Pharo Smalltalk developers</a></h2>
              <p>
<p><a href="http://www.pharo-project.org/home" rel="nofollow" target="_blank">Pharo</a> is a fork from the Squeak open-source Smalltalk and provides an incredibly rich development environment. As a consultant people pay me to design and write code in Ruby, Clojure, Common Lisp, and Java. That said, for non-work related experiments, Pharo is a lot of fun to use: a modern and free Smalltalk environment. I just wanted to say thanks to the Pharo team: great work! I recently downloaded the 2.0 development build - exciting to see new features. One thing in particular that strikes me as awesome about Pharo is that it is very light weight, using little memory and CPU resources. I wrote a blog 5 years ago about deploying Squeak to Linux servers. I am a little surprised that Pharo is not more widely used for rich web applications but with so many great languages and frameworks (Rails, Sinatra, Clojure Noir, Java Play Framework, GWT, etc., etc.) there is a lot of competition for developer mindshare.</p> <p>My personal interest in Smalltalk started when I got a Xerox 1108 Lisp Machine in 1982 and the Xerox SIS salesman gave me a one month license to try Smalltalk.</p><div class="blogger-post-footer"><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/7100397-2117525016021647866?l=blog.markwatson.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://blog.markwatson.com/2012/07/shoutout-and-thanks-to-pharo-smalltalk.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://proctorit.wordpress.com" title="Proctor It » Clojure">Steven Proctor</a></h2>
              <p>
July 06, 2012 01:49 AM                <br />
                <a href="http://proctorit.wordpress.com">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://proctorit.wordpress.com/2012/07/05/project-euler-in-clojure-problem-9-redux/">Project Euler in Clojure – Problem 9 Redux</a></h2>
              <p>
<p>After contemplating on the comments on my <a href="http://proctorit.wordpress.com/2012/07/01/project-euler-in-clojure-problem-9/" title="Project Euler in Clojure – Problem 9">previous solution</a> to <a href="http://projecteuler.net/problem=9">Problem 9</a> of Project Euler, I took a few minutes and looked into the for comprehension and then rewrote the method for generating the pythagorean triples.</p>
<p>I also had a comment pointing out that I was missing some triples generated, and that I was likely lucky in getting a triple that matched the criteria.  When I was originally looking at wikipedia at the posting on <a href="http://en.wikipedia.org/wiki/Pythagorean_triple" target="_blank" title="Pythagorean Triple">Pythagorean Triple</a>, I saw the following text:</p>
<pre>Despite generating all primitive triples, Euclid's formula does not produce all triples.
</pre>
<p>I figured I was good with just generating all primitive triples, but as it was pointed out that I was missing some, I added in the functionality to generate the multiples of the triples as well.</p>
<p>The function pythagorean-triples has now been rewritten as:<br />
</p><pre class="brush: clojure;">(defn pythagorean-triples []
  (for [m (range 2 500)
        n (range 1 m)
        k (range 1 500)]
        (map (partial * k) (pythagorean-triple-for m n))))
</pre><p></p>
<p>Thanks for the feedback, and this is much nicer, even with the extra computation for multiplying the triples by a K.</p>
<p>–Proctor</p>
<br />Filed under: <a href="http://proctorit.wordpress.com/category/clojure/">Clojure</a>, <a href="http://proctorit.wordpress.com/category/deliberate-practice/">Deliberate Practice</a>, <a href="http://proctorit.wordpress.com/category/lisp/">Lisp</a>, <a href="http://proctorit.wordpress.com/category/project-euler/">Project Euler</a> Tagged: <a href="http://proctorit.wordpress.com/tag/clojure/">Clojure</a>, <a href="http://proctorit.wordpress.com/tag/deliberate-practice/">Deliberate Practice</a>, <a href="http://proctorit.wordpress.com/tag/project-euler/">Project Euler</a> <a href="http://feeds.wordpress.com/1.0/gocomments/proctorit.wordpress.com/234/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/proctorit.wordpress.com/234/" /></a> <a href="http://feeds.wordpress.com/1.0/godelicious/proctorit.wordpress.com/234/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/delicious/proctorit.wordpress.com/234/" /></a> <a href="http://feeds.wordpress.com/1.0/gofacebook/proctorit.wordpress.com/234/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/facebook/proctorit.wordpress.com/234/" /></a> <a href="http://feeds.wordpress.com/1.0/gotwitter/proctorit.wordpress.com/234/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/twitter/proctorit.wordpress.com/234/" /></a> <a href="http://feeds.wordpress.com/1.0/gostumble/proctorit.wordpress.com/234/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/stumble/proctorit.wordpress.com/234/" /></a> <a href="http://feeds.wordpress.com/1.0/godigg/proctorit.wordpress.com/234/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/digg/proctorit.wordpress.com/234/" /></a> <a href="http://feeds.wordpress.com/1.0/goreddit/proctorit.wordpress.com/234/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/reddit/proctorit.wordpress.com/234/" /></a> <img alt="" border="0" height="1" src="http://stats.wordpress.com/b.gif?host=proctorit.wordpress.com&amp;blog=16765922&amp;post=234&amp;subd=proctorit&amp;ref=&amp;feed=1" width="1" />              </p>
              <p class="meta"><a href="http://proctorit.wordpress.com/2012/07/05/project-euler-in-clojure-problem-9-redux/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://shenfeng.me" title="shenfeng's blog">Feng Shen</a></h2>
              <p>
July 05, 2012 04:00 PM                <br />
                <a href="http://shenfeng.me">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://shenfeng.me/rssminer-public-beta.html">Rssminer public beta</a></h2>
              <p>
<p><a href="http://rssminer.net">Rssminer</a> is a simple online <a href="http://en.wikipedia.org/wiki/News_aggregator">RSS reader</a> written in Clojure, Java, Javascript.</p>

<h3 id="feature">Feature</h3>

<ul>
<li>Not Feature rich, just a central place to reading RSS news.</li>

<li>Concise UI.</li>

<li>Read the orignal article, which may include valuable comments.</li>

<li>Learing from reading history, rank all articles accordingly.</li>

<li>Fast, Instant full text search.</li>
</ul>

<h3 id="a_brief_history">A brief history</h3>

<ol>
<li>Initially, I randly pick a project to experiment one page javascript APP, client side unit testing. A RSS reader is choosen by accident.</li>

<li><a href="https://github.com/documentcloud/backbone">Backbone</a> is tried, I even read <a href="http://documentcloud.github.com/backbone/docs/backbone.html">the code</a> several times. <a href="http://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742">JavaScript: The Good Parts</a>, got read several times.</li>

<li><a href="http://en.wikipedia.org/wiki/Functional_programming">Function</a> and <a href="https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals">Object literal</a> are the best parts of Javascript. They complement each other. Backbone fail to utilize them efficiently.</li>

<li>I did many expriments and thinking. By dropping Backone.js, take my brain as the backone, <a href="https://github.com/shenfeng/rssminer/tree/master/public/js/rssminer">structure the code</a> the way I like it, I found a better world.</li>

<li>Writing javascript is fun. Writing Clojure is fun. Clojure mixed with JAVA is really great. They make me continue doing this project.</li>

<li><a href="http://rssminer.net">Rssminer</a> is born.</li>
</ol>

<h3 id="performance">Performance</h3>

<p>I like fast application. In order to be fast,</p>

<ul>
<li>The application is carefully designed .</li>

<li>A <a href="https://github.com/shenfeng/http-kit">WEB server</a>, written from scratch to power Rssminer, to achieve low lantency.</li>

<li>A <a href="https://github.com/shenfeng/http-kit">HTTP Client</a>, written from scratch to power the fetcher module.</li>

<li>A fast <a href="https://github.com/shenfeng/mustache.clj">Template</a>. With it, I can easily pack the minified CSS with the HTML to save a network round trip. It bootstrap the application.</li>

<li>Browser talks to server in JSON. Render HTML in browser side achieves even better performance.</li>

<li>Powered by Redis and MySQL</li>
</ul>

<h3 id="demo">Demo</h3>

<p>A demo account is created: <a href="http://rssminer.net/demo">http://rssminer.net/demo</a>. Feel free to try it. Feedbacks are welcome.</p>

<h3 id="open_source">Open Source</h3>

<p><a href="https://github.com/shenfeng/rssminer">https://github.com/shenfeng/rssminer</a></p>              </p>
              <p class="meta"><a href="http://shenfeng.me/rssminer-public-beta.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://www.snowfrog.net" title="Sonia Hamilton » Clojure">Sonia Hamilton</a></h2>
              <p>
July 05, 2012 02:38 PM                <br />
                <a href="http://www.snowfrog.net">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://www.snowfrog.net/2012/07/06/4clojure-100-least-common-multiple/">4clojure 100 Least Common Multiple</a></h2>
              <p>
<p><a href="http://www.4clojure.com/problem/100">4clojure problem 100</a> – calculate the <a href="http://en.wikipedia.org/wiki/Least_common_multiple">Least Common Multiple (LCM)</a> of two or more numbers.</p>
<p><img alt="LCM Example" class="aligncenter" height="46" src="http://upload.wikimedia.org/wikipedia/en/math/c/b/0/cb0d245e78e328c29095b9522fd16200.png" title="LCM Example" width="380" /></p>
<p>Here’s how I worked it out in the REPL, warts and all….</p>
<p>I first thought about using the meaning of LCM to solve this (as given in Wikipedia), ie for two numbers a and b (eg 4 and 6), find all the multiples of a (an infinite sequence), find all the multiples of b (an infinite sequence), and find the first match. But I was impatient and didn’t want to work out how to find the first match between lists, so I decided to use the GCD definition:</p>
<p><img alt="LCM from GCD" class="aligncenter" height="47" src="http://upload.wikimedia.org/wikipedia/en/math/5/b/3/5b3f3c62dd59cc5594af7b2ece3798fb.png" title="LCM from GCD" width="179" /></p>
<p>From there it was just a matter of balancing parentheses (thanks <a href="http://www.snowfrog.net/2012/06/02/emacs-paredit-notes-for-osx/" title="Emacs Paredit Notes for OSX">paredit</a>) by breaking up the problem into stages, starting with calculating the GCD of two numbers:</p>
<pre class="brush: clojure; title: ; notranslate">(defn gcd [a b]
  (cond
   (= b 0) a
   (= a 0) b
   (&gt; a b) (gcd b (mod a b))
   (&gt; b a) (gcd a (mod b a))))
(gcd 15 5)
==&gt; 5
</pre>
<p>Now get LCM working for two arguments:</p>
<pre class="brush: clojure; title: ; notranslate">(defn lcm [x y]
  (/ (* x y) (gcd x y)))
(lcm 4 6)
==&gt; 12
</pre>
<p>Now get LCM working for more than two arguments. I remembered seeing multiple arities used to solve other 4clojure problems, so I thought I’d use the <a href="http://blog.darevay.com/2011/08/briefly-the-arity-reduce-pattern-in-clojure/">Arity-Reduce “pattern”</a> (well I’m using apply, same idea):</p>
<pre class="brush: clojure; title: ; notranslate">(defn lcm2
  ([x y] (/ (* x y) (gcd x y)))
  ([x y &amp; rest] (apply lcm2 (lcm2 x y) rest)))
(lcm2 5 3 7)
==&gt; 105
</pre>
<p>4clojure doesn’t allow <strong>defn</strong>, so I then used <strong>letfn</strong> to nest my definition of GCD inside LCM:</p>
<pre class="brush: clojure; title: ; notranslate">(fn lcm3
  ([x y]
     (letfn [(gcd2 [a b]
               (cond
                (= b 0) a
                (&gt; a b) (gcd2 b (mod a b))
                (&gt; b a) (gcd2 a (mod b a))))]
       (/ (* x y) (gcd2 x y))))
  ([x y &amp; rest] (apply lcm3 (lcm3 x y) rest)))
(lcm3 5 3 7)
==&gt; 105
</pre>
<p>So my solution worked, but it wasn’t very elegant – Dacquiri wins the prize for that, again :-)</p>              </p>
              <p class="meta"><a href="http://www.snowfrog.net/2012/07/06/4clojure-100-least-common-multiple/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2ded344d16edc2ca2057029693edbb9e" title="Irakli Gozalishvili">Irakli Gozalishvili</a></h2>
              <p>
July 05, 2012 07:00 AM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2ded344d16edc2ca2057029693edbb9e">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://www.jeditoolkit.com/2012/07/05/nodeconf-2012.html">nodeconf 2012</a></h2>
              <p>
<p>I had a great pleasure of attending <a href="http://www.nodeconf.com/" rel="nofollow" target="_blank">nodeconf</a> that took place in <a href="https://maps.google.com/maps?q=portland&amp;hl=en&amp;sll=37.0625,-95.677068&amp;sspn=37.273371,65.302734&amp;t=v&amp;hnear=Portland,+Multnomah,+Oregon&amp;z=10" rel="nofollow" target="_blank">Portland</a>. Conference far exceeded all my expectations. This post has no chance to capture all of the interesting things that happened there, but I still would like to make an effort and share some of the highlights.</p>

<p>First off I would love to thank <a href="http://www.mikealrogers.com/" rel="nofollow" target="_blank">Mikael Rogers</a> and everyone who helped him to set a whole new standard of how conferences should be held! Theatrical feel was through the whole conference: venue at <a href="http://www.imagotheatre.com/theatre.html" rel="nofollow" target="_blank">Imago theatre</a>, talks that flowed into each other according to well crafted scenario. Remarkably single track (or single thread if you will :) model was used, which once again proved to be a perfect fit for event(ed) JS. Another novelty was in a “save questions for the bar” rule that worked out amazingly well.</p>

<h2 id="day_i">Day I</h2>

<p>Both nodejs and conference was started by a <a href="http://tinyclouds.org/" rel="nofollow" target="_blank">Ryah Dahl</a>, who shared with us a little bit of a background story on how &amp; why node was started. Then very first contributors took a scene to talk about very early days of project, when it was very unstable, but still very fun to hack on. That flowed into talks about how node was maturing and making it’s way into production at <a href="https://www.yammer.com/" rel="nofollow" target="_blank">Yammer</a> and elsewhere. Was interesting to learn why companies like Microsoft invest into nodejs and how it became first class citizen on windows. That required core changes to an underline platform layer resulting into <a href="https://github.com/joyent/libuv/" rel="nofollow" target="_blank" title="platform layer for node.js">libuv</a>. There were several interesting talks about <a href="https://github.com/joyent/libuv/" rel="nofollow" target="_blank" title="platform layer for node.js">libuv</a>, specifically showing how node like servers can be written in <strong>C</strong>, how much work is still ahead to be done, and how <a href="https://github.com/joyent/libuv/" rel="nofollow" target="_blank" title="platform layer for node.js">libuv</a> go life of it’s own. Today it is used by other new projects, including Mozilla’s own <a href="http://www.rust-lang.org/" rel="nofollow" target="_blank" title="A safe, concurrent, practical language">rust</a> language, by <a href="http://luvit.io/" rel="nofollow" target="_blank" title="Lua + libUV + jIT = pure awesomesauce">Luvit</a> - node for a Lua language. I was completely blown away by <a href="https://github.com/indutny" rel="nofollow" target="_blank">Fedor Indutny</a>’s crazy simple language <a href="https://github.com/indutny/candor" rel="nofollow" target="_blank" title="Experimental VM for a Candor language">candor</a> with dedicated VM and JIT compiler he wrote. Unfortunately I did not get a chance to chat with him as he disappeared immediately after his talk.</p>

<p>At the end of the day we all headed to a bar. It turned out there is a nodejs powered <a href="http://voiceboxpdx.com" rel="nofollow" target="_blank">karaoke bar</a> in portland, that even has a <a href="http://voiceboxpdx.com/api/v1/documentation" rel="nofollow" target="_blank">public REST API</a>. That is also where I was <a href="http://voiceboxpdx.com/nodeconf-2012-aftermath/" rel="nofollow" target="_blank">rocking out</a> with others until almost loosing a voice (My apologies to everyone who had to bare with that).</p>

<h2 id="day_ii">Day II</h2>

<p>Node is all about <a href="https://github.com/polotek/nodeconf-2012-streams-talk" rel="nofollow" target="_blank">streaming and piping</a> data from one stream to another. That’s what it’s good at and that’s what everyone writing node programs should embrace! We got some interesting talks on that topic. Although there was a talk that demoed that streams are not a magic dust that makes things fast, sometimes buffering is a better approach. Most important take away was that everyone should benchmark to make reasonable decisions based on numbers, not instincts (I feel people often tend to jump to conclusions without any mesures). It was also interesting to learn how streams and other node concepts had being used to drive innovation into browsers.</p>

<p>Another section of talks covered scaling node. That involved talks about tools for benchmarking, profiling, memory leak hunting and real life experience from <a href="http://voxer.com/" rel="nofollow" target="_blank">Voxer</a>.</p>

<p>Final section of talks was about hardware that completely blew away everybody’s minds! All kinds of crazy stuff, that I won’t even attempt to describe, just make sure to watch videos once they’re realized! Here is small teaser of <a href="https://twitter.com/#!/rwaldron" rel="nofollow" target="_blank">Rick Waldron</a>’s amazing node powered <a href="http://www.youtube.com/watch?v=GVGMjsKy3WQ&amp;feature=youtu.be" rel="nofollow" target="_blank">robot</a> to give you an idea.</p>

<p>After party had an epic live performance from the band assembled of a fellow community members! You guys really rocked, I still don’t understand how did you manage to put this amazing performance without much practice.</p>

<h2 id="socializing">Socializing</h2>

<p>It was pleasure to finally meet friends from internet. I’m also super happy I got a chance to share some of my ideas how I think node streams can be made <a href="https://gist.github.com/2656978" rel="nofollow" target="_blank" title="Clojure like reducers in JS">even better</a>, I’m encouraged and plan to put more effort into this. Also, glad I got some folks excited about my recent obsession <a href="http://jeditoolkit.com/lispyscript/" rel="nofollow" target="_blank" title="A javascript with lisp syntax &amp; macros">lispyscript</a>! Finally thanks for encouraging me to submit a talk for upcoming <a href="http://2012.jsconf.eu/" rel="nofollow" target="_blank">jsconf.eu</a>, I’m motivated and plan on doing it this weekend!</p>

<p>Speciall thanks to <strong>Mozilla</strong> for letting me be part of this amazing event!</p>              </p>
              <p class="meta"><a href="http://www.jeditoolkit.com/2012/07/05/nodeconf-2012.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=f8b56ef73099743fdfe6336dd7cd0d5c" title="Javalobby">Javalobby</a></h2>
              <p>
July 05, 2012 04:33 AM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=f8b56ef73099743fdfe6336dd7cd0d5c">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://feeds.dzone.com/~r/javalobby/frontpage/~3/ZlFf2cFM-LI/reading-clojure-stacktraces">Reading Clojure Stacktraces</a></h2>
              <p>
Clojure stacktraces are not incredibly user friendly. Once I got used to
 the status quo, I forgot how much noise lives within a stacktrace; 
however, every so often a Clojure beginner will remind the community 
that stacktraces are a bit convoluted. You can blame the JWM, lack of 
prioritization from the Clojure community, or someone else if you wish, 
but the reality is - I don't expect...<img height="1" src="http://feeds.feedburner.com/~r/javalobby/frontpage/~4/ZlFf2cFM-LI" width="1" />              </p>
              <p class="meta"><a href="http://feeds.dzone.com/~r/javalobby/frontpage/~3/ZlFf2cFM-LI/reading-clojure-stacktraces">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://immutant.org/" title="Immutant">Immutant</a></h2>
              <p>
July 05, 2012 12:00 AM                <br />
                <a href="http://immutant.org/">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://immutant.org/news/2012/07/05/announcing-0-2-0/">Immutant 0.2.0 Released</a></h2>
              <p>
<p>We're pleased as {{insert clever simile here}} to announce the second
official release of Immutant - version <strong><em>0.2.0</em></strong>. We consider this
release to be beta quality, and it lacks some of the features and API
stability that will end up in the 1.0.0 release.</p>

<h2>What is Immutant?</h2>

<p>Immutant is an application server for <a href="http://clojure.org">Clojure</a>.
It's an integrated platform built on <a href="http://www.jboss.org/as7">JBoss AS7</a>
that aims to reduce the <a href="http://en.wikipedia.org/wiki/Accidental_complexity">incidental complexity</a>
that comes along with real world applications.</p>

<h2>What's in this release?</h2>

<p>We've done quite a bit of work since the <a href="http://immutant.org/news/2012/03/14/announcing-0-1-0/">0.1.0 release</a>,
the most notable being:</p>

<ul>
<li>Improved support for <a href="http://immutant.org/documentation/0.2.0/interactive.html">interactive development</a>
of your app at runtime via embedded
<a href="https://github.com/technomancy/swank-clojure">Swank</a> and
<a href="https://github.com/clojure/tools.nrepl">nREPL</a> services.</li>
<li><a href="http://immutant.org/news/2012/06/26/transactions/">XA Transaction support</a> -
<a href="http://immutant.org/documentation/0.2.0/messaging.html">Messaging</a> and
<a href="http://immutant.org/documentation/0.2.0/caching.html">Caching</a>
resources are now automatically transactional and XA capable. And
you can easily create DataSources for your XA compliant SQL
databases so that you can then define transactions incorporating all
three types of resources in your apps.</li>
<li>The <a href="http://immutant.org/install/">lein-immutant</a> plugin now supports both Leiningen 1.x and 2.x.</li>
<li>We rewrote our Clojure runtime wrapper to remove all reflection from
any non-initialization call paths, greatly improving its performance.
This wrapper is what allows us to provide <a href="http://immutant.org/news/2012/05/18/runtime-isolation/">runtime isolation</a>.</li>
<li>Our messaging system now
<a href="http://immutant.org/documentation/0.2.0/messaging.html#messaging-request-response">implements</a>
the <a href="http://en.wikipedia.org/wiki/Request-response">request-response</a> pattern
for synchronous messaging.</li>
<li>Clojure 1.4.0 is now the default Clojure version. Applications can
still specify and use other versions.</li>
<li>A handful of bug fixes and other improvements - see the <a href="http://immutant.org/news.atom#issues">full issue list</a> for the details.</li>
</ul>


<h2>What's next?</h2>

<p>Now that we have 0.2.0 out the door, we'll be focusing on:</p>

<ul>
<li>Getting Immutant running smoothly on <a href="http://openshift.redhat.com">OpenShift</a></li>
<li>Making Immutant modules as usable as possible outside of the
container, e.g. remote message publishers and receivers.</li>
<li>Performance benchmarking</li>
<li>Durable topic subscribers</li>
</ul>


<h2>Get It</h2>

<p>The simplest way to install 0.2.0 is via our Leiningen plugin. See
our <a href="http://immutant.org/install/">install page</a> for more details. Once you have it installed,
take a look at our <a href="http://immutant.org/news/tags/getting-started/">Getting Started</a> tutorials.</p>

<h2>Get In Touch</h2>

<p>If you have any questions, issues, or other feedback about Immutant, you
can find us on <a href="http://immutant.org/community/">#immutant on freenode</a> or
<a href="http://immutant.org/community/mailing_lists">our mailing lists</a>.</p>

<h2>Issues resolved in 0.2.0</h2>

<ul id="issues">

<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-30">IMMUTANT-30</a>] -         Implement the request-response messaging pattern
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-48">IMMUTANT-48</a>] -         Add support for lein profiles
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-56">IMMUTANT-56</a>] -         Support decoding BytesMessages
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-57">IMMUTANT-57</a>] -         Assume messages that have no encoding are :text when decoding
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-58">IMMUTANT-58</a>] -         Handle deployment when pomegranate resolution fails
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-59">IMMUTANT-59</a>] -         The compile-path should be included in the deployment's resource path
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-60">IMMUTANT-60</a>] -         Update the bundled clojure to 1.4.0
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-61">IMMUTANT-61</a>] -         lein-immutant plugin is throwing an exception if it is used as a dev dependency
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-62">IMMUTANT-62</a>] -         Fix copy and pasta error in swank/nrepl docs
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-63">IMMUTANT-63</a>] -         Simple dynamic creation of XA datasources
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-64">IMMUTANT-64</a>] -         Support distributed XA transactions involving db's, msg destinations, and caches
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-65">IMMUTANT-65</a>] -         Port logging docs from TorqueBox
</li>

<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-66">IMMUTANT-66</a>] -         lein-immutant should checksum the downloaded zip
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-67">IMMUTANT-67</a>] -         Warning is thrown when trying to deploy Ring 1.1.0 powered application
</li>

<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-69">IMMUTANT-69</a>] -         Ability to connect to a remote messaging queue in immutant
</li>

<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-70">IMMUTANT-70</a>] -         Jump to def (M-.) doesn't work from slime connected to the swank inside AS7
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-71">IMMUTANT-71</a>] -         Expose :immutant/descriptor values to app
</li>

<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-72">IMMUTANT-72</a>] -         Running web/start in swank server results in 404
</li>

<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-73">IMMUTANT-73</a>] -         Support specifying a virtual host
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-75">IMMUTANT-75</a>] -         Upgrade to latest leiningen-core preview
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-76">IMMUTANT-76</a>] -         Do some reflection hunting
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-77">IMMUTANT-77</a>] -         Ensure Korma works with an immutant datasource
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-80">IMMUTANT-80</a>] -         Remove (web/src-dir) since (utilities/app-root) returns the app root
</li>
<li>[<a href="https://issues.jboss.org/browse/IMMUTANT-81">IMMUTANT-81</a>] -         Add section to deployment doc on running immutant
</li>
</ul>              </p>
              <p class="meta"><a href="http://immutant.org/news/2012/07/05/announcing-0-2-0/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=be83c0b5b0d92b259682cb8021e14d2a" title="InfoQ Clojure-related materials">Clojure at InfoQ</a></h2>
              <p>
July 04, 2012 03:10 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=be83c0b5b0d92b259682cb8021e14d2a">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://www.infoq.com/presentations/Building-Tools-to-Help-Kids-Win-with-ADHD">Presentation:  Building Tools to Help Kids Win with ADHD</a></h2>
              <p>
Alan Whitaker presents a Clojure application that is used in a pilot program meant to help children with ADHD to improve their condition. <i>By Alan Whitaker</i>              </p>
              <p class="meta"><a href="http://www.infoq.com/presentations/Building-Tools-to-Help-Kids-Win-with-ADHD">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://otfrom.wordpress.com" title="Wifi and Coffee » clojure">Bruce Durling</a></h2>
              <p>
July 04, 2012 02:39 PM                <br />
                <a href="http://otfrom.wordpress.com">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://otfrom.wordpress.com/2012/07/04/how-to-run-a-london-clojure-dojo-in-20ish-easy-steps/">How to run a London Clojure Dojo in 20ish easy steps</a></h2>
              <p>
<p>Running dojos is a lot of fun. It is also really easy. No one has to prepare a talk or a subject for the night. The most important thing is that everyone has fun. After that if people learn some clojure, then that is a great bonus. But the fun has to come first to keep people coming back.</p>
<p>Here is a simple(?) step by step guide. If you are unsure about how to be an MC, then just watch some bits of The Muppet Show and do what Kermit does.</p>
<p>All of the below are suggestions and guidelines, not rules. Do what works. This seems to be working reasonably well for us. YMMV.</p>
<ol>
<li><span style="line-height: 16px;">Find your hosts, say hello. Make sure everyone is happy. Make sure newcomers feel welcome.</span></li>
<li><span style="line-height: 16px;">Make sure the food is arriving/has arrived. </span></li>
<li><span style="line-height: 16px;">Make sure there is enough to drink (beer, wine, soft drinks).</span></li>
<li><span style="line-height: 16px;">Get the projector for show and tell.</span></li>
<li><span style="line-height: 16px;">Set up a whiteboard. Write “Dojo Ideas” at the top. Put “Roman Numeral Calculator” as the first idea to avoid the tyranny of the blank whiteboard.</span></li>
<li><span style="line-height: 16px;">Greet fellow clojurians, eat food, drink whatever until 7PM.</span></li>
<li><span style="line-height: 16px;">Think of a silly question for the kick off.</span></li>
<li><span style="line-height: 16px;">At 7PM round everyone up for the kick off.</span></li>
<li><span style="line-height: 16px;">Thank everyone for coming, the sponsors for hosting and your fellow organisers.</span></li>
<li><span style="line-height: 16px;">Get everyone to introduce themselves, say how long they’ve been doing clojure for and answer a silly question.</span></li>
<li><span style="line-height: 16px;">Tell everyone that the dojo is a safe place to be a new to clojure and to try new things and learn things. Let experienced people know it is a great place to be surprised by things they didn’t know and to think hard about what they’ve learned and share it with everyone.</span></li>
<li><span style="line-height: 16px;">Vote on the task for the dojo. In the 1st round people can vote for more than one idea. Do run offs if necessary. In run off rounds you can ask people to only vote for one idea. Votes are approximate, unless it is important that they aren’t. Ties in voting are OK. You can do more than one thing. Teams are sovereign. If a team wants to work and present on something other than what was voted on then that is fine.</span></li>
<li><span style="line-height: 16px;">Make sure there are enough clojure environments/experienced team members to go around. Get them up front to act as the 1st member of each team if needed.</span></li>
<li><span style="line-height: 16px;">Divide into teams of 4-6 people. Teams of 4 are better, but 3 is too small.</span></li>
<li><span style="line-height: 16px;">Get the teams to spread out and start.</span></li>
<li><span style="line-height: 16px;">Do the dojo! This should be enough time for everyone to have 10 minutes at the keyboard and 20-30 mins of discussion. Usually 1 hour 20 minutes.</span></li>
<li><span style="line-height: 16px;">Tell people when each 10 minute period is up and remind teams to rotate. Everyone should write at least 1 working line of clojure code that evening, even if it is just a (println “foo”).</span></li>
<li><span style="line-height: 16px;">Make sure every team understands the problem, is able to get on to wifi, isn’t struggling too much.</span></li>
<li><span style="line-height: 16px;">Swap more or less experienced people from one team to another if a particular team is struggling too much. Ask them if they are still having fun first though. If they are having fun, then leave them alone.</span></li>
<li><span style="line-height: 16px;">After 80 minutes or so, round everyone up for show and tell at the projector.</span></li>
<li><span style="line-height: 16px;">Do show and tell. Thank everyone. Clean up. Go to the pub!</span></li>
</ol>
<br />  <a href="http://feeds.wordpress.com/1.0/gocomments/otfrom.wordpress.com/103/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/otfrom.wordpress.com/103/" /></a> <a href="http://feeds.wordpress.com/1.0/godelicious/otfrom.wordpress.com/103/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/delicious/otfrom.wordpress.com/103/" /></a> <a href="http://feeds.wordpress.com/1.0/gofacebook/otfrom.wordpress.com/103/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/facebook/otfrom.wordpress.com/103/" /></a> <a href="http://feeds.wordpress.com/1.0/gotwitter/otfrom.wordpress.com/103/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/twitter/otfrom.wordpress.com/103/" /></a> <a href="http://feeds.wordpress.com/1.0/gostumble/otfrom.wordpress.com/103/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/stumble/otfrom.wordpress.com/103/" /></a> <a href="http://feeds.wordpress.com/1.0/godigg/otfrom.wordpress.com/103/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/digg/otfrom.wordpress.com/103/" /></a> <a href="http://feeds.wordpress.com/1.0/goreddit/otfrom.wordpress.com/103/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/reddit/otfrom.wordpress.com/103/" /></a> <img alt="" border="0" height="1" src="http://stats.wordpress.com/b.gif?host=otfrom.wordpress.com&amp;blog=6096936&amp;post=103&amp;subd=otfrom&amp;ref=&amp;feed=1" width="1" />              </p>
              <p class="meta"><a href="http://otfrom.wordpress.com/2012/07/04/how-to-run-a-london-clojure-dojo-in-20ish-easy-steps/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a0161f6185ca965613735b6b06f2e3ef" title="Mark Watson">Mark Watson</a></h2>
              <p>
July 04, 2012 02:29 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a0161f6185ca965613735b6b06f2e3ef">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://blog.markwatson.com/2012/07/experimenting-with-dojo-mobile.html">Experimenting with Dojo Mobile</a></h2>
              <p>
<p>In my work I specialize in Natural Language Processing (NLP), text mining, and general AI development. That said I find myself writing a lot of web apps and what I really want is an easy to use web client stack with rich controls and that facilitates writing one web app that looks and works OK in web browsers, Android phones and tablets, iPhones, and iPads.</p> <p>Five years ago I wrote a very simple web app <a href="http://cookingspace.com" rel="nofollow" target="_blank">cookingspace.com</a> that let me look up the nutrients (using the USDA nutrition database) for recipes we frequently make. I have just spent a few hours rewriting the front end using Dojo Mobile, removing a lot of features that I don't need anymore that is hosted at <a href="http://mobile.cookingspace.com" rel="nofollow" target="_blank">mobile.cookingspace.com</a>. The new app lets me quickly check nutrients and also on portable devices I can use it while grocery shopping to make sure I get the ingredients I need for making dinner. Both apps are deployed at Heroku (thanks Heroku!).</p> <p><a href="http://dojotoolkit.org/" rel="nofollow" target="_blank">Dojo</a> is really a nice web client toolkit. I suggest you take a look if you haven't tried it. I have used Dojo for years with server side code written in Common Lisp, Ruby, and more recently Clojure.</p><div class="blogger-post-footer"><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/7100397-6392032746620939930?l=blog.markwatson.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://blog.markwatson.com/2012/07/experimenting-with-dojo-mobile.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://martinsprogrammingblog.blogspot.com/search/label/clojure" title="Martin's Computer Programming Blog">Martin Trojer</a></h2>
              <p>
July 04, 2012 09:30 AM                <br />
                <a href="http://martinsprogrammingblog.blogspot.com/search/label/clojure">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://martinsprogrammingblog.blogspot.com/2012/07/some-thoughts-on-logging.html">Some thoughts on logging</a></h2>
              <p>
Have you ever tried to log from multi threaded program? Have you tried to make sense of the log output which multiple subsystems were logging to? Have you tried to do average latency calculations based on that log file?<br /><br />If you reading this blog, I am guessing you answered yes to a couple of the questions above.<br /><br />There are multiple problems here; multiple producers (race conditions), out-of-order logs, conflated subsystem in the same logs etc. You gotta put a lot of effort into you log post-processor to make any sense at all of the data, decorating it with various metadata to make it at all possible.<br /><br />In this post I point out a few ways you can use Clojure (both the language and it's general ethos) to overcome these problems. The solutions here are primarily tailored <span style="background-color: white;">to "pipeline systems" where you want to find time consuming bottle-necks and produce latency reports etc. For simplicity, this is in-process logging, where all the parts (threads) can share a log resource and tick timer etc.</span><br /><br />TL;DR <a href="https://gist.github.com/3041849">the complete code snippet</a><br /><h2>               <span style="background-color: white;">Agents</span></h2>First off, the race conditions; if the log is simply a file, or a in-memory data structure, you have to somehow serialise the "emit" calls. Conventional wisdom would have you put the emit call in a critical section, but this is a) ugly b) can introduce deadlocks c) can effect the system under stress. We want to post a log entry using a lock free, asynchronous mechanism, that's why we have agents in Clojure;<br />Please note that when emitting with timestamps, we take a snapshot of the time instantly (in the context of the calling thread), not in the agent-thread context later on.<br /><h2>               Tree Logging</h2>How do we apply structure to the log data? One idea is to put the log data into a tree instead of a flat vector (or file).  Then log entries from different subsystems can be separated (for easier post-processing), and we can express dependancy between log events for latency calculations.<br /><br />Lets say each log entry is associated with one id and multiple correlation ids. The id is typically an UUID which you assign to a request, operation, instruction that "travels" through multiple parts of your system. The correlation ids can be used a splitting your logs into categories of arbitrary depth, yield possibly more meaningful reports etc.<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-3WDH-BTGsjc/T_MtoMp4VoI/AAAAAAAAAjw/xfBeWER7tdw/s1600/tree-log.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="195" src="http://2.bp.blogspot.com/-3WDH-BTGsjc/T_MtoMp4VoI/AAAAAAAAAjw/xfBeWER7tdw/s400/tree-log.png" width="400" /></a></div><br />Here's how such a tree structure can be built using Clojure's maps and the mighty <a href="http://clojuredocs.org/clojure_core/clojure.core/assoc-in">assoc-in</a> function;The logger handles the timestamping for you, it also gives you functionality such as extracting chronological logs for ids, and timing/latency reports.  <br />Ok, this looks like it might perhaps work, but there are some drawbacks; we must keep the tree in memory for processing, which can be hard for huge logs, also serialisation to disk is trickier (but no really if you have a <a href="http://clojure.org/reader">reader</a>). We're also forcing a structure upon the log data, that feels awkward. Supplying the id, and corr-ids is not as clean as it could be.<br /><h2>          Metadata</h2>Let's get back to a simple flat log and more metadata in the events. We use the metadata to express the categories and other dependancies between the events that we used the tree for in the previous example. In a sense, we are still using a tree (or maybe even graph) data structure, but the branching is described with metadata in sequence of events. Using the emit function describes under the "Agents" paragraph above, here and example of some "connected" log events;<br />The helper functions also becomes much cleaner this way;<br />Please note that these functions take a (de-referenced) log rather than using @log directly. This helps testing, but is also very important for more complicated (looping) functions which should work on a stable snapshot of the log events. <br /><h2>        Conclusion</h2>The flat log file, with simple events described as Clojure maps worked out really well, and it's certainly more idiomatic. The log is easier to serialise, we only need parts of it in memory for meaningful analysis, we can treat it as a continuos stream. The analysis functions that we write can leverage the power of Clojure's library directly and compose beautifully. Also, we are not forcing any structure (or schema) on the log events (more than any analysis functions expect) which make it very flexible and future proof. The only price we are paying is additional (redundant) metadata to that can be more cheaply expressed in a tree data structure.<br /><br />Here's a complete <a href="https://gist.github.com/3041849">listing of a event logger</a>, using metadata, with statistical reporting.<br /><h2>      More reading</h2><ul><li><span style="background-color: white;">Mark McGranaghan <a href="http://blip.tv/clojure/mark-mcgranaghan-logs-as-data-5953857">clojure/conj 2011 talk</a> "Logs as data"</span></li><li><a href="https://github.com/heroku/pulse/">Pulse</a> on Github</li><li><a href="https://github.com/ptaoussanis/timbre">Timbre</a> on Github</li><li><a href="http://richhickey.github.com/clojure-contrib/logging-api.html">Clojure-contrib logging</a></li></ul><div class="blogger-post-footer"><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/7742899713397840555-2073644455422317767?l=martinsprogrammingblog.blogspot.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://martinsprogrammingblog.blogspot.com/2012/07/some-thoughts-on-logging.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2b4df27a8a423f38ec23838506223255" title="Pierre-Yves Ritschard">Pierre-Yves Ritschard</a></h2>
              <p>
July 04, 2012 12:00 AM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2b4df27a8a423f38ec23838506223255">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://spootnik.org/entries/2012/07/04_another-year-of-clojure.html">Another year of clojure</a></h2>
              <p>
<div class="outline-3" id="outline-container-1">
<h3 id="sec-1">Clojure at paper.li</h3>
<div class="outline-text-3" id="text-1">


<p>
I've been involved with clojure almost exclusively for a year as smallriver's lead architect,
working on the paper.li product and wanted to share my experience of clojure in the real world.
</p>
<p>
I had a previous experience with clojure where I put it to work where ruby on rails wasn't a natural fit, and although 
smallrivers is a close neighbor of typesafe in Switzerland, my previous experience with the language made it prevail on
scala.
</p>
</div>

</div>

<div class="outline-3" id="outline-container-2">
<h3 id="sec-2">Why clojure ?</h3>
<div class="outline-text-3" id="text-2">


<p>
While working on the backend architecture at a previous company I decided to evaluate three languages
which met the needs I was faced with:
</p>
<ul>
<li>erlang
</li>
<li>scala
</li>
<li>clojure
</li>
</ul>


<p>
I decided to tackle the same simple task in all three languages and see how each would fare and how I felt about them.
The company's language at that time was Ruby and JS, and coming from a C background, I wanted a language which provided
simplicity, good data structure support and concurrency features, while allowing us to still code quickly.
</p>
<p>
While naturally drawn to Erlang, I quickly had to set it apart because the stack that was starting to
emerge at the time had JVM based parts and would benefit greatly from a language targetting the JVM. I was a bit bummed
because some tools in the erlang world were very exciting and the lightweight actors were interesting for a part of our stack.
</p>

<p>
Scala made a very strong first impression on me, but in practice I was taken aback by some aspects of it: the lack of
coherency of open source projects found on the net in terms of style, which made it hard to see which best practices and guidelines
would have to be taught to the team, some of the code I found was almost reminiscent of perl a few year back, in the potential
it had to become unmaintainable some time later. The standard build
tool - SBT - also made a very weak impression. It seemed to be a clear step back from maven which given the fact that maven isn't a first class citizen
in the scala world seemed worrying.
</p>
<p>
Clojure took the cake, in part because it clicked with the lisper in me, in part because the common idioms that emerged from the code
I read bore a lot of similarity with the way we approached ruby. The dynamic typing promised succinct code and the notation for vectors, maps
and sets hugely improved the readability of lisp - look at how hashes work in emacs lisp if you want to know what i mean. I was very excited about 
<code>dosync</code> and a bit worried by the lack of leightweight erlang style actors even though I could see how <code>agent</code>'s could help in that regard. As I'll
point out later on, we ended up not using these features at all anyhow.
</p>
</div>

</div>

<div class="outline-3" id="outline-container-3">
<h3 id="sec-3">The task at hand</h3>
<div class="outline-text-3" id="text-3">


<p>
When I joined Smallrivers to work on <a href="http://pipes.yahoo.com/pipes/pipe.run?_id=2b4df27a8a423f38ec23838506223255&amp;_render=rss#paper.li" rel="nofollow">paper.li</a>, it became natural to choose clojure. The team was small and I felt comfortable
with it. There was a huge amount of work which needed to be started quickly so a "full-stack" language was necessary to avoid spreading across too many languages and
technologies, and another investigation in how the other languages had evolved in the meantime was not possible.
The main challenges to tackle were:
</p>
<ul>
<li>Being able to aggregate more content
</li>
<li>Improve the quality of the processing done on content
</li>
<li>Scaling the storage cluster accordingly
</li>
<li>Automate the infrastructure
</li>
</ul>


</div>

</div>

<div class="outline-3" id="outline-container-4">
<h3 id="sec-4">The "hiring" problem</h3>
<div class="outline-text-3" id="text-4">


<p>
One thing that always pops up in discussions about somewhat marginal languages is the hiring aspect, and the fear
that you won't be able to find people if you "lock" yourself in a language decision that strays from the usual suspects.
My experience is that when you tackle big problems, that go beyond simple execution but require actual strong engineers, 
hiring <b>will</b> be a problem, there's just no way around it. Choosing people that fit your development culture and see themselves fit
to tackle big problems is a long process, integrating them is also time consuming. In that picture, the chosen language 
isn't a huge deciding factor.
</p>
<p>
I see marginal languages as a problem in the following organisations:
</p>
<ul>
<li>Companies tackling smaller problems, or problems already solved. These are right in choosing standard languages, if I built a team to build an e-commerce site I wouldn't go to clojure.
</li>
<li>Larger companies which want their employees to jump from project to project, which makes sense from a managerial standpoint.
</li>
</ul>



</div>

</div>

<div class="outline-3" id="outline-container-5">
<h3 id="sec-5">What we built</h3>
<div class="outline-text-3" id="text-5">


<p>
The bulk of what was done revolves around these functional items:
</p>
<ul>
<li>A platform automation tool, built on top of <a href="http://palletops.com" rel="nofollow" target="_blank">pallet</a>.
</li>
<li>Clojure facades for the tools relied upon (elastic search, cassandra, redis, kafka).
</li>
<li>An ORM-type layer on top of cassandra
</li>
<li>Our backend pipelines
</li>
<li>A REST API
</li>
</ul>


<p>
I won't go in too much detail on our in-house code, but rather reflect on how things went over.
</p>
</div>

</div>

<div class="outline-3" id="outline-container-6">
<h3 id="sec-6">Coding style and programming "culture"</h3>
<div class="outline-text-3" id="text-6">


<p>
One of the advantages of lisp, is that it doesn't have much syntax to go around, so our rules stay simple:
</p>
<ul>
<li>the standard 2 space indent
</li>
<li>we try to stick to 80 columns, because i'm that old
</li>
<li>we always use <code>require</code> except for: <b>clojure.tools.logging</b> and <b>pallet.thread-expr</b> which are <code>use</code>'d
</li>
<li>we avoid macros whenever possible
</li>
<li>we use dynamically rebindable symbols
</li>
</ul>


<p>
Of course we embraced non mutable state everywhere possible, which in our case is almost everywhere. Whenever we need to checkpoint state, it usually goes to 
our storage layer, not to in memory variables.
</p>
<p>
When compared to languages such as C, I was amazed at how little rules are needed to enforce a consistent code look across projects, with very little time needed
to dive into a part written by someone else.
</p>
</div>

</div>

<div class="outline-3" id="outline-container-7">
<h3 id="sec-7">The tools</h3>
<div class="outline-text-3" id="text-7">



</div>

<div class="outline-4" id="outline-container-7-1">
<h4 id="sec-7-1">Local environment</h4>
<div class="outline-text-4" id="text-7-1">


<p>
We didn't settle on a unique tool-suite at the office, when picking up clojure I made the move from vim to emacs because the integration is better and
I fell in love with <a href="http://emacswiki.org/emacs/ParEdit" rel="nofollow" target="_blank">paredit</a>. Spread amongst the rest of team, textmate, eclipse and intellij were used.
</p>
<p>
For building projects, leiningen was an obvious choice. I think leiningen is a great poster child for the greatest in clojure. A small and intelligent facade on top
of maven, hiding all the annoying part of maven while keeping the nice distribution part.
</p>
<p>
For continuous integration, we wrote a small bridge between leiningen and zi <a href="https://github.com/smallrivers/lein-zi" rel="nofollow" target="_blank">lein-zi</a> which outputs pom.xml for maven, which are then used to build the clojure projects. We still
hope to find some time to write a leiningen plugin for jenkins.
</p>
</div>

</div>

<div class="outline-4" id="outline-container-7-2">
<h4 id="sec-7-2">Asynchronous programming</h4>
<div class="outline-text-4" id="text-7-2">


<p> 
Since a good part of what paper.li does relies on aggregation, async programming is very important.
In the pure clojure world, the only real choice for async programming is <a href="https://github.com/ztellman/lamina" rel="nofollow" target="_blank">lamina</a>
and <a href="https://github.com/ztellman/aleph" rel="nofollow" target="_blank">aleph</a>. To be honest, aleph turned out to be quite the challenge, a combination
of the amount of outbound connections that our work requires and the fact that aleph seems to initially target servers more
than clients.
</p>
<p>
Fortunately Zach Tellman put a lot of work into the library throughout last year and recent releases are more reliable.
One very nice side effect of using a lisp to work with evented code is how readable code becomes, by retaining a sync like look.
</p>
<p>
For some parts we still would directly go to a smaller netty facade if we were to start over, but that's a direct consequence of how
much we learned along the way.
</p>
</div>

</div>

<div class="outline-4" id="outline-container-7-3">
<h4 id="sec-7-3">Libraries not frameworks</h4>
<div class="outline-text-4" id="text-7-3">


<p>
A common mantra in the clojure development community is that to ease integration the focus should be on libraries, not frameworks. This shows in many widespread projects such as compojure, pallet,
and a host of common clojure tools. This proved very useful to us as clients of these libraries, allowing easy composition. I think pallet stands out most in that regard. Where most configuration
management solutions offer a complete framework, pallet is just a library offering machine provisioning, configuration and command and control, which allowed us to integrate it with our app and build our
abstractions on top of it.
</p>
<p>
We tried to stick to that mantra in all of our work, building many small composable libraries, we made some errors at the beginning, by underutilizing some of clojure features, such as protocols but
we now have good dynamics for writing these libraries, by writing the core of them with as little dependencies as possible, describing the behavior through protocols, and then writing add-ons which
bring in additional dependencies and implement the protocol.
</p>
</div>

</div>

<div class="outline-4" id="outline-container-7-4">
<h4 id="sec-7-4">Macros and DSLs</h4>
<div class="outline-text-4" id="text-7-4">


<p>
Another common mantra is to avoid overusing macros. It can't be overstated how easy they make things though, our entity description library (which we should really prep up for public release, we've been talking about it for too long now)
allows statements such as these (simplified):
</p>



<pre class="src src-clojure">(<span style="color: #f0dfaf; font-weight: bold;">defentity</span> <span style="color: #8cd0d3;">:contributors</span>
  (column <span style="color: #bfebbf;">:identifier</span> (primary-key))
  (column <span style="color: #bfebbf;">:type</span> (required))
  (column <span style="color: #bfebbf;">:name</span>)
  (column <span style="color: #bfebbf;">:screen_name</span> (<span style="color: #8cd0d3;">index</span>))
  (column <span style="color: #bfebbf;">:description</span>)
  (column <span style="color: #bfebbf;">:detail</span> (<span style="color: #dfaf8f;">type</span> <span style="color: #bfebbf;">:compound</span>))

  (column <span style="color: #bfebbf;">:user_url</span>)
  (column <span style="color: #bfebbf;">:avatar_url</span>)
  (column <span style="color: #bfebbf;">:statuses_count</span> (<span style="color: #dfaf8f;">type</span> <span style="color: #bfebbf;">:number</span>))

  (has-many <span style="color: #bfebbf;">:articles</span>)
  (has-many <span style="color: #bfebbf;">:editions</span> (referenced false) (ttl 172800))
  (has-many <span style="color: #bfebbf;">:posts</span> (<span style="color: #dfaf8f;">key</span> (timestamp <span style="color: #bfebbf;">:published_at</span>)) (referenced false)))
</pre>


<p>
The power of DSLs in clojure cannot be understated, with a few macros you can easily build full languages, allowing easy extending of the functionality.
Case in point, extracting text from articles, like most people we rely on a generic <b>readability</b> type library, but we also need to handle some sites that
need special handling. By using a small DSL you can easily push rules that look like (simplified):
</p>



<pre class="src src-clojure">(<span style="color: #f0dfaf; font-weight: bold;">defsiterule</span> <span style="color: #cc9393;">"some.obscure.site"</span>
   [dom]
   (<span style="color: #8cd0d3;">-&gt;</span> dom
       (pull <span style="color: #cc9393;">"#stupid-article-id"</span>)))
</pre>


<p>
The great part is that you limit the knowledge to be transfered over to people writing the rules, you avoid intrusive changes to the core of your app and
these can safely be pulled from an external location.
</p>
<p>
At the end of the day, it seems to me as though the part of the clojure community that came from CL had awful memories of macros making code unreadable, but
when sticking to macros with a common look and feel, i.e: <code>with-&lt;resource&gt;</code>, <code>def&lt;resource&gt;</code> type macros, there are huge succintness take aways without
hindering readability or maintenance of the code.
</p>
</div>

</div>

<div class="outline-4" id="outline-container-7-5">
<h4 id="sec-7-5">Testing</h4>
<div class="outline-text-4" id="text-7-5">


<p>
Every respectable codebase is going to need at least a few test. I'm of the pragmatist church, and straight out do not believe in TDD, neither in crazy coverage ratios.
Of course we still have a more that 95% unit test coverage and the decoupled approach preached by clojure's original developer, rich hickey<sup><a class="footref" href="http://pipes.yahoo.com/pipes/pipe.run?_id=2b4df27a8a423f38ec23838506223255&amp;_render=rss#fn.1" name="fnr.1" rel="nofollow">1</a></sup> allows for very
isolated testing. For cases that require mocking, midge provides a nice framework and using it has created very fruitful throughout our code.
</p>
</div>

</div>

<div class="outline-4" id="outline-container-7-6">
<h4 id="sec-7-6">Concurrency, Immutable State and Data Handling</h4>
<div class="outline-text-4" id="text-7-6">


<p>
Funnily, we ended up almost never using any concurrency feature, not a single <code>dosync</code> made it in our codebase, few <code>atom</code>'s and a single <code>agent</code> (in <a href="https://github.com/pyr/clj-statsd" rel="nofollow" target="_blank">https://github.com/pyr/clj-statsd</a> to avoid recreating a Socket object for each datagram sent).
We also banned <code>future</code> usage to more closely control our thread pools. Our usage of <code>atom</code>'s is almost exclusively bound to things that are write once / read many, in some cases we'd be better off with rebindable dynamic symbols.
</p>
<p>
We rely on immutable state heavily though, and by heavily I actually mean exclusively. This never was a problem across the many lines of code we wrote, and helped us keep a sane and decoupled code base.
</p>
<p>
With facades allowing to represent database fields, queue entries, and almost anything as standard clojure data structures and with powerful functions to work on them, complex handling of a large amount of data is very easily expressed. For this we fell in love
with several tools which made things even easier:
</p>
<ul>
<li>the threading operators <code>-&gt;</code> and <code>-&gt;&gt;</code>
</li>
<li>the pallet thread-expr library which brings branching in threaded operations: <code>for-&gt;</code>, <code>when-&gt;</code>, and so on
</li>
<li><code>assoc-in</code>, <code>update-in</code>, <code>seq-utils/index-by</code> and all these functions which allow easy transformation of data structs and retain a procedural look
</li>
</ul>


<p>
I cannot stress how helpful this has been for us in doing the important part of our code right and in a simple manner. This is clearly the best aspect of clojure as far as I'm concerned.
</p>
<p>
Moreover, building on top of Java and with the current focus on "Big Data" everywhere, the interaction with large stores and tools to help building batch jobs are simply amazing, especially cascalog.
</p>

</div>

</div>

<div class="outline-4" id="outline-container-7-7">
<h4 id="sec-7-7">The case of Clojurescript</h4>
<div class="outline-text-4" id="text-7-7">


<p>
While very exciting we did not have a use for clojurescript, given the size of the existing JS codebase, and the willingness of the frontend developers
to stick to a known.
</p>
<p>
The simple existence of the project amazes me, especially with the promise of more runtimes, there are various implementations on top of lua, python and gambit (a scheme that compiles to C).
With projects like cascalog, pallet, lein, compojure, noir and clojurescript, the ecosystem addresses all parts of almost any stack that you will be tempted to build and we didn't encounter cases
of feeling cornered by the use of clojure - admiteddly, most of the time, a Java library came to the rescue.
</p>
</div>

</div>

<div class="outline-4" id="outline-container-7-8">
<h4 id="sec-7-8">The community</h4>
<div class="outline-text-4" id="text-7-8">


<p>
The community is very active, and has not reach critical mass yet, which makes its mailing-list and irc room still usable. There are many influent public figures, some who bring insight, some who bring beautiful code. Most are very open and available to discussion which shaped our approach
of the language and our way of coding along the way.
</p>
</div>
</div>

</div>

<div class="outline-3" id="outline-container-8">
<h3 id="sec-8">Closing words</h3>
<div class="outline-text-3" id="text-8">


<p>
It's been an exciting year and we're now a full fledged 80% clojure shop. I'm very happy with the result, more so with the journey. I'm sure we could
have achieved with other languages as well. As transpires throughout the article, the whole team feels that should we start over, we would do it in clojure again.
</p>
<p>
It helped us go fast, adapt fast and didn't hinder us in any way. The language seems to have a bright future ahead of it which is reassuring.
I would encourage people coming from python and ruby to consider it as a transition language or as their JVM targetting language, since many habits are still valid in clojure and
since it helps slightly change the way we look at problems which can then be reapplied in more "traditional" languages.
</p>

<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">
<p class="footnote"><sup><a class="footnum" href="http://pipes.yahoo.com/pipes/pipe.run?_id=2b4df27a8a423f38ec23838506223255&amp;_render=rss#fnr.1" name="fn.1" rel="nofollow">1</a></sup> Rich hickey's talk simple made easy and his coining of the term "complecting" illustrates that <a href="http://www.infoq.com/presentations/Simple-Made-Easy" rel="nofollow" target="_blank">http://www.infoq.com/presentations/Simple-Made-Easy</a>
</p>

</div>
</div>

</div>
</div>              </p>
              <p class="meta"><a href="http://spootnik.org/entries/2012/07/04_another-year-of-clojure.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://orthogonal.me" title="The Occasional Blogger » Clojure">Glen Stampoultzis</a></h2>
              <p>
July 03, 2012 11:15 PM                <br />
                <a href="http://orthogonal.me">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://orthogonal.me/2012/07/04/how-to-get-midje-working-with-appengine-magic/">How To Get Midje Working With appengine-magic</a></h2>
              <p>
<p>Recently I’ve begun using a testing framework in Clojure called Midje. There are several other Clojure testing libraries including one that comes with Clojure. Midje does have an interesting syntax however and good support for mocking – although it doesn’t use that term. One particularly nice thing is it’s integration with Emacs. With quick keyboard shortcut I can easily run the current Midje test and see the results come up as comments right next to the test. Those comments can then be easily cleared once I’m done. This is all covered in a good amount of detail on the website. The video in particular is particularly good at showing the sorts of things that Midje is good at.</p>
<p>One problem I ran into immediately is how to integrate it with appengine-magic. The appengine-magic library comes with testing infrastucture to allow you to test your App Engine projects outside a container. By default AEM only includes support for clojure test however with a bit of work it can be made to work with Midje.</p>
<p>I did manage to find a reference to a code snippet on the Midje mailing list but couldn’t get it to work as written. With some small modifications however I managed to get it working.</p>
<p>Firstly we need to define a macro that wraps the setup and teardown work required to get Midje to play nicely with the App Engine testing infrastructure.</p>
<pre class="example">(defmacro midje-magic [?form &amp; helpers]
  (let [helper-sym (gensym "helper")]
    `(let [environment# (ApiProxy/getCurrentEnvironment)
           delegate# (ApiProxy/getDelegate)
           ~helper-sym (LocalServiceTestHelper. (into-array LocalServiceTestConfig (local-services-helper)))
           ~@(apply concat
                    (for [helper helpers]
                      (list helper-sym (list helper helper-sym))))]
       (.setUp ~helper-sym)
       ~?form
       (.tearDown ~helper-sym)
       (ApiProxy/setEnvironmentForCurrentThread environment#)
       (ApiProxy/setDelegate delegate#))))</pre>
<p>The ?form reference is used to by the background references to insert the test code as it executes. The helpers are optional and allow you to specify appengine-magic test helpers that you wish to be active. With this macro defined we can simply use Midjes normal background declarations to initialize the appengine-magic testing infrastructure. For example:</p>
<pre class="example">(background
  (around :facts
          (midje-magic ?form)))</pre>
<p>If you wanted to use some helpers you could do something like this:</p>
<pre class="example">(background
  (around :facts
          (midje-magic ?form
                       (ae-testing/login "someone@mailhost.com"))))</pre>
<p>If you want to get a flavour of what Midje looks like Brian has put together some excellent videos. Links can be found on the Midje wiki:</p>
<p><a href="https://github.com/marick/Midje/wiki">https://github.com/marick/Midje/wiki</a></p>
<p>If Midje isn’t your thing there are plenty of altnerative testing frameworks to use. You can find a reasonably up-to-date list at the Clojure Libaries website under the testing category <sup><a class="footref" href="http://orthogonal.me/category/clojure/feed/#fn.1" name="fnr.1"></a>1</sup>.</p>
<div id="footnotes">
<h2 class="footnotes">Footnotes:</h2>
<div id="text-footnotes">
<p class="footnote"><sup><a class="footnum" href="http://orthogonal.me/category/clojure/feed/#fnr.1" name="fn.1"></a>1</sup> <a href="http://clojure-libraries.appspot.com/cat/Testing">http://clojure-libraries.appspot.com/cat/Testing</a></p>
</div>
</div>
<br />  <a href="http://feeds.wordpress.com/1.0/gocomments/glenstampoultzis.wordpress.com/479/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/glenstampoultzis.wordpress.com/479/" /></a> <a href="http://feeds.wordpress.com/1.0/godelicious/glenstampoultzis.wordpress.com/479/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/delicious/glenstampoultzis.wordpress.com/479/" /></a> <a href="http://feeds.wordpress.com/1.0/gofacebook/glenstampoultzis.wordpress.com/479/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/facebook/glenstampoultzis.wordpress.com/479/" /></a> <a href="http://feeds.wordpress.com/1.0/gotwitter/glenstampoultzis.wordpress.com/479/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/twitter/glenstampoultzis.wordpress.com/479/" /></a> <a href="http://feeds.wordpress.com/1.0/gostumble/glenstampoultzis.wordpress.com/479/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/stumble/glenstampoultzis.wordpress.com/479/" /></a> <a href="http://feeds.wordpress.com/1.0/godigg/glenstampoultzis.wordpress.com/479/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/digg/glenstampoultzis.wordpress.com/479/" /></a> <a href="http://feeds.wordpress.com/1.0/goreddit/glenstampoultzis.wordpress.com/479/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/reddit/glenstampoultzis.wordpress.com/479/" /></a> <img alt="" border="0" height="1" src="http://stats.wordpress.com/b.gif?host=orthogonal.me&amp;blog=27858144&amp;post=479&amp;subd=glenstampoultzis&amp;ref=&amp;feed=1" width="1" />              </p>
              <p class="meta"><a href="http://orthogonal.me/2012/07/04/how-to-get-midje-working-with-appengine-magic/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a2d30487f61a012c6c3b699941f3197e" title="Marius Kjeldahl">Marius Kjeldahl</a></h2>
              <p>
July 03, 2012 09:06 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a2d30487f61a012c6c3b699941f3197e">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://kjeldahl.net/d7/node/32">Android native development without Java</a></h2>
              <p>
<div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>Lately I've been revisiting options for writing native Android applications. For the last six months I've been working on some cross platform projects, kind of hoping that the Android browsers would improve to a level where writing and deploying a javascript-based application (or compile-to-javascript if you're using Coffeescript like I am) for the Android platform would be a real option. Sadly, that still seems a long way off. Android's native language is Java running on the Dalvik virtual machine. When targeting Android you will write code in a language that compiles into JVM byte code (the assembly language for the Java Virtual Machine - JVM). The Android SDK takes the JVM byte codes (typically .class files) and translates them into their Dalvik equivalents, and does additional transformation of certain kinds of resources. All of this is stuffed into an .apk file which is how applications are distributed to Android devices.</p>
<p>So to target Android devices, you need to either write your applications in Java, or a language that compiles into Java source code or JVM byte code. Java is the first language of Android. Like most programming languages, Java has its good and bad sides. Today there are many languages targeting the JVM, like Scala, Cloure, Kawa, JRuby and many more. And fortunately some of these even support Android. When targeting Android - which typically runs on mobile phones - package size and execution speed (and battery usage) quickly becomes an issue. Some of the languages and their toolkits have improved to a level where deploying to Android devices is a real option.</p>
<p>Another thing to be aware of; When talking about programming languages below, I am mostly focusing on syntax, not the standard libraries that typically come with the language. A small language like Clojure typically has a payload of just below 2MB if you need "the full" language and libraries. The reality today is that if you want to target Android devices, you need to use the built in Android libraries, and there are practical limitations in how much of their standard libraries the languages can carry over to Android devices (unless those libraries are very small of course).</p>
<p>I recently took another look at the JVM Android landscape and this is what I found;</p>
<p>Mirah is still around. It's Ruby programming for Android. If Ruby is your preferred language this may be a good choice. Mirah also carries very little overhead; that means that your apk size will be real small (starting around 16KB for a minimal application). It also means that beside the Ruby syntax, you probably should not count on your favorite Ruby library and/or flexible data structures are available. Even if the syntax is Ruby, your environment is Android, and Mirah is a very thin wrapper on top of the Android libraries, and could probably be considered java with a ruby syntax (which may be a good thing). While Mirah has been around for a while, tooling and documentation seems to be lacking, and many of them are outdated.</p>
<p>Scala has had decent Android support for a while. My knowledge about Scala is superficial so I will not make too many comments about it, other than to note that when compiling for Android, the manage to get their apk package size down to around 10KB, but the compiling process is also famous for being painfully slow.</p>
<p>Clojure also has decent Android support, but so far the apk sizes created make it unsuitable for general applications to run on any (-body's) device. A minimal Android application on Clojure typically start at 1.7MB, although I've read reports that die hard Clojure proguard experts have managed to get it down to the "hundreds of KB" level. That's still a long way off compared to the rest, so I personally do not consider Clojure an alternative for Android development today.</p>
<p>I recently found Kawa, a JVM based Scheme language, which seems to offer a decent language (Scheme, a Lisp variant) together with a reasonable apk package size. In my own tests a minimal "hello world" style application in Kawa compiles down to an apk file of 49KB. I just recently started developing in Kawa so I am unable to comment on what those 49KB give us. If it's not really needed, I guess more proguard tweaking will make the apk smaller. Alternatively, there is a minimal standard library in there making development less painful than having to deal with java syntax for simple data structures and similar. Time will tell. But from my point of view, 50KB is not too large to get started, so unless there are other issues that will make the payload increase significantly for normal development, Kawa is looking very promising.</p>
<p>For my own sake, I will be trying to use Kawa for my next project, and mix in with native Java where it makes sense.</p>
</div></div></div><div class="field field-name-field-tags field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Tags: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a rel="nofollow">android</a></li><li class="taxonomy-term-reference-1"><a rel="nofollow">kawa</a></li><li class="taxonomy-term-reference-2"><a rel="nofollow">scheme</a></li><li class="taxonomy-term-reference-3"><a rel="nofollow">lisp</a></li><li class="taxonomy-term-reference-4"><a rel="nofollow">mirah</a></li><li class="taxonomy-term-reference-5"><a rel="nofollow">ruby</a></li></ul></div>              </p>
              <p class="meta"><a href="http://kjeldahl.net/d7/node/32">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://euroclojure.com/2012" title="EuroClojure 2012">Euroclojure</a></h2>
              <p>
July 03, 2012 04:30 PM                <br />
                <a href="http://euroclojure.com/2012">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://euroclojure.com/2012/videos/">Videos!</a></h2>
              <p>
<p>All the sessions were video recorded and we are making them available on <a href="https://vimeo.com/euroclojure" target="_blank" title="Vimeo"><strong>our Vimeo channel</strong></a> as soon as the post-production is done (merging the speaker feed with the projector feed).</p>
<p>Enjoy!</p>              </p>
              <p class="meta"><a href="http://euroclojure.com/2012/videos/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=be83c0b5b0d92b259682cb8021e14d2a" title="InfoQ Clojure-related materials">Clojure at InfoQ</a></h2>
              <p>
July 03, 2012 03:10 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=be83c0b5b0d92b259682cb8021e14d2a">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://www.infoq.com/presentations/The-Taming-of-the-Deftype">Presentation:  The Taming of the Deftype</a></h2>
              <p>
Baishampayan Ghose discusses creating custom data types in Clojure, covering: types vs. records, interfaces and corresponding protocol, mutable types, and example implementations. <i>By Baishampayan Ghose</i>              </p>
              <p class="meta"><a href="http://www.infoq.com/presentations/The-Taming-of-the-Deftype">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4ae2c2d9a04d626263b3cb7c7a002970" title="Relevance Inc.'s blog">"Relevance Inc.'s blog"</a></h2>
              <p>
July 03, 2012 03:00 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4ae2c2d9a04d626263b3cb7c7a002970">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://feedproxy.google.com/~r/relevance-blog/~3/Y9VBNDWhO5g/where-to-find-relevancers-july-edition">Where to find Relevancers: July Edition</a></h2>
              <p>
<p>Want to meet a Relevancer in person? Here's where you can find us during the month of July:</p>

<p><strong>Durham, NC</strong> Every Tuesday - 7pm @ <a href="http://splatspace.org/" rel="nofollow" target="_blank">Splat Space</a><br />
<a href="http://www.meetup.com/splatspace/" rel="nofollow" target="_blank">Splat Space Open Meeting</a><br />
Attending: <a href="http://thinkrelevance.com/team/members/alan-dipert" rel="nofollow" target="_blank">Alan Dipert</a>, Splat Space founder and Meetup organizer</p>

<p><strong>Durham, NC</strong> 7/10<br />
<a href="http://techcrunch.com/events/southeast-mini-meetup-raleigh/" rel="nofollow" target="_blank">Techcrunch Mini Meetup</a> at <a href="http://www.tylerstaproom.com/locations/durham/" rel="nofollow" target="_blank">Tyler's Taproom</a><br />
Relevance is sponsoring this event!</p>

<p><strong>Portland, OR</strong> 7/16-7/18<br />
<a href="http://oscon.com/" rel="nofollow" target="_blank">OSCON</a><br />
Speaking: <a href="http://thinkrelevance.com/team/members/alan-dipert" rel="nofollow" target="_blank">Alan Dipert</a>, <a href="http://thinkrelevance.com/team/members/clinton-dreisbach" rel="nofollow" target="_blank">Clinton Dreisbach</a> <br />
Talk: <a href="http://www.oscon.com/oscon2012/public/schedule/detail/24005" rel="nofollow" target="_blank">Computing with Clojure</a></p>

<p><strong>Burlington, VT</strong> 7/28-7/29<br />
<a href="http://burlingtonruby.com/" rel="nofollow" target="_blank">Burlington Ruby Conference</a><br />
Speaking: <a href="http://thinkrelevance.com/team/members/jen-myers" rel="nofollow" target="_blank">Jen Myers</a><br />
Talk: Developers Can't Design (And Other Completely Untrue Design Myths)</p>

<p><strong>Chicago, IL</strong> 7/31-8/3<br />
<a href="http://clojurecore-chicago.eventbrite.com/" rel="nofollow" target="_blank">Clojure Training</a><br />
Trainers: <a href="http://thinkrelevance.com/team/members/stuart-sierra" rel="nofollow" target="_blank">Stuart Sierra</a>, <a href="http://thinkrelevance.com/team/members/luke-vanderhart" rel="nofollow" target="_blank">Luke VanderHart</a></p>
<img height="1" src="http://feeds.feedburner.com/~r/relevance-blog/~4/Y9VBNDWhO5g" width="1" />              </p>
              <p class="meta"><a href="http://feedproxy.google.com/~r/relevance-blog/~3/Y9VBNDWhO5g/where-to-find-relevancers-july-edition">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://codeabout.blogspot.com/search/label/clojure" title="Codeabout">Codeabout</a></h2>
              <p>
July 03, 2012 05:24 AM                <br />
                <a href="http://codeabout.blogspot.com/search/label/clojure">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://codeabout.blogspot.com/2012/06/emacs-style-clojure-rc-files.html">.emacs style Clojure rc files</a></h2>
              <p>
<div><span style="font-family: inherit;">The following will let you run clojure code in the current namespace, from a dotfile in your home directory.</span></div><span style="font-family: 'Courier New', Courier, monospace;"></span><br /><div><span style="font-family: 'Courier New', Courier, monospace;"><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></span></div><span style="font-family: 'Courier New', Courier, monospace;">(require '[clojure.java.io :as io])</span><br /><div><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div><span style="font-family: 'Courier New', Courier, monospace;">(load-string (slurp (io/file (System/getenv "HOME") *rc-file*)))</span></div><div><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div><span style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div class="blogger-post-footer"><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/5667529825707648584-5701248843794388491?l=codeabout.blogspot.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://codeabout.blogspot.com/2012/06/emacs-style-clojure-rc-files.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://tapestryjava.blogspot.com/search/label/clojure" title="Tapestry Central">Tapestry Central</a></h2>
              <p>
July 02, 2012 05:27 PM                <br />
                <a href="http://tapestryjava.blogspot.com/search/label/clojure">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://tapestryjava.blogspot.com/2012/07/you-cannot-correctly-represent-change.html">You Cannot Correctly Represent Change Without Immutability</a></h2>
              <p>
<p>The title of this blog post is a quote by Rich Hickey, talking about the <a href="http://datomic.com/">Datomic</a> database. Its a beautiful statement, at once illuminating and paradoxical. It drives at the heart of the design of both Clojure and Datomic, and embraces the difference between identity and state.

</p><p>
What is change?  That seems like an obvious question, but my first attempt at defining it was "some  <em>change</em> to a quantifiable set of qualities about some object."  Woops, I used <em>change</em> recursively there ... that's not going to help.

</p><p>
In the real world, things change in ways we can observe; the leaf falls from the tree, the water in the pot boils, the minute hand moves ever forward. 

</p><p>
How do we recognize that things have changed?  We can, in our memories, remember a prior state. We remember when the leaf was green and attached to a branch; we remember when the water came out of the tap, and we remember looking at the clock a few minutes ago. We can hold both states in our mind at the same time, and compare them.

</p><p>
How do we represent change in traditional, object-oriented technologies?  Well, we have fields (or columnus) and we change the state in place:  
</p><ul>
<li><code>leaf.setColor(BROWN).detachFromTree()</code></li>
<li><code>UPDATE LEAVES SET COLOR = 'BROWN' WHERE ID = ?ID</code></li>
<li><code>water.setTemperature(212)</code></li> 
<li>or we see time advancing via <code>System.currentTimeMillis()</code></li>
</ul>

<p>
Here's the challenge: given an object, how do you ask it about its prior state?  Can you ask <code>leaf.getTreeDetachedFrom()</code>? Generally, you can't unless you've gone to some herculean effort: the new state overwrites the old state in place.

</p><p>
When Rich talks about conflating state with identity, this is what he means. With the identity and state conflated, then after the change in state, the leaf will <em>now-have-always-been</em> fallen from the tree, the water will <em>now-have-always-been</em> boiled, and the clock will <em>now-eternally</em> be at 9:49 AM.

</p><p>
What Clojure does in memory, and Datomic does in the database, is split identity and state.  We end up with <code>leaf<sub>1</sub></code> as <code>{:id "a317a439-50bb-4d37-838a-c8eef289e22f" :color :green :attached-to maple-tree}</code> and <code>leaf<sub>2</sub></code> as <code>{:id "a317a439-50bb-4d37-838a-c8eef289e22f" :color :brown :on-ground true}</code>.  The id is the same, but the other attributes can vary.

</p><p>
With immutability, changes in state are really new objects; a new <em>version</em>, or "quantifiable set of qualities", that does not affect the original version.  It is possible to compare two different iterations of the same object to see the "deltas". In Datomic, you even have more meta-data about when such state changes occur, what else changed within the same transaction, and who is the responsible party for that transaction.


</p><p>The essence here is not to think of an object as a set of slots you can put new data into. Instead, think of it as a time-line of different configurations of the object. The fact that late in the time-line, the leaf has fallen from the tree does not affect the fact that earlier on the time-line, the leaf was a bud on a branch. The identity of the leaf transcends all those different states.

</p><p>
In the past, I've built systems that required some of the features that Datomic provides; for example, being able to reconstruct the state of the entire database at some prior time, and strong auditing of what changes occurred to what entities at a specific time (or transaction). Rich knows that others have hit this class of problem; part of his selling point is to ask "and who really understands that query" (the one that reconstructs prior state). He knows people have done it, but he also knows no one is very happy about its performance, correctness, or maintainability ... precisely because traditional databases don't understand mutability: they live in that eternal-now, and drag your application into the same world view.

</p><p>
That's why I'm excited by Datomic; it embraces this key idea: <strong>separate identity from state by leveraging immutability</strong> and from the ensuing design, much goodness is an automatic by-product. Suddenly, we start seeing much of what we take as dogma when developing database-driven applications to be kludges on top of an unstable central idea: mutable state.

</p><p>For example:  read transactions are a way to gain stable view of interrelated data even as the data is being changed (in place); with Datomic, you always have a stable view of all data, because you operate on an immutable view of the entire database at some instance in time.  Other transactions may add, change, or replace Datoms in the database, but any code that is reading from the database will be completely unaware of those changes, even as they lazily navigate around the entire database.</p><div class="blogger-post-footer"><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/4110180-1624807543117541684?l=tapestryjava.blogspot.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://tapestryjava.blogspot.com/2012/07/you-cannot-correctly-represent-change.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://www.unlimitednovelty.com/search/label/clojure" title="Unlimited Novelty">Tony Arcieri</a></h2>
              <p>
July 02, 2012 04:03 PM                <br />
                <a href="http://www.unlimitednovelty.com/search/label/clojure">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://www.unlimitednovelty.com/2011/07/trouble-with-erlang-or-erlang-is-ghetto.html">The Trouble with Erlang (or Erlang is a ghetto)</a></h2>
              <p>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-Wm80DLtaME4/Ti478Yi7UtI/AAAAAAAAAVY/0C7HpmJdWjw/s1600/erlang.jpg" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="213" src="http://1.bp.blogspot.com/-Wm80DLtaME4/Ti478Yi7UtI/AAAAAAAAAVY/0C7HpmJdWjw/s320/erlang.jpg" width="320" /></a></div><br />This is a blog post I have been meaning to write for quite some time. I lament doing so because I've made a considerable time investment into the Erlang infrastructure and really love some of its ideas. Erlang has done a great and still unique job of synthesizing a number of concepts in a very interesting way. But after using the platform in various capacities for some 4 years now, there are some glaring issues I think need to be called out.<br /><br /><b><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;">Records suck and there's no struct/map data structure</span></b><br /><br />Erlang has a feature called "records" which uses the preprocessor to give you something akin to a struct or map, i.e. a way to access named fields of a particular object/term within the system. As far as I can tell, there's pretty much universal agreement within the community that this is a huge limitation, and several proposals have been made to remedy the problem. The requested feature has typically been referred to as a "frame", and several proposals for implementing frames have been floating around for several years. Yet no action has been taken on the problem.<br /><br />So why doesn't Erlang have frames? While Erlang is an open source project, its implementation and release cycle are managed by Ericsson, the company that created it, and Ericsson just doesn't seem to care. I'm not sure what Ericsson's priorities are when it comes to adding features to Erlang, but in my opinion they're doing a worse job of engaging the community than Oracle has been doing with Java. I hate Oracle as a company, but so far it feels like they've actually done a fairly good job managing Java development and moving Java forward. I can't say that at all with Ericsson, and frames are the quintessential example of this.<br /><br /><b><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;">Erlang sucks at managing memory</span></b><br /><br />Once upon a time <a href="http://www.unlimitednovelty.com/2009/01/cutting-edge-of-vm-design.html">I looked upon BEAM's design as the future pattern all virtual machines would follow</a>. I strongly encourage you to read that post before taking issue with anything I have to say in regard to this matter. I have completely reversed my opinion since the time I write that post.<br /><br />The other night I tweeted "<a href="https://twitter.com/#!/bascule/status/94267684816031744">If you're looking for a language that gets multicore concurrency right, look at how Azul implemented Java on their Vega architecture</a>" and I definitely stand by that. Azul is a company that got a lot of smart hardware and software people together and had them work on designing a custom system which would scale to hundreds of CPU cores (up to 768 of them), heaps that topped 500 GB (up to 768GB), and had the GC pause only 10-20ms at a time. The realtime performance characteristics Azul managed to eek out of their system lead them to often describe their GC as "pauseless".<br /><br />Where Azul was scaling up to 768 CPUs in 2007, Erlang was crapping out around 15 CPUs in 2009. For everything Erlang had to say about the importance of immutability and messaging in concurrent systems, and despite Joe Armstrong's promise that "your Erlang program should just run N times faster on an N core processor," it turns out that on the Erlang VM the N core processor promise had an upper bound of around 15.<br /><br />Why is this? Erlang implements its own memory allocator and can't take advantage of libraries like <a href="http://goog-perftools.sourceforge.net/doc/tcmalloc.html">tcmalloc</a> to provide better multithreaded heap management. I can't fault a language VM like BEAM for doing this save for the fact that what Erlang provides is relatively crappy.<br /><br />Erlang has done a fairly decent job given the constraints it was working within. Erlang wanted to provide a soft realtime system, and managed to create one that works on commodity architectures, unlike the Azul Vega appliances which require custom hardware. However, Azul has managed to port their version of the JVM to x86 hardware with their <a href="http://www.azulsystems.com/products/zing/whatisit">Zing Architecture</a>, which wraps the JVM in a separate runtime container which uses software transactional memory to replace the hardware transactional memory found on the Vega appliances. It's higher overhead but provides similar guarantees. Java also provides the <a href="http://www.rtsj.org/">RTSJ specification</a> for building realtime systems in Java.<br /><br />Both Zing and RTSJ demonstrate that Erlang's approach to building a realtime garbage collected system, using separate heaps per process, isn't necessary to still provide realtime characteristics. Erlang's approach of using separate heaps is nonstandard and comparatively hard to optimize because most other systems are using a shared heap model. Azul's Vega architecture shows that shared heaps can scale up to hundreds of CPU cores and hundreds of gigabytes of heap while still providing realtime characteristics. Even more exciting is that <a href="http://semiaccurate.com/2011/06/22/amd-and-arm-join-forces-at-last/">AMD's Fusion architecture, which they're implementing in conjunction with ARM, provides read and write barriers at the hardware level necessary to provide a system like Azul using commodity hardware</a>.<br /><br />However, I think everything I just said is moot for the majority of applications. People building messaging systems want the best performance possible but don't typically have software realtime constraints. The Erlang VM's approach to soft realtime made a design decision which hampers its messaging speed, namely the use of separate heaps, which requires messages be copied from one heap to another. This means the Erlang VM does not provide zero-copy messaging. Every time you send a message from one Erlang process to another, some amount of data must be copied.<br /><br />Erlang has partly mitigated this problem by providing a separate shared heap for binaries, which are the Erlang type for arbitrary blobs of binary data. This means if you ensure the majority of data you move around doesn't contain anything of significant size except binaries, perhaps this won't be a problem. However, if you're moving large collections of numbers around (Erlang's strings-as-lists-of-integers come to mind), messaging will be comparatively slow compared to a zero copy system.<br /><br /><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Various solutions to this have been proposed for BEAM, such as switching from a shared-nothing heap to a shared heap or a hybrid heap (where message-passed objects are copied once), however the Erlang garbage collector is not suitable for managing shared/hybrid heaps and would need to be rewritten for the task, and nobody has managed to get the shared/hybrid heaps working with Erlang's SMP scheduler, or rewritten the garbage collector to be more suitable to the task of managing a shared/hybrid heap.</div><div><br /></div>A potential solution to this?<a href="https://github.com/trifork/erjang/wiki"> Erjang, an implementation of Erlang on the JVM</a>, provides zero copy messaging using the <a href="http://www.malhar.net/sriram/kilim/">Kilim library for lightweight threads</a>.<br /><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>JIT? What JIT?</b></span><br /><br />Erlang has a "JIT" compiler called HiPE, which is mostly hype. I put JIT in quotes because HiPE is mostly an Erlang-to-native-code compiler with a limited set of backends which does a pretty bad job of optimizing and can't use runtime profiling information to improve the quality of the native code it generates in the way JIT compilers like HotSpot are able to. Calling HiPE a just-in-time compiler is a stretch as it is for most part an ahead-of-time native compiler for Erlang. The quality of native code produced by HiPE can be so poor that it's often outperformed by the userland bytecode interpreter implemented in BEAM.<br /><br />HiPE can perform a very limited set of optimizations. In particular, Erlang code is factored into modules, and HiPE's inliner is unable to inline natie code across modules. This is due to HiPE's lack of a deoptimizer (a.k.a. deopt), or a way to translate JITed code back into bytecode, which is necessary in general but particularly necessary in Erlang for cases like hot code swapping. Deopt support is a feature of many JIT compilers in languages more popular than Erlang, most notably the HotSpot compiler on the JVM. Google's V8 virtual machine for JavaScript added deoptimization support as part of their "Crankshaft" compilation infrastructure.<br /><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>Erlang isn't general purpose</b></span><br /><br />Erlang hates state. It especially hates shared state. The only facility provided by the language for dealing with shared state in Erlang is called "Erlang Term Storage" and provides a Judy array that several Erlang processes can talk to. The semantics of ETS are fairly awkward and using it directly is difficult. Erlang has a baked-in database called Mnesia which is built on ETS. Mnesia's performance characteristics aren't great but it provides a friendlier face for ETS. These are the only solutions to shared state baked into the language.<br /><br />What should you do if you want to deal with a shared-state concurrency program in Erlang? The general advice is: don't. Erlang isn't designed for solving shared-state concurrency problems. If you encounter a shared state concurrency problem while developing your Erlang program, sorry, you picked the wrong language. Perhaps you should move along... and Clojure offers you some great ways to tackle shared state concurrency problems.<br /><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>The syntax is atrocious</b></span><br /><br />I think this one goes without saying. That said...<br /><br />Let me come at this from a different angle than you're probably expecting: I've recently started working with Clojure, and I have to say, I really think Erlang would've been a lot better off with a Lisp-like syntax than a Prolog-inspired syntax. To-date Erlang is the only popular language with a Prolog inspired syntax and all of the awkward tokens and gramatical constructions make me wish it just had a simple Lispy syntax. This has been implemented in Robert Virding's <a href="http://forum.trapexit.org/viewtopic.php?p=43950#43950">Lisp Flavoured Erlang</a>, which is very cool and worth checking out.<br /><br />That opinion might come as a surprise, because the main project I was developing in Erlang was <a href="http://reia-lang.org/">Reia</a>, a Ruby-like syntax and runtime for Erlang. I've discontinued this project, for many reasons, one of which is because it's been surpassed in features and documentation by a similar project, José Valim's <a href="https://github.com/josevalim/elixir">Elixir</a>. After years of working on Reia, I've really grown to believe I'd rather spend my time working on a language which incorporates Erlang's ideas, but on the JVM with mutable state.<br /><br />The Erlang cargo cult would love to hang me out to dry for even saying that... so let me address it right now.<br /><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>Immutable state sucks and isn't necessary for Erlang-Style Concurrency</b></span><br /><br />Immutable state languages force object creation whenever anything changes. This can be partially mitigated by persistent data structures, which are able to share bits and pieces of each other because they're immutable. This works, for example, when attempting to create a sublist that consists of the last N elements of a list. But what if you want the first N elements? You have to make a new list. What if you want elements M..N? You have to make a new list.<br /><br />In mutable state languages, performance problems can often be mitigated by mutating local (i.e. non-shared) state instead of creating new objects. To give an example from the Ruby language, combining two strings with the + operator, which creates a new string from two old ones, is significantly slower than combining two strings with the concatenating &gt;&gt; operator, which modifies the original string. Mutating state rather than creating new objects means there's fewer objects for the garbage collector to clean up and helps keep your program in-cache on inner loops. If you've seen <a href="http://www.infoq.com/presentations/click-crash-course-modern-hardware">Cliff Click's crash course on modern hardware</a>, you're probably familiar with the idea that  latency from cache misses is quickly becoming the dominating factor in today's software performance. Too much object creation blows the cache.<br /><br />Cliff Click also covered Actors, the underpinning of Erlang's concurrency model, in his <a href="http://www.infoq.com/news/2010/09/javaone2010-concurrency">Concurrency Revolution from a Hardware Perspective</a> talk at JavaOne. One takeaway from this is that actors should provide a safe system for mutable state, because all mutable state is confined to actors which only communicate using messages. Actors should facilitate a shared-nothing system where concurrent state mutations are impossible because no two actors share state and rely on messages for all synchronization and state exchange.<br /><br />The <a href="http://www.malhar.net/sriram/kilim/">Kilim library for Java</a> provides a fast zero-copy messaging system for Java which still enables mutable state. In Kilim, when one actor sends a message, it loses visibility of the object it sends, and it becomes the responsibility of the recipient. If both actors need a copy of the message, the sender can make a copy of an object before it's sent to the recipient. Again, Erlang doesn't provide zero-copy (except for binaries) so Kilim's worst case is actually Erlang's best case.<br /><br />The limitations of concurrent objects in Reia were solved using mutable state in my <a href="https://github.com/tarcieri/celluloid">Celluloid concurrent object library for Ruby</a>, but that deserves a blog post in and of itself.<br /><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif; line-height: 16px;"><b>Single assignment is just as problematic as destructive assignment</b></span><br /><br />Erlang doesn't allow destructive assignments of variables, instead variables can only be assigned once. Single assignment is often trotted out as a panacea for the woes of mistakenly rebinding a variable then using it later expecting you had the original value. However, let me show you a real-world case that has happened to me on several occasions which wouldn't be an error in a language with destructive assignment and pattern matching (e.g. Reia).<br /><br />There exists a complimentary case of mistaken variable usage to the afforementioned problem with destructive assignment. In single-assignment programs, it involves mistakenly using the same variable name twice excepting the variable to be unbound the second time: <br /><br /> The first pattern matching expression binds the Foo variable to something. In the second case, we've mistakenly forgot Foo was already bound. What's the result?<br /><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">exception error: no match of right hand side... </span><br /><br />We get no compiler warning in this case. This is the type of error you only encounter at runtime. It can lay undetected in your codebase, unless you're writing tests. Know what other problem writing tests solves? Mistaken destructive assignments.<br /><br />Single assignment is often trotted out by the Erlang cargo cult as having something to do with Erlang's concurrency model. This couldn't be more mistaken. Reia compiled destructive assignments into <a href="http://en.wikipedia.org/wiki/Static_single_assignment_form">Static Single Assignment (SSA) form</a>. This form provides versioned variables in the same manner as most Erlang programmers end up doing manually. Furthermore, <a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.34.3282&amp;rep=rep1&amp;type=pdf">SSA is functional programming</a>. While it may not jive with the general idealism of functional programming, the two forms (SSA and continuation passing style) have been formally proven identical.<br /><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>The standard library is inconsistent, ugly, and riddled with legacy</b></span><br /><br />Should module names in the standard library be plural, like "lists"? Or should they be singular, like "string"? Should we count from 1, as in most of the functions found in things like the lists module, or should we count from 0 like the functions found in the array module? How do I get the length of a list? Is it lists:length/1? No, it's erlang:length/1. How do I get the Nth element of the tuple? Should I look in the tuple module? Wait, there is no tuple module! Instead it's erlang:element/2. How about the length of a tuple? It's erlang:tuple_size/1. Why is the length of a list just "length" whereas the length of a tuple is "tuple_size"? Wouldn't "list_length" be more consistent, as it calls out it works on lists?<br /><br />When we call erlang:now() to get the current time, it returns <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">{1311,657039,366306}</span>.  What the hell does that mean? It's a tuple with three elements. How could time possible need three elements? A quick look at the documentation reveals that this tuple takes the form <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">{Megaseconds, Seconds, Microseconds}</span>. Separating out Microseconds makes sense... Erlang has no native decimal type so using a float would lose precision. But why split apart Megaseconds and Seconds?<br /><br />Once upon a time Erlang didn't support integers large enough to store the combination of Megaseconds and Seconds, so they were split apart. The result is a meaningless jumble of three numbers, which you have to run through the confusingly named <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">calendar:now_to_local_time/1</span> function to get a human meaningful result, which doesn't tell you what time it is now, but instead takes the tuple that <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">erlang:now/0</span> returns as an argument and will spit back meaningful <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">{Year, Month, Day}</span> and <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">{Hour, Minute, Second}</span> tuples.<br /><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>Legacy in the grammar</b></span><br /><br />Try to use "query" as an atom in Erlang, e.g. <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">{query, "SELECT * FROM foobar"}</span>. What happens?<br /><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">syntax error before: ','</span><br /><br />This is because 'query' is a reserved word which was reserved for Mnemosyne queries. Never heard of Mnemosyne? That's because it's an archaic way of querying Erlang's built-in database, Mnesia, and has been replaced with Query List Comprehensions (QLC). However, it remains around for backwards compatibility.<br /><br />You can't use "query" as a function name. You can't tag a tuple with "query". You can't do anything with "query" except invoke a deprecated legacy API which no one uses anymore.<br /><br /><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>Strings-as-lists suck</b></span></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">Erlang provides two ways of representing strings. One is as lists of integers, which is the traditional way that most of the library functions support. Another is binaries. Erlang has no way of differentiating lists of integers that represent strings from lists of integers that are actually lists of integers. If you send a list of integers in a message to another process, the entire list of integers is copied every time. On 64-bit platforms, every integer takes up 64-bits.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">The obvious solution here is to use binaries instead of lists of integers. Binaries are more compact and exist in a separate heap so they aren't copied each time they're sent in a message. The Erlang ecosystem seems to be gradually transitioning towards using binaries rather than strings. However, much of the tooling and string functions are designed to work with list-based strings. To leverage these functions, you have to convert a binary to a list before working with it. This just feels like unnecessary pain.</div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;"><br /></div><div style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px;">The abstract concept of lists as strings isn't inherently flawed. In many ways it does make sense to think of strings as lists of characters. Lists as strings would probably make a lot more sense if Erlang had a native character type distinct from integers which was more compact and could avoid being copied each time a string is sent in a message like a binary. Perhaps in such a system it'd be possible to avoid transcoding strings read off the wire or completely transforming them to a different representation, which is costly, inefficient, and often times unnecessary (yes, this is a problem with Java too).</div><div><br /></div><div><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>There's no "let"</b></span></div><div><br /></div><div>Want a local binding in Erlang? Perhaps you've used <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">let</span> for this in a Lisp. What happens when you try to do this in Erlang? Even attempting to use "let" in Erlang just yields: <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">syntax error before: 'let'</span></div><div><br /></div><div>Once upon a time Erlang was supposed to get let bindings, and the "let" keyword was set aside for this purpose. But much like frames, it never happened. Instead, let is now an unimplemented reserved word which just breaks your programs.</div><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>There's no "nil"</b></span><br /><br />In Clojure, I can write the following: <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">(if false :youll-never-know)</span>.  This implicitly returns "nil" because the condition was false. What's the equivalent Erlang?<br /><br />Erlang forces you to specify a clause that always matches regardless of whether you care about the result or not. If no clause matches, you get the amazingly fun "badmatch" exception. In cases where you don't care about the result, you're still forced to add a nonsense clause which returns a void value just to prevent the runtime from raising an exception.<br /><br /><span class="Apple-style-span" style="font-family: 'Trebuchet MS', sans-serif;"><b>Where do I go from here?</b></span><br /><br />Again, I want to emphasize that I have a great deal of respect for Erlang conceptually. But at this point I'd like to take what I've learned and go elsewhere with it. One direction I've gone is the <a href="https://github.com/tarcieri/celluloid">Celluloid concurrent object library for Ruby</a>. You can <a href="http://www.unlimitednovelty.com/2011/05/introducing-celluloid-concurrent-object.html">read more about it in the original blog post I wrote about Celluloid</a>, which is a bit out-of-date at this point. I have a forthcoming blog post which should dive a bit deeper into Celluloid's guts and how it can do things which aren't possible in Erlang.<br /><br />As you've probably guess from the references sprinkled throughout this post, I'm learning Clojure. I'm a fan of the JVM and Clojure provides a great functional language for leveraging the JVM's features. I think the sort of things that I'd be writing in Erlang I'll try writing in Clojure instead. Clojure has elegant Lisp syntax. Clojure has maps. Clojure has powerful facilities for dealing with concurrent shared state problems. Clojure has great semantics for safely managing mutable state in a concurrent environment. Clojure has real strings. Clojure has let. Clojure has nil. Clojure runs on the JVM and can leverage the considerable facilities of the HotSpot JIT and JVM garbage collectors.<br /><br />I'd also like to try my hand at creating a JVM language, especially with the impeding release of Java 7 this Thursday. Java 7 brings with it InvokeDynamic, a fast way to dispatch methods in dynamic languages, and considerably eases the difficulty of implementing dynamic languages on the JVM. Stay tuned for more details on this.<div class="blogger-post-footer"><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/1257969457375562525-4948168161126751978?l=www.unlimitednovelty.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://www.unlimitednovelty.com/2011/07/trouble-with-erlang-or-erlang-is-ghetto.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=83fd94188e529e39e6618f741257f114" title="Beanstalk">Beanstalk</a></h2>
              <p>
July 02, 2012 03:31 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=83fd94188e529e39e6618f741257f114">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://blog.beanstalkapp.com/post/26349068012">Open Source Friday: subversion-clj and jgit-clj</a></h2>
              <p>
<p>Almost a month went by after we deployed the <a href="http://blog.beanstalkapp.com/post/23998022427/beanstalk-clojure-love-and-20x-better-performance" rel="nofollow" target="_blank">new Beanstalk caching daemon</a> to production and so far it’s been working great. The commit caching speeds improved so much that in most cases you shouldn’t even notice that there’s any caching at all.</p>

<p>As part of the work on the new caching daemon we’ve had to create some of our own special code based around some of the Java APIs (that we’re accessing through <a href="http://clojure.org/" rel="nofollow" target="_blank">Clojure</a>) to connect to the repositories and fetch the needed information out of them.</p> 

<p>Today, we’re officially releasing this Clojure code as a new open source project and a big contribution to an existing one.</p>

<h3>Subversion bindings for Clojure — <a href="https://github.com/dsabanin/subversion-clj/" rel="nofollow" target="_blank">subversion-clj</a></h3>

<p>This is a new open source project that we’ve started. It’s an extraction from our code that reads information from a Subversion repository either from disk or from a remote URL. The code is a wrapper around the great <a href="http://svnkit.com/" rel="nofollow" target="_blank">SVNKit</a> library.</p>

<p>Since this is an extraction from the caching daemon it only features a
read-only API to get commit information out of the repository, but we invite anyone to contribute/request features they’d like to see implemented. For one thing we’re certainly going to add more features ourselves as we expand our usage of Clojure here at Beanstalk.</p>

<h3>JGit bindings for Clojure — <a href="https://github.com/dsabanin/clj-jgit" rel="nofollow" target="_blank">clj-jgit</a></h3>

<p>This is our contribution to an existing open source project by <a href="https://github.com/semperos" rel="nofollow" target="_blank">Daniel Gregoire</a>. Currently it is the best Clojure library to access <a href="http://www.eclipse.org/jgit/" rel="nofollow" target="_blank">JGit</a> (the library Eclipse uses to access Git repos).</p>

<p>Some of the advanced ways to query the repositories for information we needed were missing so we’ve worked on extending clj-jgit and now thanks to Daniel our changes are merged into the official project. We’re also joining the development team of clj-jgit and are going to help drive the development of the project forward.</p>

<p>If you have any ideas or comments, please let us know what you think. We hope to continue open sourcing the useful stuff that we work on.</p>              </p>
              <p class="meta"><a href="http://blog.beanstalkapp.com/post/26349068012">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://sunng.info/blog" title="Here comes the Sun » clojure">Sun Ning</a></h2>
              <p>
July 02, 2012 10:45 AM                <br />
                <a href="http://sunng.info/blog">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://sunng.info/blog/2012/07/timing-brings-perf4j-to-clojure/">Timing brings perf4j to clojure</a></h2>
              <p>
<p><a href="https://github.com/sunng87/timing" target="_blank">Timing</a> is a dead simple clojure library wraps perf4j, while perf4j is an advanced library to log call time. It’s like log4j to System.out.println, that to System.currentTimeMillies. </p>
<p>The core part of Timing library is a `timed` macro. You can put any forms in it and it will log the call time.</p>
<div class="codecolorer-container clojure twitlight" style="overflow: auto; white-space: nowrap; width: 435px;"><div class="clojure codecolorer"><span style="color: #66cc66;">(</span>timed <span style="color: #ff0000;">"demo"</span><br />
  <span style="color: #66cc66;">(</span>look<span style="color: #66cc66;">-</span>for<span style="color: #66cc66;">-</span>something<span style="color: #66cc66;">-</span>from<span style="color: #66cc66;">-</span>the<span style="color: #66cc66;">-</span>moon<span style="color: #66cc66;">)</span><br />
  <span style="color: #66cc66;">...</span><span style="color: #66cc66;">)</span></div></div>
<p>And it logs:<br />
start[1341215254682] time[1000] tag[demo]</p>
<p>Timing looks up your classpath at startup for a logging backend: slf4j or log4j. If neither of them found, it fails back to log to stderr. By the way, log4j is the recommended logging backend. There are some predefined appender in perf4j to generate semi-realtime summary and charts. Anyway, Timing, as a library, doesn’t depend on any library other than perf4j.</p>
<p>The project is hosted at <a href="https://github.com/sunng87/timing" target="_blank">github</a> and available on clojars of version “0.1.0″.</p>              </p>
              <p class="meta"><a href="http://sunng.info/blog/2012/07/timing-brings-perf4j-to-clojure/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1d37e15aab3f0c5d82f165e65aa0c034" title="Jacek Laskowski">Jacek Laskowski</a></h2>
              <p>
July 01, 2012 10:16 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1d37e15aab3f0c5d82f165e65aa0c034">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://feedproxy.google.com/~r/blog-japila-pl/~3/POoAJv8e530/">leiningen’s sources for some, comp and partial</a></h2>
              <p>
<p>When I stumbled upon the line <code class="codecolorer text default"><span class="text">(some (comp :repositories val) user-profiles)</span></code> (it’s now gone, but <a href="https://github.com/technomancy/leiningen/commit/5775c6a2b8b200a701a8b2ffa7605ea6f4ea4fc2" rel="nofollow" target="_blank">it existed at that time</a> it’d happened and <a href="https://github.com/technomancy/leiningen/commit/e34812a3b0256c9644ad1bd9cbf816bb00bd2259" rel="nofollow" target="_blank">I’d submitted a patch</a>) I knew I should’ve read the sources long ago. I was told a few times that reading a source code might be very beneficial and I’d bet <a href="https://github.com/technomancy/leiningen" rel="nofollow" target="_blank">leiningen’s</a> was amongst the best sources mentioned.</p>
<p>The simple line showed the beauty of functional programming and showed how much I need to learn to fully embrace the concept. In this simple one-liner there’re 2 functions I rarely use – <a href="http://clojuredocs.org/clojure_core/clojure.core/some" rel="nofollow" target="_blank">some</a> and <a href="http://clojuredocs.org/clojure_core/clojure.core/comp" rel="nofollow" target="_blank">comp</a> – and it was quite recently when I read about <code class="codecolorer text default"><span class="text">comp</span></code> and <a href="http://clojuredocs.org/clojure_core/clojure.core/partial" rel="nofollow" target="_blank">partial</a> functions – <a href="http://blog.jayfields.com/2011/01/clojure-partial-and-comp.html" rel="nofollow" target="_blank">Clojure: partial and comp</a>.</p>
<p>With the knowledge and the other article I stumbled upon the other day – <a href="http://debasishg.blogspot.com/2010/04/thrush-in-clojure.html" rel="nofollow" target="_blank">Thrush in Clojure</a> I found the line <code class="codecolorer text default"><span class="text">#(= (:type %) 'savings)</span></code>. It caught my attention for the anonymous function and <code class="codecolorer text default"><span class="text">%</span></code>. Whenever I see the combination I’m up for finding its replacement with <code class="codecolorer text default"><span class="text">comp</span></code> and <code class="codecolorer text default"><span class="text">partial</span></code>.</p>
<p>Here comes one:</p>
<div class="codecolorer-container text blackboard" style="width: 435px;"><div class="text codecolorer">(comp (partial = 'savings) :type)</div></div>
<p>What about this? Could you call it better?</p>
<div class="codecolorer-container text blackboard" style="width: 435px;"><div class="text codecolorer">(-&gt; (partial = 'savings)<br />
     (comp :type))</div></div>
<p>I myself don’t like it whatsoever and would rather define a symbol for <code class="codecolorer text default"><span class="text">(partial = 'savings)</span></code> and use it with <code class="codecolorer text default"><span class="text">comp</span></code> to improve readability.</p>
<div class="codecolorer-container text blackboard" style="width: 435px;"><div class="text codecolorer">(def =savings (partial = 'savings))<br />
<br />
(comp =savings :type)</div></div>
<p>The name <code class="codecolorer text default"><span class="text">savings?</span></code> I’d use for the composition.</p>
<div class="codecolorer-container text blackboard" style="width: 435px;"><div class="text codecolorer">(def savings? (comp =savings :type))</div></div>
<img height="1" src="http://feeds.feedburner.com/~r/blog-japila-pl/~4/POoAJv8e530" width="1" />              </p>
              <p class="meta"><a href="http://feedproxy.google.com/~r/blog-japila-pl/~3/POoAJv8e530/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://simonholgate.wordpress.com" title="Simon Holgate's Blog » Clojure">Simon Holgate</a></h2>
              <p>
July 01, 2012 11:25 AM                <br />
                <a href="http://simonholgate.wordpress.com">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://simonholgate.wordpress.com/2012/07/01/importing-data-to-hbase/">Importing data to HBase</a></h2>
              <p>
<p>I’ve begun to experiment with <a href="http://hadoop.apache.org/" target="_blank" title="Apache Hadoop website">Hadoop</a> (with the aim of eventually running jobs on <a href="http://simonholgate.wordpress.com/2012/05/16/using-ebs-and-s3-on-amazon-ec2/" target="_blank" title="Using EBS and S3 on Amazon EC2">EC2</a>) for a project with <a href="http://likely.co/" target="_blank" title="Likely.co website">Likely.co</a>.</p>
<p><a href="https://twitter.com/henrygarner" target="_blank" title="Henry Garner on Twitter">Henry Garner</a> (Likely.co’s CTO) provided exported HBase tables containing tweets as well as content and urls extracted from the tweets. So the first job was to import that data back into HBase.</p>
<p>I’m working on Ubuntu and initially installed the Cloudera Hadoop distribution. However, I found that the way the configuration files and jars were distributed made it harder for me to understand what was going on. Coupled with the fact that I’m running Natty Narwhal and the distribution is based on Lucid Lynx, I decided to uninstall it and  use a fresh (and up-to-date) version (1.0.3) from the Hadoop website.</p>
<p>The instructions from <a href="http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/" target="_blank" title="Michael Noll's tutorial for installing Hadoop">Michael Noll</a> on running a single cluster Hadoop installation on Ubuntu were clear and easy to follow. Hadoop was therefore installed in /usr/local/hadoop and I run jobs as hduser. I also installed the latest <a href="http://hbase.apache.org/" target="_blank" title="Apache HBase">HBase</a> (0.92.1 at the time of writing)  in /usr/local/hbase.</p>
<p>After exporting the class paths and related variables:</p>
<pre>export HBASE_HOME=/usr/local/hbase/
export HADOOP_CLASSPATH=$HBASE_HOME/hbase-0.92.1.jar:$HBASE_HOME:\
$HBASE_HOME/lib/zookeeper-3.4.3.jar:$HBASE_HOME/conf:\
$HBASE_HOME/lib/guava-r09.jar</pre>
<p>Hadoop and HBase are then started (as hduser):</p>
<pre>hduser:~$ /usr/local/hadoop/bin/start-all.sh
hduser:~$ /usr/local/hbase/bin/start-hbase.sh</pre>
<p>I then created the schemas for the tables in the HBase shell (as not doing so leads to an exception):</p>
<pre>hduser:~$ hbase shell
hbase(main):001:0&gt; create 'twitter_accounts', 'raw', 'base', 'extra'
hbase(main):002:0&gt; create 'content', 'raw', 'base', 'extra'
hbase(main):003:0&gt; create 'tweets', 'raw', 'base', 'extra'
hbase(main):004:0&gt; create 'short_urls', 'rel'</pre>
<p>Here the table name is followed by the names of the columns to be created. For example the ‘tweets’ table is created with three columns: ‘raw’, ‘base’ and ‘extra’ which matches the schema of Likely.co’s data.</p>
<p>The data were provided as gzipped tar files so they were uncompressed into a local directory (hbase-likely). To import the files into HBase the next step is to copy from the local file system into the Hadoop file system (HFS).</p>
<pre>hduser:~$ mkdir localtable
hduser:~$ hadoop fs -copyFromLocal hbase-likely/short_urls\
 localtable/short_urls
hduser:~$ hadoop fs -copyFromLocal hbase-likely/content\
 localtable/content
hduser:~$ hadoop fs -copyFromLocal hbase-likely/tweets\
 localtable/tweets
hduser:~$ hadoop fs -copyFromLocal hbase-likely/twitter_accounts\
 localtable/twitter_accounts</pre>
<p>Now I could finally import the data (which takes quite a while for big tables):</p>
<pre>hduser:~$ hadoop jar $HBASE_HOME/hbase-0.92.1.jar import twitter_accounts\
 localtable/twitter_accounts
hduser:~$ hadoop jar $HBASE_HOMEhbase-0.92.1.jar import tweets\
 localtable/tweets
hduser:~$ hadoop jar $HBASE_HOME/hbase-0.92.1.jar import content\
 localtable/content
hduser:~$ hadoop jar $HBASE_HOME/hbase-0.92.1.jar import short_urls\
 localtable/short_urls</pre>
<p>Ta da! Now we can look at the data. Back in the HBase shell:</p>
<pre>scan 'tweets', {COLUMNS =&gt; 'base', LIMIT=&gt;1}</pre>
<p>returns just the first row from the ‘base’ column of the ‘tweets’ table. From this we can see what the data looks like and, importantly, what qualifiers are applied to the column data.</p>
<pre>We can count the number of rows (which may take a long time):
hbase(main):008:0&gt; count 'short_urls'</pre>
<p>In another post I’ll look at how to do more complex queries using <a href="http://www.clojure.org/" target="_blank" title="The Clojure programming language">Clojure</a> and <a href="http://nathanmarz.com/blog/introducing-cascalog-a-clojure-based-query-language-for-hado.html" target="_blank" title="Nathan Marz's 'Cascalog' tutorial">Cascalog</a>.</p>
<br />  <a href="http://feeds.wordpress.com/1.0/gocomments/simonholgate.wordpress.com/38/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/simonholgate.wordpress.com/38/" /></a> <a href="http://feeds.wordpress.com/1.0/godelicious/simonholgate.wordpress.com/38/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/delicious/simonholgate.wordpress.com/38/" /></a> <a href="http://feeds.wordpress.com/1.0/gofacebook/simonholgate.wordpress.com/38/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/facebook/simonholgate.wordpress.com/38/" /></a> <a href="http://feeds.wordpress.com/1.0/gotwitter/simonholgate.wordpress.com/38/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/twitter/simonholgate.wordpress.com/38/" /></a> <a href="http://feeds.wordpress.com/1.0/gostumble/simonholgate.wordpress.com/38/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/stumble/simonholgate.wordpress.com/38/" /></a> <a href="http://feeds.wordpress.com/1.0/godigg/simonholgate.wordpress.com/38/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/digg/simonholgate.wordpress.com/38/" /></a> <a href="http://feeds.wordpress.com/1.0/goreddit/simonholgate.wordpress.com/38/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/reddit/simonholgate.wordpress.com/38/" /></a> <img alt="" border="0" height="1" src="http://stats.wordpress.com/b.gif?host=simonholgate.wordpress.com&amp;blog=10488004&amp;post=38&amp;subd=simonholgate&amp;ref=&amp;feed=1" width="1" />              </p>
              <p class="meta"><a href="http://simonholgate.wordpress.com/2012/07/01/importing-data-to-hbase/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://technomancy.us/" title="Technomancy">Phil Hagelberg</a></h2>
              <p>
July 01, 2012 04:43 AM                <br />
                <a href="http://technomancy.us/">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://technomancy.us/162">in which the facts are laid out concerning swarm coding</a></h2>
              <p>
<p>I've found that user groups often fall into a pattern of lecture
  style presentations with slide shows. Since it's usually difficult
  to find presenters, often it ends up that after a while whoever
  founded the group speaks repeatedly. This leads to burn-out and
  isn't sustainable even if you're fortunate enough to have
  presenters who are skilled public speakers. It's also simply not a
  very good way to learn; your mind is a lot more involved in a when
  engaged in active discussion.</p>

<p>This is why at the <a href="http://seajure.github.com">Seattle
  Clojure group</a> we follow a different model that focuses on code
  and participation. A few months ago at
  the <a href="http://clojurewest.org">ClojureWest conference</a> I
  gave
  a <a href="https://github.com/strangeloop/clojurewest2012-slides/raw/master/Hagelberg-SwarmCoding.pdf">short
  talk</a> (PDF) explaining the motivation behind this style. I call
  it "swarm coding".</p>

<img align="right" alt="school at athens" src="http://technomancy.us/i/athens.jpg" />

<p>The Socratic Method is a form of learning that centers around
  getting people to ask the right questions rather than just
  telling. It's often used in group settings with classical
  education methods, and I've found it's a great way to run a user
  group meeting as well. If you can get everyone hooked in to
  participate in a shared editor session and come up with an idea
  for a small project, you can collaborate in a unique, engaging way
  and learn a lot.</p>

<p>We've found SSH, tmux, and Emacs to be a great combination for
  this. The host prepares his machine with a new user created just
  for the purpose of swarming, and everyone is given the username,
  hostname, and password to log in over SSH.</p>

<p>
  <kbd>$ ssh swarm@zuse.local</kbd><br />
  <kbd>$ tmux attach</kbd>
</p>

<p>Once logged in, running <kbd>tmux attach</kbd> allows a user to
  join an in-process session started by the host, and control can be
  passed around as discussion progresses. If someone has an idea for
  how to address a certain problem, they can just try it out
  straight away.</p>

<p>Usually skill levels vary widely in group settings like this, so
  it's important for the facilitator to be able to gauge them,
  usually by just getting quick introductions from everyone in the
  group beforehand. The temptation is often for those that really
  know their way around to just power through and write some
  slick code, perhaps pausing to explain a particularly subtle
  technique. It's more rewarding to let control pass around the
  group and try to keep everyone involved, but it can be
  difficult.</p>

<p>It's probably a good idea to dedicate a meeting to a tooling
  workshop at first to get people started. Especially with Clojure
  the initial setup can be intimidating, so the newcomers find
  it valuable to get help just getting the basics working on their
  laptops. While I don't recommend newcomers try to learn Emacs as
  their main editor at the same time as picking up a new
  language, it really makes collaboration over SSH much easier, so
  basic familiarity is helpful.</p>

<p>I've coded
  up <a href="https://github.com/technomancy/swarming">some
  scripts</a> to automate setup of swarming sessions. It handles
  getting basic dotfiles in place and provides instructions for how
  to join a session when people log in. Right now it only supports
  Clojure, Leiningen, and Emacs, but there's no reason it couldn't
  be extended for Vim or other languages.</p>

<p>There are a few things to watch for here. First of all, we've
  only tried this with groups of up to 12 participants. Group
  dynamics break down when things get larger, so you may want to
  split up into groups. You could try splitting a project into
  independent parts that could be coded by each group if your
  project divides naturally this way, or you could try both tackling
  the same problem and comparing solutions at the end.</p>

<p>Picking a project to try is also tricky. You want it to be
  somewhat useful and not contrived, but you also need it to match
  the skill level of the group and still be able to make progress on
  it in a couple hours. It's a lot of fun if you end up with a
  project you can publish to Clojars or Heroku at the end.</p>

<p>Happy Hacking!</p>              </p>
              <p class="meta"><a href="http://technomancy.us/162">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://mattyjwilliams.blogspot.com/search/label/clojure" title="mattyw">Matty Williams</a></h2>
              <p>
June 30, 2012 10:30 PM                <br />
                <a href="http://mattyjwilliams.blogspot.com/search/label/clojure">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://mattyjwilliams.blogspot.com/2012/06/synchronized-promise-queues-in-clojure.html">Synchronized (promise) queues in Clojure</a></h2>
              <p>
<div>I've mentioned to a few people at work recently that my favourite built in library in python is the <a href="http://docs.python.org/library/queue.html">queue</a>. The reasons being that the idea is simple, the interface is simple, and you can do all sorts of amazing things with it. We use it as the basis for turning our asynchronous automation interface into a synchronous one and it essentially provides the entire basis for our regression test suite.<br /><br />In fact, I like it so much I've decided to write it in clojure<br /><br /><a href="https://github.com/mattyw/sync-q">sync-q</a><br /><br />There's instructions there about how to use it in your own applications<br /><br />The idea started back when I was reading <a href="http://www.clojurebook.com/">Clojure Programming</a> and discovered promises that came in with clojure 1.3.0.<br /><br />Promises are essentially empty boxes for you to put stuff in. When you want to read from a promise you will block until the promise has a value<br /><br /><pre><br />(def p (promise))<br /><br />@p ;; This will block until we have a value<br /><br />(deliver p :hello)<br /><br />@p<br />:hello<br /><br />(realized? p) ;; has the promise got a value? <br />true <br /></pre><br />From this point on that promise isn't available for delivering to as it already has a value.<br /><br />This makes it very easy to implement python's queue class. You just need something that behaves like a queue and fill it with promises.<br /><br />creating a new queue becomes creating a queue with one promise in it.<br /><br />putting an item onto the queue becomes delivering to the item at the front of the queue then adding a new promise to the end.<br /><br />getting is just as simple as getting the item at the front of the queue. <br /><br />The downside is you need special functions to get the size of the queue and emptiness as you only count promises that have been realised  <br /><br />The first version took a couple of hours and was fun, it will be great to know if anyone makes use of it.</div><div class="blogger-post-footer"><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/521133349049053228-4165545271755371979?l=mattyjwilliams.blogspot.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://mattyjwilliams.blogspot.com/2012/06/synchronized-promise-queues-in-clojure.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://www.andrewhjon.es" title="Andrew Jones">Andrew Jones</a></h2>
              <p>
June 30, 2012 07:12 AM                <br />
                <a href="http://www.andrewhjon.es">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://www.andrewhjon.es/142343729">Shall we use Clojure - my presentation</a></h2>
              <p>
<p>
	</p><p>This is the presentation that I gave at work to introduce Clojure.</p>

<h1>Clojure, shall we use it?</h1>

<h2>Aims</h2>

<p>I have three separate aims for this talk. I’d like to convince the
programmers here to write their next service in Clojure. I’d like to
convince the managers here that their programmers are going to be a
lot more effective writing Clojure. I’d like to convince those that
look after the running code that Clojure will be at least as stable as
the Java services that we have at the moment.</p>

<p>I’m going to do this first by introducing the language Clojure,
explain what it is, and why I like it. I’ll then show you a little
example of a running Clojure service. Clearly I’m only going to be
able to paint in very broad brush strokes what Clojure is all about,
so I also hope that after this talk you’re going to want to find out a
bit more. I’ll give you a couple of pointers for that.</p>

<p>Finally, I’d like to leave time for discussion.</p>

<h2>What is Clojure?</h2>

<p>Clojure is a dynamic, functional language that runs on the Java
Virtual Machine.</p>

<h3>Dynamic</h3>

<p>This means that it’s possible to do at run time things that are only
possible at compile time in other languages, if at all. Python and
Ruby are dynamic languages that you might know about already.</p>

<h3>Functional</h3>

<p>In a nutshell, a functional language is one that emphasises the
evaluation of functions and avoids state. This is in contrast to
imperative programming which emphasises changes in state.</p>

<p>In a functional language functions are first-class citizens; you can
use them wherever you’d use a variable. They’re the basic building
blocks of the language: you can create them, add them to lists, return
them from other functions and pass them as arguments to functions. In
fact, there’s a special name for functions that take other functions
as arguments: they’re called higher order functions. These are pretty
important in Clojure.</p>

<h3>Runs on the JVM</h3>

<p>Clojure is a compiled language. It compiles to JVM bytecode in the
same way that Java does.</p>

<h2>Why is it interesting?</h2>

<p>Why do I think it is worth half an hour of your time to listen to me
talk about this language? To some extent, I think you’ve got to start
writing programs with Clojure to realise how cool it is, but I’d like
enumerate a few reasons why I find it interesting.</p>

<h3>Succinct</h3>

<p>Programs written in Clojure are small. Really small. It’s incredible
how much you can pack into a few lines of code.</p>

<p>Who cares? Why do I think that this is worth mentioning?</p>

<p>Consider both writing and maintaining programs. If everything else is
equal it’ll take less time to write a program in a succinct language
than in one that isn’t.</p>

<p>The cost of a program is overwhelmingly dominated by maintenance
effort. A small program is easier to read, easier to refactor and
easier to maintain. There’s a large advantage in being able to have
most of a service on your screen at one time. It’s great to be able to
reason about aspects of a program that are all on the screen at the
same time.</p>

<p>Given that I think succinctness is important, how succinct is Clojure?
I decided to measure it.</p>

<p>Over a couple of evenings I rewrote the translations service in
Clojure. <a href="http://ninjakoala.com/">Neil</a> wanted to see what the Clojure
fuss was all about, so he re-wrote the logging service. I counted all
of the program lines.</p>

<p><img alt="Chart comparing lines of code in Java and Clojure projects" src="http://getfile8.posterous.com/getfile/files.posterous.com/temp-2012-06-30/vmCqcDoixvFzuzAbdjExoxbeAwCActuwvJAygeyGeaxlwvbnjjBcxAequDzu/clojure.009.png" /></p>

<p>Here are the results. No I’ve not forgotten to put Clojure on the
graph. Its that small. I’ve not included any tests, unit or
acceptance. There is a small caveat: we both used Mongo rather than
MySQL. I don’t think that accounts for the vast difference.</p>

<p>If we also include the XML configuration it looks like this. There are
a couple of hundred more lines.</p>

<p><img alt="Chart comparing lines of code in Java and Clojure projects, with XML included" src="http://getfile2.posterous.com/getfile/files.posterous.com/temp-2012-06-30/egIIFfbtIboFvBJjgHDmtoomklrJDxohHbjzbHvBehfnnwFeabjiHcvjBvnl/clojure.010.png" /></p>

<h4>Perl</h4>

<p>Perl is also a succinct language. It looks a bit like this. I can’t
remember what this bit of code does. It’s not really clear. I can
promise you Clojure isn’t like this.</p>

<div class="CodeRay">
  <div class="code"><pre>sort{($a=~/([aeoui])/)[0]cmp($b=~/([aeiou])/)[0]}@_}
1234567890123456789012345678901234567890123456890123</pre></div>
</div>


<h3>Simple</h3>

<p>I mean this in Rich Hickey’s sense of the word. Rich Hickey is the
creator of Clojure, and he designed it to be simple. If you’ve not
already seen it, I’d highly recommend watching Rich’s talk
<a href="http://www.infoq.com/presentations/Simple-Made-Easy">Simple Made Easy</a>. If
you have already seen it, I’d recommend watching it again!</p>

<p>Clojure has a few primitive types: Maps, lists, vectors, sets and
functions. You can compose the primitive types into structures that
represent the data that you’re processing.</p>

<p>Clojure has a very large number of functions that operate on the basic
types.</p>

<p>In Java or C# it’s necessary to create a type to hold data. To use the
data you must then write a method that works with an instantiation of
the type. In Clojure you’ll find that most things that you want to do
are compositions of the core functions and data types.</p>

<p>Alan Perlis said ‘It is better to have 100 functions that operate on
one data structure than 10 functions that operate on 10 data
structures’.</p>

<p>Clojure reflects this.</p>

<h3>Java Interop</h3>

<p>As I said earlier, Clojure runs on the JVM. This is important because
it enables an important feature. Clojure can use Java classes very
easily. You can create instances of classes, call static methods and
implement interfaces very easily. This can be handy if you find a
library that exists for Java for which there isn’t a Clojure
equivalent. It’s very easy to wrap it and use it in your program.</p>

<p>The reverse is also true. It’s possible to write a Clojure program and
call it from Java. I’ve not tried it, nor can I think of a reason to
give it a go at the moment.</p>

<p>We have all of Java available to us as Clojure programmers.</p>

<h3>Jetty &amp; JBoss</h3>

<p>We can use Clojure applications in the same way that we use our Java
applications. We can choose to create either a war or a jar. The war
will work with Jetty and JBoss identically to our Java wars. I’ve
created a service that has a main method that runs Jetty and kicks of
the service within it. There’s no difference here. It’s just an app
that runs on the JVM.</p>

<h3>Recruitment</h3>

<p>I hadn’t considered this until Ben mentioned it to me. By using
exciting new technologies we’ll be able to attract developers who are
interested in working with exciting new technologies.</p>

<h3>Multi-threaded</h3>

<p>Clojure makes it a lot more easy to write correct multi-threaded
programs. Our servlets are multi-threaded, and I’ve had to solve a
couple of problems that were cause by poor threading. By using Clojure
hopefully we’ll make it easy to get right.</p>

<h2>Show me the brackets</h2>

<p><img alt="Example of Clojure syntax" src="http://getfile3.posterous.com/getfile/files.posterous.com/temp-2012-06-30/ibtlyApAuzqfclqnrHciwIuyxbfGaovcpwpzIroxDyAhbanyeJIrdzzyerln/clojure.019.png" /></p>

<p>I’d like to show you the syntax of Clojure. In Java you write
<code>method()</code>; the equivalent in Clojure is <code>(function)</code>. If you want to
pass an argument it’s <code>method(arg)</code> and <code>(function arg)</code>. If you want
more than one argument in Clojure you separate the arguments with
whitespace: <code>(function arg1 arg2 arg3)</code>. Commas are whitesapce so
<code>(function arg1, arg2, arg3)</code> is valid, but not idiomatic.</p>

<p>Create maps in Clojure using curly braces: <code>{"key" "value"}</code> is a map
between the key <code>"key"</code> and the value <code>"value"</code>. It’s more usual to
use Clojure keywords as the key in a map. Keywords are symbolic
identifiers that evaluate to themselves. <code>{:key1 "value1" :key2
"value2"}</code> is a map with two keyword keys and two values.</p>

<p>Anyone who complains that there are too many brackets in Clojure note
that the Java example has four chevrons, four parenthesis and four
curly brackets, compared to Clojure’s two parenthesis and two curly
brackets.</p>

<p><img alt="Pie chart showing numbers of brackets in Java and Clojure examples" src="http://getfile6.posterous.com/getfile/files.posterous.com/temp-2012-06-30/ujEEnqCqsEJogmAnsulEiGpeGehbmzcqeiyxItvHqGuDwaybBdoHbhuByzaH/clojure.020.png" /></p>

<h2>Example</h2>

<p>I’d like to show you an example of a Clojure service.</p>

<div class="CodeRay">
  <div class="code"><pre>(ns example.core
  (:use [compojure.core]
        [compojure.handler]))

(defroutes app
  (GET "/" [] "Hello World!"))</pre></div>
</div>


<p>You can see at the top the equivalent to import statements. This
service accepts calls to the root resource and responds with the
string “Hello World!”. Hopefully this not only convinces you of the
brevity of the language, but also it’s readability.</p>

<p>Let’s say that I’ve realised that I don’t want to say “Hello
World!”. Rather I’ve decided that I want to say “Hi!”. It’s easy to
make this change, and look: I don’t have to recompile or redeploy, the
change is visible immediately. There’s a watcher that notices when the
file changes, and reloads it. The ability to reload like this is a
feature of Clojure that the HTTP library that I’m using takes
advantage of, not one of the HTTP library.</p>

<h2>Want to learn more?</h2>

<p>If you want to dive right in I’d heartily recommend buying either
Clojure Programming or The Joy Of Clojure. Both are great books, but
are very different.</p>

<p>Clojure Programming starts as a gentle introduction, and gives a
comprehensive overview of the language. The Joy Of Clojure has been
described as a Clojure fire-hose. It’s full of great examples of what
such a powerful language, but beginners beware!</p>

<p><a href="https://twitter.com/#!/andrew_jones">@andrew_jones</a></p>
	
<p></p>

<p><a href="http://www.andrewhjon.es/142343729">Permalink</a> 

	| <a href="http://www.andrewhjon.es/142343729#comment">Leave a comment  »</a>

</p>              </p>
              <p class="meta"><a href="http://www.andrewhjon.es/142343729">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1a0cc5a5b729058f58307f00a728dc72" title="Asymmetrical View">Asymmetrical View</a></h2>
              <p>
June 30, 2012 04:00 AM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1a0cc5a5b729058f58307f00a728dc72">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://asymmetrical-view.com/2012/06/30/Narcissism.html">Narcissism, or don't try this at home</a></h2>
              <p>
<h1>Narcissism, or don’t try this at home</h1>
<p>I’m a frequent reader of <a href="http://news.ycombinator.com" rel="nofollow" target="_blank">Hacker News</a> and when I saw the post about <a href="http://www.hackerrank.com/" rel="nofollow" target="_blank">HackerRank</a> and challenge to be invited into the beta if you were on the leader board I had a hard time resisting.</p>
<p>I played a few games manually to make sure I understood the game.  Since you can take only 1-5 candies, and to win you must force your opponent to leave you with less than 6, then at the last move you must leave your opponent with 6 candies.  So at each move you must leave them with a number of candies divisible by 6, meaning my next move should always be: <code>numCandies % 6</code></p>
<p>The top entries already had hundreds of games solved so there was no way I was going to get anywhere unless I automated the game playing.</p>
<p>I opened up Chrome’s developer tools and watched the network as I played a game.  Things looked straightforward enough based on the <span class="caps">POST</span> and <span class="caps">PUT</span> requests used to start a game and update it (make the next move) and detection of a completed game was right in the response from performing your next move: <code>{game: {... solved: true}}</code></p>
<p>I wanted to optimize for my time, not necessarily run-time.  I thought of using <code>curl</code> (too much work), of using Ruby’s Mechanize, or Clojure, but all of these solutions would require authenticating to the site first.  I wanted to start with automating the game so I opted to write up some javascript and paste it into the console so it could be called.</p>
<p>I started by writing a basic skeleton, and a <code>startGame</code> function to initiate a game, then I cut and pasted it into the javascript console so I could try it interactively.</p>
<div class="highlight"><pre><code class="javascript"><span class="nx">Foo</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="p">{</span><span class="nx">autoContinue</span><span class="o">:</span> <span class="kc">true</span><span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">startGame</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">numCandies</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s1">'POST'</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">'/splash/challenge.json'</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">n</span><span class="o">:</span> <span class="nx">numCandies</span><span class="p">,</span>
        <span class="nx">remote</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">utf8</span><span class="o">:</span> <span class="s1">'✓'</span>
      <span class="p">},</span>
      <span class="nx">success</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">playRound</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">playRound</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'playRound'</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">self</span><span class="p">;</span>
<span class="p">}());</span>
</code></pre>
</div>
<p>I used some bash commands to make the iteration go faster on my Mac:</p>
<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>vim hrank.js
<span class="c"># background vim, and press up:</span>
<span class="nv">$ </span>pbcopy &lt; hrank.js <span class="o">&amp;&amp;</span> <span class="nb">fg</span>
</code></pre>
</div>
<p>This let me make changes and paste them back into chrome with just a few keystrokes.  Calling <code>startGame</code> indeed worked – I could see the response from the server that a new game was begun.  From there I worked out the rest of the implementation.  The only thing to really point out is <code>autoContinue</code> – I used that as a flag and also used a callback (<code>self.continue</code>) to make it easier to step through the process while I was debugging my code and could then set <code>autoContinue</code> to true when I thought it was ready to go.</p>
<h2>Full Program</h2>
<p>The full JavaScript module that I used is below.</p>
<div class="highlight"><pre><code class="javascript"><span class="nx">Foo</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="p">{</span><span class="nx">autoContinue</span><span class="o">:</span> <span class="kc">true</span><span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">startGame</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">numCandies</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s1">'POST'</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">'/splash/challenge.json'</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">n</span><span class="o">:</span> <span class="nx">numCandies</span><span class="p">,</span>
        <span class="nx">remote</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">utf8</span><span class="o">:</span> <span class="s1">'✓'</span>
      <span class="p">},</span>
      <span class="nx">success</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">playRound</span>
    <span class="p">});</span>
  <span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">nextMove</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">current</span> <span class="o">%</span> <span class="mi">6</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">playRound</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nextMove</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'play round: '</span> <span class="o">+</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">//if (data.exit) {</span>
    <span class="c1">//  console.log('Game is over!');</span>
    <span class="c1">//  return;</span>
    <span class="c1">//}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">game</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">game</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">solved</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Game is solved!'</span><span class="p">);</span>
      <span class="nx">self</span><span class="p">.</span><span class="k">continue</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">gameWon</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// n the starting numCandies</span>
    <span class="c1">// current the number of candies left</span>
    <span class="c1">// limit: not sure wha thtis is</span>
    <span class="c1">// moves array of moves taken?</span>
    <span class="nx">nextMove</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">nextMove</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">current</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'the next move is: '</span> <span class="o">+</span> <span class="nx">nextMove</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">nextMove</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">'Whoops something went wrong, the next move is zero? '</span><span class="p">);</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">self</span><span class="p">.</span><span class="k">continue</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s1">'/splash/challenge.json'</span><span class="p">,</span>
        <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">move</span><span class="o">:</span> <span class="nx">nextMove</span><span class="p">,</span>
        <span class="nx">remote</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nx">utf8</span><span class="o">:</span> <span class="s1">'✓'</span>
        <span class="p">},</span>
        <span class="nx">success</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">playRound</span>
      <span class="p">});</span>
    <span class="p">};</span>


    <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">autoContinue</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="k">continue</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">playGames</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">startingValue</span><span class="p">,</span> <span class="nx">numGames</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">currentValue</span> <span class="o">=</span> <span class="nx">startingValue</span> <span class="o">-</span> <span class="p">(</span><span class="nx">startingValue</span> <span class="o">%</span> <span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">numGames</span> <span class="o">=</span> <span class="nx">numGames</span><span class="p">;</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">gameWon</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">numGames</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'games played, currentValue: '</span> <span class="o">+</span> <span class="nx">currentValue</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">numGames</span> <span class="o">=</span> <span class="nx">numGames</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
      <span class="nx">currentValue</span> <span class="o">+=</span> <span class="mi">6</span><span class="p">;</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'playing next game['</span> <span class="o">+</span> <span class="nx">numGames</span> <span class="o">+</span> <span class="s1">']: '</span> <span class="o">+</span> <span class="nx">currentValue</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">startGame</span><span class="p">(</span><span class="nx">currentValue</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">numGames</span> <span class="o">=</span> <span class="nx">numGames</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'playing next game['</span> <span class="o">+</span> <span class="nx">numGames</span> <span class="o">+</span> <span class="s1">']: '</span> <span class="o">+</span> <span class="nx">currentValue</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">startGame</span><span class="p">(</span><span class="nx">currentValue</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">self</span><span class="p">;</span>
<span class="p">}());</span>
</code></pre>
</div>
<h2>Glitch?</h2>
<p>I think that there is a glitch in the server-side code, during some of the games the current count of candies would regress (see in the log where <code>current</code> jumps from 734 to 870?), so I added a conditional to detect that and halt the automated play (see the check for <code>nextMove &lt; 1</code>).</p>
<p><a rel="nofollow"><img width="600" /></a></p>
<p>Setting it off and watching it run I got my ego boost and my name started climbing the board.</p>
<h2>Conclusion</h2>
<p>I strongly recommend against you taking and running this code as playing the game uses resources on the server side.  After I had gotten up towards the top I stopped running the script.  It also uses quite a bit of <span class="caps">CPU</span> on your machine when running inside Chrome and as the starting count gets larger the number of moves increases linearly so each subsequent game takes longer and longer to play (you don’t get credit for replaying the same game).  Also, I’m not giving everything away, the maximum starting value at the time of this writing is 2048, which results in about 341 possible games – but if you look at the leaderboard there are players with higher scores.</p>
<p>I hope by the time you’re reading this Hacker Rank will have either come up wiht a new challenge, or prevented (hopefully) this method from being used to ‘game’ the game.</p>              </p>
              <p class="meta"><a href="http://asymmetrical-view.com/2012/06/30/Narcissism.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1d37e15aab3f0c5d82f165e65aa0c034" title="Jacek Laskowski">Jacek Laskowski</a></h2>
              <p>
June 29, 2012 08:02 AM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1d37e15aab3f0c5d82f165e65aa0c034">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://feedproxy.google.com/~r/blog-japila-pl/~3/A_RyAh-9FTA/">Two new articles about OSGi Applications and WebSphere AS 8</a></h2>
              <p>
<p>I’m really into <strong>OSGi Applications</strong> recently and it burns all my time I could’ve spent on the other niceties – Clojure including. It’s a well-spent time, though, and I could even write two new articles on my way to fully grasp the concept of developing modular OSGi Applications with <strong>IBM WebSphere Application Server V8</strong>:</p>
<p><a href="http://jaceklaskowski.pl/wiki/Provisioning_new_bundle_versions_to_OSGi_Applications_-_WABs_in_WebSphere_Application_Server_V8" rel="nofollow" target="_blank">Provisioning new bundle versions to OSGi Applications – WABs in WebSphere Application Server V8</a></p>
<p><a href="http://jaceklaskowski.pl/wiki/Provisioning_bundles_to_OSGi_Applications_from_Internal_bundle_repository_in_WebSphere_AS_V8" rel="nofollow" target="_blank">Provisioning bundles to OSGi Applications from Internal bundle repository in WebSphere AS V8</a></p>
<p>Once I wrote them and understood a bit more the other <strong>four</strong> article ideas sprung to my mind. More to follow soon, but without more eyeballs helping me to find the right way into the OSGi nirvana I surely burn myself easily. Would you mind giving the articles a go? I’d appreciate.</p>
<p>The articles present OSGi Applications with OSGi Blueprint and Java EE. Even though the articles use IBM toolset I believe they’re easily applicable to the other Enterprise OSGi runtimes like JBoss AS 7, GlassFish 3 or Apache Geronimo 3. I wish I heard from people about their experiences with the other application servers as I won’t have much time to test them out myself. Anyone?</p>
<img height="1" src="http://feeds.feedburner.com/~r/blog-japila-pl/~4/A_RyAh-9FTA" width="1" />              </p>
              <p class="meta"><a href="http://feedproxy.google.com/~r/blog-japila-pl/~3/A_RyAh-9FTA/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b55991297db4be15998c4a92a711a3a9" title="David Nolen">David Nolen</a></h2>
              <p>
June 29, 2012 01:21 AM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b55991297db4be15998c4a92a711a3a9">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://dosync.posterous.com/lisp-doesnt-matter">Lisp doesn't matter</a></h2>
              <p>
<p>
	</p><p>Lisp doesn’t matter.</p>
<p>There I said it.</p>
<p>If you follow this blog, or read my Twitter feed you’ll probably know that I’m deeply involved in the Clojure community. But the level of my involvement is founded on two fundamental things. First, Clojure allows me to explore various aspects of computer science that I find interesting without exerting ridiculous amount of time and energy. I have a job at the New York Times, family, good friends, and other personal creative projects. I have only a few hours a week to explore what I consider to be hard, interesting problems - I need an efficient tool. The second reason is equally important - what’s enjoyable about working on hard, interesting problems without a receptive audience? My first degree is in Film, for me communicating with an audience is critical.</p>
<p>Audience is the main reason I don’t spend too much energy on Common Lisp and Racket (both incredible languages). Life is too short and the audiences are simply too small.</p>
<p>Is community everything? Of course not. The tool you pick will make exploring certain problems easier or harder depending on the constraints you impose - time, generality, performance, extensibility, etc.</p>
<p>Wait? But what problems am I actually interested in?</p>
<p>Do yourself a favor and watch the following videos - Sussman’s <a href="http://www.infoq.com/presentations/We-Really-Dont-Know-How-To-Compute" rel="nofollow" target="_blank">We Really Don’t Know How To Compute!</a>, Rich Hickey’s <a href="http://www.infoq.com/presentations/Simple-Made-Easy" rel="nofollow" target="_blank">Simple Made Easy</a>, and Alan Kay’s presentation for the <a href="http://turing100.acm.org/index.cfm?p=webcast" rel="nofollow" target="_blank">ACM's Turing Centenary</a>. The same theme comes up again and again. WHAT not HOW.</p>
<p>So what really matters for me is chipping away at John McCarthy’s challenge that we should infuse our programming languages with a little more Common Sense. When your goal is so far fetched and optimistic it really helps to have a receptive audience. So I thank each and everyone of you who has ever responded to anything I’ve posted or tweeted.</p>
<p>Hooking up <a href="https://github.com/clojure/core.logic" rel="nofollow" target="_blank">core.logic</a> to <a href="http://www.chris-granger.com/2012/06/24/its-playtime/" rel="nofollow" target="_blank">Light Table</a> is gonna rock.</p>
<p> </p>
	


<p><a href="http://dosync.posterous.com/lisp-doesnt-matter" rel="nofollow" target="_blank">Permalink</a> 

</p>              </p>
              <p class="meta"><a href="http://dosync.posterous.com/lisp-doesnt-matter">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://blog.malcolmsparks.com" title="Clojure in a bank">Malcolm Sparks</a></h2>
              <p>
June 28, 2012 08:07 PM                <br />
                <a href="http://blog.malcolmsparks.com">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://blog.malcolmsparks.com/?p=94">The UK Government should take a look at Clojure</a></h2>
              <p>
<p>Today saw the launch of a <a href="http://www.cabinetoffice.gov.uk/sites/default/files/resources/CM8353_acc.pdf">UK Government White Paper on Open Data</a>.</p>
<p>In his forward, Francis Maude writes :-</p>
<blockquote><p>
  “Data is the 21st century’s new raw material…”
</p></blockquote>
<p>At EuroClojure this year I spoke about the numerous strengths of Clojure as an<br />
enabling technology to release trapped data and onto the web. I think<br />
this is one of Clojure’s best kept secrets.</p>
<p>Then there are examples of Clojure’s strengths in processing data in<br />
order to find new insights.</p>
<p>And at last Tuesday’s <a href="http://groups.google.com/group/london-clojurians">London Clojure Dojo</a> I witnessed a powerful example<br />
of how Clojure can consume and leverage data on the web.</p>
<p>Perhaps to mark the centenary of Alan Turing’s birth, 4 fellow<br />
Clojurians chose to create a chatbot that could engage humans in<br />
conversation. In the space of an hour-and-a-half they had created a demo<br />
from nothing. The code, written using LightTable, showed how they had<br />
‘cheated’ by using the user’s input to drive a search against Twitter,<br />
processing the JSON results and printing back a response. (I, for one,<br />
was totally taken in at first however).</p>
<p>The impressive thing for me was not the ‘fake AI’ but the speed at which four<br />
developers could craft something that sourced data from the web and<br />
manipulated it in such an effortless, almost nonchalent, manner.</p>
<p>I commented after the demonstration that I strongly felt this is how<br />
programming will be in 10 years time. Future programmers just won’t<br />
understand why things were seemingly so difficult for us today – the<br />
industry is awash with chatter about efficient serialization formats,<br />
parsers, DSLs, middleware, integration technologies – and yet these guys<br />
made it all look so easy. Once you’ve mastered Clojure, of course, it<br />
is.</p>              </p>
              <p class="meta"><a href="http://blog.malcolmsparks.com/?p=94">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://drknucklehead.wordpress.com" title="Dr. Knucklehead's Blog » Clojure">Dr. Knucklehead</a></h2>
              <p>
June 28, 2012 06:57 PM                <br />
                <a href="http://drknucklehead.wordpress.com">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://drknucklehead.wordpress.com/2012/06/28/pulling-data-from-clojure-data-xmlparse/">Pulling Data From clojure.data.xml/parse</a></h2>
              <p>
<p>The last time I started processing XML data it was for hourly reads, one of three daily delimited (csv/xml) data “reports” that come with our AMR (water) product. At the time, I was finishing up the “AMR” store/forward/reporting system written primarily in Python, and there’s a Django web interface as well.</p>
<p>Since then, I started learning and implementing small tool-size applications in Clojure, and I thought it might be interesting to process XML data using Clojure.</p>
<p>First I turned to clojure-xml, only to realize <em>parse</em>  realized the whole sequence. I wanted to be lazy, so I came across Clojure’s data.xml module. The particular report is for cuts and tampers (of the cable leading from the electronic endpoint to the water meter).<br />
After being parsed by data.xml/parse, the resulting data looks like this:</p>
<p></p><pre class="brush: clojure;">[:tag :TamperExport]

[:attrs {}]

The rest of the xml file was all content embedded with additional map tags.
</pre><p></p>
<p>So it was suggested on <a href="http://stackoverflow.com/questions/11232061/how-to-parse-keys-values-from-xml-datas-parsed-input" target="_blank" title="Additional XML Parsing">stackoverflow </a>to pull additional :content using the following function. Everything is included:</p>
<p></p><pre class="brush: clojure;">(defn ret-xml-data
   "Returns a map of the supplied xml file, as parsed by data.xml/parse."

   [xml-fnam]
   (let [input-xml (try
                      (java.io.FileInputStream. xml-fnam)
                      (catch Exception e))]

      (if-not (nil? input-xml)
         (xmld/parse input-xml)
         nil)))

(defn gen-xml-content-tree
   "Returns a tree-seq with :content extracted."

   [parsed-xml]
   (map :content (first (tree-seq :content :content (:content parsed-xml)))))

</pre><p></p>
<p>From this data, I can now evaluate the rest of the data as shown at the REPL</p>
<p></p><pre class="brush: clojure;">xml-lib.core=&gt; (def parsed-xml (ret-xml-data "test.xml"))
#'xml-lib.core/parsed-xml
xml-lib.core=&gt; (def cl1 (gen-xml-content-tree parsed-xml))
#'xml-lib.core/cl1
xml-lib.core=&gt; (def temp1 (first (second cl1)))
#'xml-lib.core/temp1
xml-lib.core=&gt; (def test-map (zipmap (keys temp1) (vals temp1)) )
#'xml-lib.core/test-map
xml-lib.core=&gt; test-map
{:content ("80580608"), :attrs {}, :tag :DeviceId}

</pre><p></p>
<p>parsed-xml comes directly from xml.data/parse.</p>
<p>c1 comes from  gen-xml-content-tree</p>
<p>Now, I can start parsing the data.</p>
<br />  <a href="http://feeds.wordpress.com/1.0/gocomments/drknucklehead.wordpress.com/797/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/drknucklehead.wordpress.com/797/" /></a> <a href="http://feeds.wordpress.com/1.0/godelicious/drknucklehead.wordpress.com/797/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/delicious/drknucklehead.wordpress.com/797/" /></a> <a href="http://feeds.wordpress.com/1.0/gofacebook/drknucklehead.wordpress.com/797/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/facebook/drknucklehead.wordpress.com/797/" /></a> <a href="http://feeds.wordpress.com/1.0/gotwitter/drknucklehead.wordpress.com/797/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/twitter/drknucklehead.wordpress.com/797/" /></a> <a href="http://feeds.wordpress.com/1.0/gostumble/drknucklehead.wordpress.com/797/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/stumble/drknucklehead.wordpress.com/797/" /></a> <a href="http://feeds.wordpress.com/1.0/godigg/drknucklehead.wordpress.com/797/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/digg/drknucklehead.wordpress.com/797/" /></a> <a href="http://feeds.wordpress.com/1.0/goreddit/drknucklehead.wordpress.com/797/" rel="nofollow"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/reddit/drknucklehead.wordpress.com/797/" /></a> <img alt="" border="0" height="1" src="http://stats.wordpress.com/b.gif?host=drknucklehead.wordpress.com&amp;blog=16221239&amp;post=797&amp;subd=drknucklehead&amp;ref=&amp;feed=1" width="1" />              </p>
              <p class="meta"><a href="http://drknucklehead.wordpress.com/2012/06/28/pulling-data-from-clojure-data-xmlparse/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4f8569a77c5ae170e4afd516f9543f32" title="Atomic Spin (Clojure posts)">Atomic Spin</a></h2>
              <p>
June 28, 2012 03:00 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4f8569a77c5ae170e4afd516f9543f32">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://spin.atomicobject.com/2012/06/28/using-clojure-to-find-duplicates-in-1password/">Using Clojure to Find Duplicates in 1Password</a></h2>
              <p>
<p><img alt="Login Screen" class="aligncenter size-full wp-image-86884" height="285" src="http://spin.atomicobject.com/wp-content/uploads/Login.jpg" title="Login" width="421" /><br />
The recent LinkedIn security breach (where millions of passwords were leaked and likely cracked) was a good reminder of why you really shouldn’t reuse passwords between different services.</p>
<p>For things I really care about, like online banking, I’ve always done a good job at keeping unique, secure passwords. Unfortunately, I once had a large number of inessential sites, like LinkedIn, that were all using the same older password — old enough that I could type it (while suspended upside down, blindfolded, and holding a conversation) in either Dvorak or QWERTY. Or on my iPhone.</p>
<p><span id="more-86860"></span></p>
<p>Remembering all the sites where I’ve used this password would be impossible. Fortunately, I’ve been using <a href="https://agilebits.com/onepassword/mac" rel="nofollow" target="_blank">1Password</a> for a few years now, long enough for essentially all of my passwords to be recorded. Even more fortunately, 1Password can easily export your entire password database to a handy, easily-parseable text file, letting you see which passwords you’re using where. </p>
<p>And most fortunately of all, this all looked like the perfect excuse to spend some more time getting familiar with Clojure.</p>
<h2>A Duplicate Password Finder in Clojure</h2>
<p>After some hacking, and maybe some <a href="http://newhollandbrew.com/beer/high-gravity-series/dragons-milk-ale-aged-in-oak-barrels/" rel="nofollow" target="_blank">Dragon’s Milk</a>, I finished my <a href="https://github.com/chrisfarber/password-duplicates" rel="nofollow" target="_blank">password duplicate finder</a>. It’s about 50 lines of Clojure and will read in your entire 1Password database, process it, and print out a report of reused passwords, sorted with worst-offenders at the top.</p>
<p>Using the script is easy if you have <a href="https://github.com/technomancy/leiningen" rel="nofollow" target="_blank">Leiningen</a> installed. First, export your 1Password database using the <code>File &gt; Export All &gt; Text File…</code> menu item.</p>
<p>Then:</p>
<p><code>% git clone https://github.com/chrisfarber/password-duplicates.git<br />
% cd password-duplicates<br />
% lein run ~/Desktop/passwords.txt</code></p>
<p>After the JVM gets up and running, you should quickly have an idea how much trouble you’re in.</p>
<h2>The Results</h2>
<p>An example output might look like:</p>
<blockquote><p>Password “abc123″ is used by 32 logins:<br />
	 500px.com<br />
	 Facebook<br />
	 Flickr<br />
	 Twitter<br />
	…<br />
Password “123abc” is used by 4 logins:<br />
	…
</p></blockquote>
<p>It’s possible to simply search for your LinkedIn password in the 1Password app to see where you’ve used that exact password, but there’s no easy way to detect all of your duplicates. </p>
<p>I hope that, if you were practicing bad security like I was, this tool can make it easier to clean things up by showing you all your duplicates at once.</p>              </p>
              <p class="meta"><a href="http://spin.atomicobject.com/2012/06/28/using-clojure-to-find-duplicates-in-1password/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://pipes.yahoo.com/pipes/pipe.info?_id=e94523cfeb242289dbe8c3c13824893a" title="Jayway team">Jayway team</a></h2>
              <p>
June 27, 2012 03:33 PM                <br />
                <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=e94523cfeb242289dbe8c3c13824893a">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://www.jayway.com/2012/06/27/finding-out-who-changed-what-with-datomic/">Finding Out Who Changed What with Datomic</a></h2>
              <p>
<p>Imagine that you one day were asked to implement the following requirement:</p>
<p>"As an Administrator, I want to know what has changed in the database since a given timestamp, and also who made the changes, so that I can feel secure that nobody will screw up the database."</p>
<p>In most projects, this would give you a major headache. There is no notion of time in a database. There might be a transaction log you could look in, or perhaps some audit functionality that you could enable, but in most systems, you would have to make significant changes to the data model. Even if you already have implemented some history functionality, you have most likely only done it for just a few of your entities, not all of them. In <a href="http://datomic.com" rel="nofollow" target="_blank">Datomic</a>, however, this is a one-liner. I'm serious. The notion of time is built into Datomic, and getting a database from back in time is a single function call away.</p>
<p>In this article, I will first describe how to get the individual entities that have changed since a given time, and then how to add <a href="http://en.wikipedia.org/wiki/Provenance" rel="nofollow" target="_blank">provenance</a> information, such as who performed a change. Let's start by creating a database with some sample data. If you want to follow along, you can <a href="http://datomic.com/product/downloads" rel="nofollow" target="_blank">download Datomic here</a>, and look at the <a href="http://datomic.com/company/resources/tutorial" rel="nofollow" target="_blank">Datomic Tutorial</a>. I'll demonstrate this in <a href="http://clojure.org/" rel="nofollow" target="_blank">Clojure</a>, but it works perfectly fine with Java as well. You can quite easily translate it into Java with some help of the tutorial. Queries are identical, and the function calls are very similar; it's the manipulation of the collections that differs, mostly.</p>
<h2>Setup</h2>
<p>I'll unzip the Datomic installation zip and change to the Datomic directory:</p>
<pre>$ unzip datomic-0.1.3164.zip
$ cd datomic-0.1.3164
</pre>
<p>First I'll start an interactive REPL:</p>
<pre>$ bin/repl-jline
Clojure 1.4.0
user=&gt;
</pre>
<p>The <code>user=&gt;</code> part is the prompt. Now I'll import the functions I'll need, making two of them directly callable as <code>q</code> and <code>db</code>, while the rest will be available under the <code>d</code> namespace (<code>d/transact</code>, <code>d/entity</code>, etc):</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>From the REPL, I'll now create an in-memory database, create a connection to it, load a schema, and then load some sample data. The function <code>d/transact</code> returns a <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html" rel="nofollow" target="_blank">Future</a>, and in Clojure, instead of calling <code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#get()" rel="nofollow" target="_blank">get()</a></code> on a Future, we can "dereference" it, either using the <code><a href="http://clojuredocs.org/clojure_core/clojure.core/deref" rel="nofollow" target="_blank">deref</a></code> function, as in <code>(deref future)</code>, or the equivalent reader macro <code>@</code>, as in <code>@future</code>.</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>As a test, I'll query for all communities with a name that begins with an 'A'. First we'll get all entities that have a community name attribute, and bind the entity ids to <code>?c</code> and the attribute value to <code>?n</code>. Note that it's perfectly fine to call regular Java or Clojure functions from within a query. Here I call the Java String <code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#compareTo(java.lang.String)" rel="nofollow" target="_blank">compareTo</a></code> method on the community name <code>?n</code>, and bind the result to <code>?res</code>. Then I call the less-than, <code><a href="http://clojuredocs.org/clojure_core/clojure.core/%3C" rel="nofollow" target="_blank">&lt;</a></code>, Clojure predicate function with the result from the <code>compareTo</code> call, limiting the result to those community names that are less than 'B', ie those that begin with an 'A'.</p>
<p>Let's first see how many communities we have that begin with an 'A':</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>OK, just nine. Let's pretty-print them. The result set is a regular Java HashSet. In order for it to pretty-print nicely, I'll turn the set into a Clojure <a href="http://clojure.org/sequences" rel="nofollow" target="_blank">sequence</a> using the function <code><a href="http://clojuredocs.org/clojure_core/clojure.core/seq" rel="nofollow" target="_blank">seq</a></code>:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<h2>Seeing What Changed</h2>
<p>Every attribute value belongs to a transaction. It's easy to query for the associated transaction and get its timestamp. I'll just add a fourth <code>?tx</code> element to the community name data clause, join with the transaction entity, and retrieve the transaction time as <code>?t</code>:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>We see that all these were added at 10:33:16. Note that <code>#inst "some time..."</code> is the Clojure literal for a timestamp. No need to fight with SimpleDateFormat or GregorianCalendar. We can treat it as an instance of a <code>java.util.Date</code>:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>Now let's make a change to one of the attributes. We'll rename 17592186045460 to "At Large in Ballard renamed":</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>A transaction is a list containing maps with changes. In this case, it's a single map with the id of the entity to change, and the new value. Let's print the nine communities and see what happened:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>We see that the community name was actually changed to "At Large in Ballard renamed" at 10:55:47. Now to the one-liner I mentioned in the beginning of this article. Here is the code for listing the entities that have changed since 10:33:16.436:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>We get the current database using <code>(db conn)</code>, pass that into <code>d/since</code> together with a timestamp to get the database as it was after that time. We pass that database value to <code>d/datoms</code> together with the sort order we want (<code>:eavt</code> = entity, attribute, value, transaction). That will give us a sequence of index elements. We then use <code>map</code> to get only the entities, and finally we remove duplicates using <code>distinct</code>.</p>
<p>We can make it easier to read, though. Using Clojure's threading macros, it would look like this:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004531" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>The threading macros that look like arrows turn normal forms inside-out, making them read more like a sequence of events. Instead of <code>(h (g (f x)))</code>, we get <code>(-&gt; x f g h)</code>, as in "pass x to f, then pass the result of that to g, then pass the result of that to h". The difference between <code><a href="http://clojuredocs.org/clojure_core/clojure.core/-%3E" rel="nofollow" target="_blank">-&gt;</a></code> and <code><a href="http://clojuredocs.org/clojure_core/clojure.core/-%3E%3E" rel="nofollow" target="_blank">-&gt;&gt;</a></code> is just where x is placed in case the functions take more than one argument.</p>
<p>Using the utility <code>macroexpand-all</code> and a few functions that take a number as an argument, we can see how the two macros differ. The <code>-&gt;</code> macro places x and each subsequent result as the first argument, while <code>-&gt;&gt;</code> places x and each subsequent result as the last argument:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>To prove it, here is the expansion of the re-written one-liner:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>Now, let's name those changed entities and have a closer look at them:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>For all of these, we'll call <code>d/entity</code> to get the entity, turn it into a sequence so we'll see all attribute values, and pretty-print it:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>We can see the transaction and what the entity looks like from the given timestamp.</p>
<h2>Provenance</h2>
<p>"Provenance, from the French provenir, "to come from", refers to the chronology of the ownership or location of a historical object."</p>
<p>Now let's add an attribute that we can use for keeping track of who made a change. We'll call it <code>:audit/user</code> and it's a string:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>With this attribute in place, we can start sending user info in all our transactions. Here is one that resets the community name that we changed earlier:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>We can again look at what's changed:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>Oh, that was more than we thought we would get. Of course, if we use the old timestamp, we get all the changes we've made since then, like adding the new attribute, for example. Let's use a more recent timestamp, say 11:13:23.642, to get just the latest change:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>That looks better. Let's look at those entities:</p>
&lt;noscript&gt;&lt;p&gt;View the code on &lt;a href="https://gist.github.com/3004813" rel="nofollow" target="_blank"&gt;Gist&lt;/a&gt;.&lt;/p&gt;&lt;/noscript&gt;
<p>Here we see that the community name has been reset to "At Large in Ballard", and that my user name was included in the transaction.</p>
<h2>Conclusion</h2>
<p>The notion of time is built into Datomic. Datomic provides functions for retrieving a database value "since" or "as of" a given time. This enables powerful features such as to easily retrieve the individual changes made since a given time.</p>
<p>Schemas in Datomic controls only the attributes, not the entities. There are no restrictions on what attributes can be added to an entity. This gives the developer a welcome flexibility, at the same time as it provides just enough structure.</p>
<p>Transactions are regular entities in Datomic. Together with the flexible schema, this makes it trivial to add any kind of data to each transaction, such as who made the change, why it was changed, using which client, and where the data comes from.</p>
<h2>References</h2>
<ul>
<li><a href="http://docs.datomic.com/javadoc/datomic/Database.html#since(java.lang.Object)" rel="nofollow" target="_blank">datomic.Database#since</a></li>
<li><a href="http://docs.datomic.com/javadoc/datomic/Database.html#datoms(java.lang.Object, java.lang.Object...)" rel="nofollow" target="_blank">datomic.Database#datoms</a></li>
<li><a href="http://docs.datomic.com/javadoc/datomic/Database.html#entity(java.lang.Object)" rel="nofollow" target="_blank">datomic.Database#entity</a></li>
<li><a href="http://datomic.com/company/resources/tutorial" rel="nofollow" target="_blank">Datomic Tutorial</a></li>
<li><a href="http://datomic.com/product/downloads" rel="nofollow" target="_blank">Datomic Downloads</a></li>
<li><a href="https://groups.google.com/forum/?fromgroups#!forum/datomic" rel="nofollow" target="_blank">Datomic Forum</a></li>
</ul>
<p>Thanks to Stuart Halloway and Jonas Enlund for inspiring code examples.</p>              </p>
              <p class="meta"><a href="http://www.jayway.com/2012/06/27/finding-out-who-changed-what-with-datomic/">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://clojure-android.blogspot.com/" title="Clojure Development on Android">Clojure Developmnet on Android</a></h2>
              <p>
June 26, 2012 10:18 PM                <br />
                <a href="http://clojure-android.blogspot.com/">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://clojure-android.blogspot.com/2012/06/on-macros-toasts-private-detectives-and.html">On macros, toasts, private detectives and experimental tools</a></h2>
              <p>
<div dir="ltr" style="text-align: left;">My GSoC project goes on and it's two weeks now since I've reported in the last time. Good thing is I have some news to share.<br /><br /><h2 style="text-align: left;">        Compilation modes</h2><div style="text-align: left;"><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: right; text-align: right;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-fXQjOmS-N5M/T-owu6mFPQI/AAAAAAAAAYI/TZXJP5ZLgbg/s1600/toast.png" style="clear: right; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://2.bp.blogspot.com/-fXQjOmS-N5M/T-owu6mFPQI/AAAAAAAAAYI/TZXJP5ZLgbg/s320/toast.png" width="192" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Runtime arity exceptions are no<br />longer scary if you're safe-for-ui!</td></tr></tbody></table>One interesting feature I've implemented in <b>neko</b> and <b>lein-droid</b> simultaneously is the support for different code ending up in different compilation modes (say, in debug and release ones). It is achieved by defining a value in the compile time  (boolean one in this case) that represents the AOT-compilation mode currently happening. While compiling lein-droid puts a special property on the JVM property map (via System/setProperty), and then neko.init/is-debug var is set to provide the mode info to other parts of the application.<br /><br />What is the use of this? For example, this allows to cleanly solve the "exceptions on the UI thread" problem. Brief description: all UI-specific code in Android (including UI handlers) runs on the so-called "UI thread". The issue with it is that it is uncontrollable from the REPL, so if an exceptions is uncaught on it - your program gets forcefully closed.<br /><br />It's perfectly fine if you are in production (actually, it isn't, but at least you're fully responsible for not handling that exception), but REPL-driven development system has to be more forgiving. After all, you don't want lose your runtime image for accidentally dividing by zero while developing. The solution comes with the feature described above. <span style="background-color: #eeeeee;">neko.debug/safe-for-ui</span> macro wraps any block of code in a try/catch. If an exception occurs it's message is displayed on the device screen, and the exception itself is available by using <span style="background-color: #eeeeee;">neko.debug/ui-e</span> function. But if compiled in the release mode all your code is on its own - with no extra security and no redundant code.<br /><br /></div><h2 style="text-align: left;">                 Notifications</h2><div style="text-align: left;"><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: right; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-hxHZpBaUEEk/T-owthaQowI/AAAAAAAAAX8/PqXv4BXrCVA/s1600/notify.png" style="clear: left; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://3.bp.blogspot.com/-hxHZpBaUEEk/T-owthaQowI/AAAAAAAAAX8/PqXv4BXrCVA/s320/notify.png" width="192" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Sadly though it fails to do what<br />it claims to but I'm working on it.</td></tr></tbody></table>This is rather a minor change but I've added a couple of wrappers to use Android notification subsystem (specifically <b>Toasts</b> and <b>Notifications</b>). The wrapper for the former is thin, only removing the necessity of providing a Context to create a toast. Application context is used in this case, it is captured with the call to <span style="background-color: #eeeeee;">defapplication</span> and stored as a singleton (gosh, I hate this word).<br /><br />The functions for Notifications are a bit more useful. The original Notification API seems inconsistent, with separate constructor and setter to specify different (but related) parameters. Anyway, that's how making a notification looks in neko. Notice how I provide a keyword ID instead of integer one. That's much more convenient to reference it if you need to remove the notification later. There's a stubbish declaration of the intent which I would certainly replace with something more clever. Also, icon could be specified once using <span style="background-color: #eeeeee;">neko.notify/set-default-notification-icon!</span> so the respective field in <span style="background-color: #eeeeee;">notification</span> function could be ignored.<br /><br /><pre class="brush:clojure">(fire :mynotification<br />      (notification :icon R$drawable/ic_launcher<br />                    :ticker-text "Reporting in from ClojureHQ"<br />                    :content-title "Android Conquer Squad"<br />                    :content-text "Initiate Clojure World Domination."<br />                    :action [:activity Intent/ACTION_WEB_SEARCH]))</pre><br /><h2 style="text-align: left;">             Project dependencies</h2><div style="text-align: left;"><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="float: right; margin-left: 1em; text-align: right;"><tbody><tr><td style="text-align: center;"><a href="http://3.bp.blogspot.com/-tHeM6IDMQ88/T-owuWLV3UI/AAAAAAAAAYA/qaPmdF2ELhI/s1600/sherlock.png" style="clear: right; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="320" src="http://3.bp.blogspot.com/-tHeM6IDMQ88/T-owuWLV3UI/AAAAAAAAAYA/qaPmdF2ELhI/s320/sherlock.png" width="192" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">Conjing some vals is never <br />bad if your name is Clojure</td></tr></tbody></table>No matter how fun it is to develop apps in Clojure, you'll have to be able to use the existing Java libraries. One problem with them is that they usually are not distributed in JARs, but rather as a separate projects. This crutch comes from the limitation of JAR format - it is tedious to extract the resources from the jar to compile it into your own project.<br /><br />Anyway Eclipse solves this by providing a feature called "library project". This means that you can set one project as a dependency for another so the latter can use both code and resources from the former. Now lein-droid has this ability too. You can use <span style="background-color: #eeeeee;">lein init</span> command in the existing repository to create <i>project.clj</i> file in it. lein-droid would automatically conclude if the project is a library or not (based on project.properties file). Then this project can be added under the <span style="background-color: #eeeeee;">:project-dependencies</span> in the <span style="background-color: #eeeeee;">:android</span> map (<i>sample/project.clj</i> contains an example).<br /><br />Using this feature I was able to build a Clojure HelloWorld application with <a href="http://actionbarsherlock.com/" target="_blank">ActionBarSherlock</a>. On the screenshot you can see the basic SherlockActivity with some tabs.</div><br /><h2 style="text-align: left;">             Optimizing build time</h2><div style="text-align: left;">Bad news first - I've wasted two days bashing my head against the incremental DEX-file generation. Unfortunately without any positive effect. I guess the feature is yet very experimental (that's why there is no documentation on it at all). The idea is to save some time by reusing existing DEX-files to append new classes to them. This may be very valuable since DEX generation is the most time-consuming process throughout the toolchain. But it doesn't work. Most of the time it fails while merging existing file with the new ones, sometimes it succeeds to create a DEX, but application doesn't work at the end. I've tried to debug dx tool but there's lots of byte twisting I need to have deeper knowledge in to understand what's wrong.<br /><br />However, I discovered the <i>--no-optimize</i> option which cut the DEXing time of my project from 110 seconds down to 80. That's 28% for free which I'm very happy with.</div><br /><h2 style="text-align: left;">             Wrapping up</h2><div style="text-align: left;">lein-droid is getting better and closer to the point to be considered a serious build tool for Android applications. neko (my fork specifically) is still very young and rough around the edges (especially the UI part), so it will get most of my attention in the upcoming days.<br /><br />On a side note, lein-droid 0.0.5 is available on Clojars, as well as neko 1.1.3.<br /><br />This concludes the news for today. Stay tuned, mail me for any reason you might think of and have fun!</div></div><img id="smallDivTip" style="border: 0px solid blue;" /></div><div class="blogger-post-footer"><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/7856174353097322988-3698184975116024235?l=clojure-android.blogspot.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://clojure-android.blogspot.com/2012/06/on-macros-toasts-private-detectives-and.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://blog.jayfields.com/search/label/clojure" title="Jay Fields' Thoughts">Jay Fields</a></h2>
              <p>
June 26, 2012 11:28 AM                <br />
                <a href="http://blog.jayfields.com/search/label/clojure">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://blog.jayfields.com/2012/06/reading-clojure-stacktraces.html">Reading Clojure Stacktraces</a></h2>
              <p>
Clojure stacktraces are not incredibly user friendly. Once I got used to the status quo, I forgot how much noise lives within a stacktrace; however, every so often a Clojure beginner will remind the community that stacktraces are a bit convoluted. You can blame the JWM, lack of prioritization from the Clojure community, or someone else if you wish, but the reality is - I don't expect stacktraces to change anytime soon. This blog entry is about separating the signal from the noise within a stacktrace. <br /><br />note: all code for this blog entry can be found at: <a href="http://github.com/blog-jayfields-com/Reading-Clojure-Stacktraces">http://github.com/blog-jayfields-com/Reading-Clojure-Stacktraces</a><br /><br />Let's start with a very simple example.<br /><br /> <br />Running (I'm using 'lein run') the above code you should get a stacktrace that looks like the output below.<pre><br />lmp-jfields03:reading-clojure-stacktraces jfields$ lein run<br />Exception in thread "main" java.lang.RuntimeException: thrown<br /> at reading_clojure_stacktraces.core$foo.invoke(core.clj:3)<br /> at reading_clojure_stacktraces.core$_main.invoke(core.clj:6)<br /> at clojure.lang.Var.invoke(Var.java:397)<br /> at user$eval37.invoke(NO_SOURCE_FILE:1)<br /> at clojure.lang.Compiler.eval(Compiler.java:6465)<br /> at clojure.lang.Compiler.eval(Compiler.java:6455)<br />[blah blah blah]</pre>I snipped a fair bit of stacktrace and replaced it with [blah blah blah]. I did that because that's what I mentally do as well, I look for the last line that includes a file that I've created and I ignore everything after a few lines below my line. That is my first recommendation - If you see a stacktrace, it's likely that the problem is in your code, not Clojure. Look for the last line of your code (N) and ignore every line below N + 3. <br /><br />In this example, user$eval... likely has something to do with lein, and I can safely assume that the problem is likely not in there. Moving up from there I can see a line from my code:<pre>reading_clojure_stacktraces.core$_main.invoke(core.clj:6)</pre> When I read the above line I see the problem is in namespace 'reading-clojure-stacktraces/core', in the function '-main', in the file core.clj, on line 6. I'm no Clojure internals expert, but I believe Clojure actually creates a class named reading_clojure_stacktraces.core$_main with an 'invoke' method; however, I truthfully don't know (and you wont need to either). Whether a class is created or not, it makes sense that the line will need to be formatted to fit a valid Java class name - which explains why our dashes have been converted to underscores. <br /><br />Moving up another line, I can see that the issue is likely inside the 'foo' function of the reading-clojure-stacktraces namespace. A quick review of the original code shows that line 3 of core.clj contains the call to throw, and everything makes perfect sense. <br /><br />If all Clojure stacktraces were this simple, I probably wouldn't bother with this blog entry; however, things can become a bit more complicated as you introduce anonymous functions.<br /><br />The following snippet of code removes the 'foo' function and throws an exception from within an anonymous function. <br /><br /> Another trip to 'lein run' produces the following output.<pre><br />Exception in thread "main" java.lang.RuntimeException: thrown<br /> at reading_clojure_stacktraces.core$_main$fn__9.invoke(core.clj:4)<br /> at reading_clojure_stacktraces.core$_main.invoke(core.clj:4)<br /> at clojure.lang.Var.invoke(Var.java:397)<br /> at user$eval38.invoke(NO_SOURCE_FILE:1)<br /> at clojure.lang.Compiler.eval(Compiler.java:6465)</pre> The above stacktrace does give you the correct file and line number of where the issue originates; however, you'll notice that the function that threw the exception has become a bit less easy to identify. My use of an anonymous function led to Clojure naming the function fn__9, and there's nothing wrong with that. In fact, this example is especially readable as the stacktrace shows that fn__9 was created inside the -main function. <br /><br />I expect you'd be able to find the issue with our contrived example without any further help; however, production code (often making use of high order functions) can lead to significantly more complex stacktraces. You could forsake anonymous functions, but there's a nice middle ground that is also helpful for debugging - temporarily name your anonymous functions. <br /><br /><a href="http://clojure.org/reader">Clojure's reader</a> transforms the Anonymous function literal in the following way. <pre>#(...) =&gt; (fn [args] (...))</pre>Therefore, the following code will be the same as the example above, from Clojure's perspective. <br /><br />Another quick 'lein run' verifies that the stacktrace is the same (and I see no reason to repeat it here). However, now that we've switched to fn, we can provide a (rarely used, optional) name.<br /><br /> At this point, 'lein run' should produce the following output. <pre>Exception in thread "main" java.lang.RuntimeException: thrown<br /> at reading_clojure_stacktraces.core$_main$<b>i_throw</b>__9.invoke(core.clj:4)<br /> at reading_clojure_stacktraces.core$_main.invoke(core.clj:4)<br /> at clojure.lang.Var.invoke(Var.java:397)<br /> at user$eval38.invoke(NO_SOURCE_FILE:1)<br /> at clojure.lang.Compiler.eval(Compiler.java:6465)</pre>Now our line contains a bit more information. The two $ signs still indicate that the function with an issue is a function created inside -main; however, our stacktrace also includes the name (in bold) we specified for our function. You can use any valid symbol characters, so feel free to put anything you want in the name while you're debugging.<blockquote>note: Symbols begin with a non-numeric character and can contain alphanumeric characters and *, +, !, -, _, and ? -- <a href="http://clojure.org/reader">clojure.org</a>.</blockquote>So far, all of the examples have been somewhat noisy, but mildly easy to mentally filter. Unfortunately, idiomatic Clojure code can also lead to stacktraces that bounce back and forth between your code and the standard library, leaving you to sift through significantly longer stacktraces.<br /><br />The following snippet of code throws a NullPointerException due to a mistake I clearly made, but the last line of 'my code' is in the lower half of a long stacktrace. <br /><br />The above example code produces the below stacktrace. <pre>Exception in thread "main" java.lang.NullPointerException<br /> at clojure.lang.Numbers.ops(Numbers.java:942)<br /> at clojure.lang.Numbers.inc(Numbers.java:110)<br /> at clojure.core$inc.invoke(core.clj:862)<br /> at clojure.core$map$fn__3811.invoke(core.clj:2430)<br /> at clojure.lang.LazySeq.sval(LazySeq.java:42)<br /> at clojure.lang.LazySeq.seq(LazySeq.java:60)<br /> at clojure.lang.RT.seq(RT.java:466)<br /> at clojure.core$seq.invoke(core.clj:133)<br /> at clojure.core$print_sequential.invoke(core_print.clj:46)<br /> at clojure.core$fn__4990.invoke(core_print.clj:140)<br /> at clojure.lang.MultiFn.invoke(MultiFn.java:167)<br /> at clojure.core$pr_on.invoke(core.clj:3264)<br /> at clojure.core$pr.invoke(core.clj:3276)<br /> at clojure.lang.AFn.applyToHelper(AFn.java:161)<br /> at clojure.lang.RestFn.applyTo(RestFn.java:132)<br /> at clojure.core$apply.invoke(core.clj:600)<br /> at clojure.core$prn.doInvoke(core.clj:3309)<br /> at clojure.lang.RestFn.applyTo(RestFn.java:137)<br /> at clojure.core$apply.invoke(core.clj:600)<br /> at clojure.core$println.doInvoke(core.clj:3329)<br /> at clojure.lang.RestFn.invoke(RestFn.java:408)<br /> at reading_clojure_stacktraces.core$_main.invoke(core.clj:7)<br /> at clojure.lang.Var.invoke(Var.java:397)<br /> at user$eval37.invoke(NO_SOURCE_FILE:1)<br /> at clojure.lang.Compiler.eval(Compiler.java:6465)<br /> at clojure.lang.Compiler.eval(Compiler.java:6455)</pre>In situations like these, I generally look at the top few lines to get a bit of context, and then I scroll down to find the last line of 'my code'. Looking at the top 4 lines from the stacktrace I can see that the issue is with the inc function, which was passed to the high order function named map. If I look father down the stacktrace, I can see that line 7 in reading-clojure-stacktraces.core is where the issue began in 'my code'.<br /><br />If you look at line 7 of (reading-clojure-stacktraces) core.clj, you'll notice that I'm merely printing the results of calling foo - yet the issue seems to be with the map function that is invoked within foo. This is because map is <a href="http://clojure.org/lazy">lazy</a>, and the evaluation is deferred until we attempt to print the results of mapping inc. While it's not exactly obvious, the stacktrace does contain all the hints we need to find the issue. Line 3 lets us know that inc is getting a nil. Line 4 lets us know that it's happening inside a map. Line 5 lets us know that we're dealing with laziness. And, the line containing our namespace lets us know where to begin looking. <br /><br />The following example is very similar; however, it uses a partial to achieve the same result. <br /><br />The above example code produces the below stacktrace. <pre>Exception in thread "main" java.lang.NullPointerException<br /> at clojure.lang.Numbers.ops(Numbers.java:942)<br /> at clojure.lang.Numbers.add(Numbers.java:126)<br /> at clojure.core$_PLUS_.invoke(core.clj:927)<br /> at clojure.lang.AFn.applyToHelper(AFn.java:163)<br /> at clojure.lang.RestFn.applyTo(RestFn.java:132)<br /> at clojure.core$apply.invoke(core.clj:602)<br /> at clojure.core$partial$fn__3794.doInvoke(core.clj:2341)<br /> at clojure.lang.RestFn.invoke(RestFn.java:408)<br /> at clojure.core$map$fn__3811.invoke(core.clj:2430)<br /> at clojure.lang.LazySeq.sval(LazySeq.java:42)<br /> at clojure.lang.LazySeq.seq(LazySeq.java:60)<br /> at clojure.lang.RT.seq(RT.java:466)<br /> at clojure.core$seq.invoke(core.clj:133)<br /> at clojure.core$print_sequential.invoke(core_print.clj:46)<br /> at clojure.core$fn__4990.invoke(core_print.clj:140)<br /> at clojure.lang.MultiFn.invoke(MultiFn.java:167)<br /> at clojure.core$pr_on.invoke(core.clj:3264)<br /> at clojure.core$pr.invoke(core.clj:3276)<br /> at clojure.lang.AFn.applyToHelper(AFn.java:161)<br /> at clojure.lang.RestFn.applyTo(RestFn.java:132)<br /> at clojure.core$apply.invoke(core.clj:600)<br /> at clojure.core$prn.doInvoke(core.clj:3309)<br /> at clojure.lang.RestFn.applyTo(RestFn.java:137)<br /> at clojure.core$apply.invoke(core.clj:600)<br /> at clojure.core$println.doInvoke(core.clj:3329)<br /> at clojure.lang.RestFn.invoke(RestFn.java:408)<br /> at reading_clojure_stacktraces.core$_main.invoke(core.clj:7)<br /> at clojure.lang.Var.invoke(Var.java:397)<br /> at user$eval37.invoke(NO_SOURCE_FILE:1)<br /> at clojure.lang.Compiler.eval(Compiler.java:6465)</pre>Again, you'll want to skim the stacktrace for hints. In the above stacktrace we can see that line 3 is telling us that + is the issue. Line 7 lets us know that partial was used. And, the remaining hints are the same as the previous example. <br /><br />Skimming for hints may look painful at first. However, you quickly learn to filter out the common Clojure related noise. For example, anything that starts with 'clojure' and looks like a standard Java class name is highly unlikely to be where a problem exists. For example, clojure.lang.Numbers.ops isn't likely to have a bug. Likewise, you'll often see the same classes and methods repeated across all possible errors - clojure.lang.AFn, clojure.lang.RestFn, clojure.core$apply, clojure.lang.LazySeq, clojure.lang.RT, clojure.lang.MultiFn, etc, etc. These functions are often used building blocks for almost everything Clojure does. Those lines provide a bit of signal, but (for the most part) can safely be ignored.  <br /><br />Again, it can be a bit annoying to deal with Clojure stacktraces when getting started; however, if you take the time to understand which lines are signal and which lines are noise, then they become helpful debugging tools. <br /><br />related: If you want a testing library that helps you filter some of the stacktrace noise, you might want to check out <a href="https://github.com/jaycfields/expectations">expectations</a>.<div class="blogger-post-footer"><br /><a href="http://www.jayfields.com">© Jay Fields - www.jayfields.com</a><img alt="" height="1" src="https://blogger.googleusercontent.com/tracker/12467669-1551763706335196256?l=blog.jayfields.com" width="1" /></div>              </p>
              <p class="meta"><a href="http://blog.jayfields.com/2012/06/reading-clojure-stacktraces.html">Permalink</a></p>
            </article>
          </section>
          <section class="entry">
            <aside class="aside">
              <!-- <img src="static/i/favicon.gif" alt="Name of the Site" /> -->
              <h2><a href="http://chris-granger.com/" title="chris-granger.com">Chris Granger</a></h2>
              <p>
June 26, 2012 07:00 AM                <br />
                <a href="http://chris-granger.com/">Feed URL</a>
              </p>
            </aside>
            <article class="article">
              <h2><a href="http://feedproxy.google.com/~r/ChrisGranger/~3/3IWRIToWKFs/">Light Table - 24 hours later</a></h2>
              <p>
<p>Yesterday we <a href="http://app.kodowa.com/playground">released the playground</a> to the world. It has been a ridiculous past 24 hours, so ridiculous in fact that I felt I had to share some of the numbers. Within the first 5 hours over 500,000 lines of code had been eval'd by folks using the Light Table Playground. By this morning, exactly 24 hours after the launch, it looked like this:</p>

<p><img alt="The first 24 hours" src="http://feeds.feedburner.com/images/lightable/onemillion.png" /></p>

<p>More than 1.1 million lines of code have been executed! Crazier, however, is the number of <strong>active</strong> minutes spent using it to do exactly that. In a 24 hour period over 755 active person hours were spent having fun with Clojure. That's more than 31 days - you guys fit an entire month in a day.</p>

<p>The community has consistently surprised us at every step of this project and once again your enthusiasm, support, and feedback have been nothing short of awe inspiring. We wanted you to see how amazing it really is and thank you for joining the ride with us.</p>
<img height="1" src="http://feeds.feedburner.com/~r/ChrisGranger/~4/3IWRIToWKFs" width="1" />              </p>
              <p class="meta"><a href="http://feedproxy.google.com/~r/ChrisGranger/~3/3IWRIToWKFs/">Permalink</a></p>
            </article>
          </section>
          
          <footer id="footer">
            <p>
              Copyright &copy; 2009, Planet Clojure. No rights reserved.
              <br />
              Planet Clojure is maintained by <a href="http://freegeek.in/">Baishamapayan Ghose</a>.
              <br />
              Clojure and the Clojure logo are Copyright &copy; 2008-2009, Rich Hickey.
              <br />
              Theme by <a href="http://brajeshwar.com/">Brajeshwar</a>.
            </p>
          </footer>

        </div>
      </div>

      <div id="sidebar">
        <div id="sidebar-content">
          <section id="search">
	    <form action="http://www.google.com/cse" id="cse-search-box"> 
              <input type="hidden" name="cx" value="013940287744875509343:60ybe0lrjm4" /> 
              <input type="hidden" name="ie" value="UTF-8" /> 
              <input type="text" name="q" class="input-txt" /> 
              <input type="submit" name="sa" value="Search" /> 
            </form> 
          </section>

          <section id="about" class="sidebar-list">
            <h3>About</h3>
            <p>Planet Clojure is a meta blog that collects posts from the blogs of various <a href="http://clojure.org/">Clojure</a> hackers and contributors.</p>
            <p>It is edited by <a href="http://freegeek.in/">Baishampayan Ghose</a> and <a href="http://alexott.net/en/index.html">Alex Ott</a>. Please <a href="http://github.com/ghoseb/planet.clojure">send them a patch</a> if you want your blog to be syndicated here.</p>
          </section>
          
          <section class="sidebar-list">
            <h3>Subscriptions</h3>
            <ul>
                <li>
                  <a href="http://corfield.org/blog/" title="An Architect's View">"An Architect's View"</a>
                </li>
                <li>
                  <a href="http://clojurelx.blogspot.com/" title="Clojure &amp; lx">"Clojure & lx"</a>
                </li>
                <li>
                  <a href="http://clojuresoft.com" title="clojuresoft.com">"Clojuresoft"</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b407d7d2c8f1a806dbe7668c200811b3" title="Danny 'Jay' Donnell">"Danny 'Jay' Donnell"</a>
                </li>
                <li>
                  <a href="http://www.dalnefre.com/wp" title="It's Actors All The Way Down » Clojure">"It's Actors All The Way Down"</a>
                </li>
                <li>
                  <a href="http://metaljoe.wordpress.com" title="John's Coding Reflections » Clojure">"John's Coding Reflections"</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=7f19578eccc6f2e8ea7dafb56aee9b3c" title="Keep IT Simply Simple">"Keep IT Simply Simple"</a>
                </li>
                <li>
                  <a href="http://reminiscential.wordpress.com" title="Reminiscential: of or pertaining to remembrance » clojure">"Kevin 'Jing' Qiu"</a>
                </li>
                <li>
                  <a href="http://blogs.oreilly.com/cgi-bin/mt/mt-search.cgi?IncludeBlogs=57&amp;search=clojure" title="Search Results for clojure">"O'Reilly blogs"</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2ac9f144f88726c30c12cb00c073f765" title="Phil Calçado">"Phil Calçado"</a>
                </li>
                <li>
                  <a href="http://emekamicro.blogspot.com/search/label/Clojure" title="Programmer[:world]">"Programmer[:world]"</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4ae2c2d9a04d626263b3cb7c7a002970" title="Relevance Inc.'s blog">"Relevance Inc.'s blog"</a>
                </li>
                <li>
                  <a href="http://blog.remvee.net/" title="RemVee.blog">"Remco van 't Veer"</a>
                </li>
                <li>
                  <a href="http://justinsboringpage.blogspot.com/search/label/clojure" title="justinhj's coding blog">"justinhj's coding blog"</a>
                </li>
                <li>
                  <a href="http://sexp.posterous.com" title="sexp">"sexp's posterous"</a>
                </li>
                <li>
                  <a href="http://clojure-and-me.blogspot.com/" title="(+ Clojure me)">(+ clojure me)</a>
                </li>
                <li>
                  <a href="http://7sudos.com/taxonomy/term/11/0" title="7sudos - clojure">7sudos</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=41a2056f19749d05714d82f7e14e4c19" title="8thlight Inc.">8thlight Inc.</a>
                </li>
                <li>
                  <a href="http://writequit.org/blog" title=":wq - blog » clojure">:wq - blog</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=03725c0c7484f6f0757ab3e7942ef873" title="Adrian Mouat">Adrian Mouat</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b87ce8ba634dd527d1d51a9111621622" title="Alan Dipert">Alan Dipert</a>
                </li>
                <li>
                  <a href="http://www.lispplusplus.com/search/label/clojure" title="Lisp ++">Alex Baranosky</a>
                </li>
                <li>
                  <a href="http://tech.puredanger.com" title="Pure Danger Tech » Clojure">Alex Miller</a>
                </li>
                <li>
                  <a href="http://meshy.org/" title="Alex Osborne's log">Alex Osborne</a>
                </li>
                <li>
                  <a href="http://alexott.blogspot.com/search/label/clojure" title="Alex Ott's blog">Alex Ott</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=7267a96d8895bb5932f9c7ea1ae9942a" title="Alexandre Gravier">Alexandre Gravier</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4e70b91004b3e84caa26e94bf388226b" title="Alexey Aristov">Alexey Aristov</a>
                </li>
                <li>
                  <a href="http://alfredodinapoli.wordpress.com" title="Web life between Python and lambda calculus » clojure">Alfredo Di Napoli</a>
                </li>
                <li>
                  <a href="http://arohner.blogspot.com/search/label/clojure" title="/dev/rohner">Allen Rohner</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2dfe6914540e12f77eea04df1d57f5b3" title="Alvaro Videla">Alvaro Videla</a>
                </li>
                <li>
                  <a href="http://s-expressions.com" title="s-expressions » clojure">Amit Rathore</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=5f5888040dabb6d30a9691e3fd29018b" title="Andrew Brehaut">Andrew Brehaut</a>
                </li>
                <li>
                  <a class="message" title="404: not found">Andrew Cholakian</a>
                </li>
                <li>
                  <a href="http://sigusr2.net/" title="SIGUSR2: tagged clojure">Andrew Gwozdziewycz</a>
                </li>
                <li>
                  <a href="http://www.andrewhjon.es" title="Andrew Jones">Andrew Jones</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=23ba1ea6d318e56ea43738984d9d19ff" title="Andrew Whitehouse">Andrew Whitehouse</a>
                </li>
                <li>
                  <a href="http://adumont.fr/blog" title="Tony's blog » clojure">Antoine Romain Dumont</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=0c433447e78f28759a04e1bbc8236216" title="Arcane Sentiment">Arcane Sentiment</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1a0cc5a5b729058f58307f00a728dc72" title="Asymmetrical View">Asymmetrical View</a>
                </li>
                <li>
                  <a href="http://community.ative.dk/blogs/ative/archive/tags/clojure/default.aspx" title="Ative at Work : clojure">Ative at Work</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4f8569a77c5ae170e4afd516f9543f32" title="Atomic Spin (Clojure posts)">Atomic Spin</a>
                </li>
                <li>
                  <a href="http://tech.backtype.com" class="message" title="internal server error">BackType Technology</a>
                </li>
                <li>
                  <a href="http://freegeek.in/blog" title="The Free Geek » clojure">Baishampayan Ghose</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=83fd94188e529e39e6618f741257f114" title="Beanstalk">Beanstalk</a>
                </li>
                <li>
                  <a href="http://pixelmachine.org" title="pixelmachine: clojure desk">Ben Hughes</a>
                </li>
                <li>
                  <a href="http://bc.tech.coop/blog/index.html" title="Bill Clementson's Blog">Bill Clementson</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=7b8be19b36639ba4bee6013c90ce65f8" title="Blake Smith">Blake Smith</a>
                </li>
                <li>
                  <a href="http://bcbio.wordpress.com" title="Blue Collar Bioinformatics » clojure">Brad Chapman</a>
                </li>
                <li>
                  <a href="http://www.beaconhill.com/blog" title="Brad Lucas | Beacon Hill » Clojure">Brad Lucas</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=bb5649628a7f97318cb84845387521ef" title="Bradford Cross's Clojure posts">Bradford Cross</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=8914b4ab64e1611dcdb1f0860942c1cd" title="Brendan Ribera">Brendan Ribera</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=9540fdd6e19ed684f664b06b77967d75" title="Brian Carper">Brian Carper</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=40fcebee45038d6c38ee52be8a75ec9e" title="Brian McKenna">Brian McKenna</a>
                </li>
                <li>
                  <a href="http://otfrom.wordpress.com" title="Wifi and Coffee » clojure">Bruce Durling</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=773e30278903f6b516ec6a3159842452" title="Bugsplat's Clojure Posts">Bugsplat</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=303b0813cd2a127a465fe2b104b78ecf" title="CCRi">CCRi</a>
                </li>
                <li>
                  <a href="http://gigasquidsoftware.com/wordpress" title="Squid's Blog » Clojure">Carin Meier</a>
                </li>
                <li>
                  <a class="message" title="404: not found">Carlo Sciolla</a>
                </li>
                <li>
                  <a href="http://blog.carsoncheng.ca/search/label/Clojure" title="The Great Cognitive Escape">Carson Cheng</a>
                </li>
                <li>
                  <a href="http://www.cassiel.com" title="cassiel » Clojure">Cassiel</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=5c90f4ba11373ad351e956fc400d2fd4" title="Chad Braun-Duin's Clojure posts">Chad Braun-Duin</a>
                </li>
                <li>
                  <a href="http://charlie.griefer.com/blog" title="Charlie Griefer » Clojure">Charlie Griefer</a>
                </li>
                <li>
                  <a href="http://cemerick.com" title="cemerick » Clojure">Chas Emerick</a>
                </li>
                <li>
                  <a href="http://literateprogrammer.blogspot.com/search/label/clojure" title="the literate programmer">Chris Ford</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=62146cf9e327b1d6d6cf54249e486b6d" title="Chris Frisz">Chris Frisz</a>
                </li>
                <li>
                  <a href="http://chris-granger.com/" title="chris-granger.com">Chris Granger</a>
                </li>
                <li>
                  <a href="http://blog.n01se.net" class="message" title="duplicate subscription: http://blog.n01se.net/?cat=14&amp;feed=rss2&amp;author=34">Chris Houser</a>
                </li>
                <li>
                  <a class="message" title="404: not found">Chris Petrilli</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=237a83c4a866269a29172b6b187470df" title="Christian Smith">Christian Smith</a>
                </li>
                <li>
                  <a href="http://clj-me.cgrand.net" title="Clojure and me">Christophe Grand</a>
                </li>
                <li>
                  <a href="http://kuriqoo.blogspot.com/search/label/clojure" title="Computing for fun">Christophe Verré</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=bc8dc055eecb600cecd66ec34b2160aa" title="Christopher Maier">Christopher Maier</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=3395b48ff58589f8c914615eb08a9c7a" title="Christopher Miles">Christopher Miles</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b22cc198388d94a6713b03e06e815911" title="Clinton R. Nixon">Clinton R. Nixon</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=014b2da708cba86630e63374ffa4d2c7" title="Clive Tong's Clojure posts">Clive Tong</a>
                </li>
                <li>
                  <a href="http://clojure.roboloco.net" title="Clojure Companion Cube">Clojure Companion Cube</a>
                </li>
                <li>
                  <a href="http://clojure-android.blogspot.com/" title="Clojure Development on Android">Clojure Developmnet on Android</a>
                </li>
                <li>
                  <a href="http://lispjobs.wordpress.com" title="Lispjobs » clojure">Clojure Jobs</a>
                </li>
                <li>
                  <a href="http://clojurestudydc.wordpress.com" title="Clojure Study Group DC">Clojure Study Group DC</a>
                </li>
                <li>
                  <a href="https://www.ibm.com/developerworks/mydeveloperworks/bookmarks/html?base=%25%25http%3A%2F%2Fwww.ibm.com%2Fdeveloperworks%2Flibrary%2F%25%25&amp;sortBy=created&amp;sortOrder=desc&amp;tag=clojure&amp;lang=en" title="Bookmarks - Bookmarks with Tags: clojure within %http://www.ibm.com/developerworks/library/%">Clojure at IBM developerWorks</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=be83c0b5b0d92b259682cb8021e14d2a" title="InfoQ Clojure-related materials">Clojure at InfoQ</a>
                </li>
                <li>
                  <a href="http://clojure-py.blogspot.com/" title="Clojure-Py">Clojure-Py</a>
                </li>
                <li>
                  <a href="http://clojurewest.org/news/" title="News">Clojure/West Conference</a>
                </li>
                <li>
                  <a href="http://clojure.com/blog/" title="Clojure/core Blog">Clojure/core</a>
                </li>
                <li>
                  <a href="http://clojure.livejournal.com/" class="message" title="internal server error">Clojure@LJ</a>
                </li>
                <li>
                  <a href="http://clojureclr.blogspot.com/" title="ClojureCLR">ClojureCLR</a>
                </li>
                <li>
                  <a href="http://clojuredocs.wordpress.com" title="The ClojureDocs Blog » Clojure">ClojureDocs</a>
                </li>
                <li>
                  <a href="http://codethat.wordpress.com" title="Code that - Alex Yakushev's weblog » Clojure">Code that</a>
                </li>
                <li>
                  <a href="http://codeabout.blogspot.com/search/label/clojure" title="Codeabout">Codeabout</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=5e3eec1b6c35e33e84d36bdcc597541f" title="Colin Steele">Colin Steele</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=31eafd625f670b8c1354f4adcf850914" title="Colour Coding">Colour Coding</a>
                </li>
                <li>
                  <a href="http://compojureongae.posterous.com" title="Compojure on GAE">Compojure on GAE</a>
                </li>
                <li>
                  <a href="http://www.newfoundresearch.com" class="message" title="internal server error">Corey Hoffstein</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=ce55ba501df0f7fd54866a7bba2191fb" title="Cyrus Harmon">Cyrus Harmon</a>
                </li>
                <li>
                  <a href="http://dbostwick.posterous.com" title="Daniel Bostwick">Daniel Bostwick</a>
                </li>
                <li>
                  <a href="http://nounsvsverbs.blogspot.com/search/label/clojure" title="Nouns vs. Verbs">Daniel Glauser</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=5691517411ede5e23dfe23d98b036f79" title="Daniel Harper">Daniel Harper</a>
                </li>
                <li>
                  <a href="http://metaphysicaldeveloper.wordpress.com" class="message" title="duplicate subscription: https://metaphysicaldeveloper.wordpress.com/tag/clojure/feed/">Daniel Ribeiro</a>
                </li>
                <li>
                  <a href="http://metaphysicaldeveloper.wordpress.com" class="message" title="duplicate subscription: https://metaphysicaldeveloper.wordpress.com/tag/clojure/feed/">Daniel Ribeiro</a>
                </li>
                <li>
                  <a href="http://www.pawfal.org/dave/blog" title="dave's blog of art and programming » clojure">Dave Griffiths</a>
                </li>
                <li>
                  <a href="http://blog.darevay.com" title="Along Came Betty">Dave Ray</a>
                </li>
                <li>
                  <a href="http://drcabana.org" title="drcabana.org » Clojure">David Cabana</a>
                </li>
                <li>
                  <a href="http://data-sorcery.org" title="Data Sorcery with Clojure">David Edgar Liebke</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=406b0e34ad0f738bf785b160287fbf28" title="David McNeil">David McNeil</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b55991297db4be15998c4a92a711a3a9" title="David Nolen">David Nolen</a>
                </li>
                <li>
                  <a href="http://davidrupp.blogspot.com/search/label/clojure" title="David Rupp's Blog">David Rupp</a>
                </li>
                <li>
                  <a href="http://blog.experimentalworks.net" title="experimentalworks » clojure">David Soria Parra</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=e35d6881f8ced55bed527c7a501fad8d" title="Debasish Ghosh's Clojure posts">Debasish Ghosh</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=6aed67e98c4180d0ce97a3bfa542b803" title="Deep Blue Lambda">Deep Blue Lambda</a>
                </li>
                <li>
                  <a href="http://www.cataclysmicmutation.com" title="Cataclysmic Mutation » clojure">Deon Garrett</a>
                </li>
                <li>
                  <a href="http://devender.wordpress.com" title="Devender's Weblog » clojure">Devender Gollapally</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2055776f94cf79727174c44546724ee0" title="Dhananjay Nene">Dhananjay Nene</a>
                </li>
                <li>
                  <a href="http://blog.mitechki.net/search/label/clojure" title="Angry UNIXoid’s Humble Abode">Dmitriy Kropivnitskiy</a>
                </li>
                <li>
                  <a href="http://denkspuren.blogspot.com/search/label/clojure" title="denkspuren">Dominikus Herzberg</a>
                </li>
                <li>
                  <a href="http://drknucklehead.wordpress.com" title="Dr. Knucklehead's Blog » Clojure">Dr. Knucklehead</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=31880865059f5c75ddc5f032b183bfa4" title="Dustin Getz">Dustin Getz</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=6462cfea7cc38fbbfd8ffe83c6e5a79d" title="Edd Dumbill">Edd Dumbill</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=38f6da7f647b56d1f2fe846e55f7443c" title="Edgar Gonçalves's Clojure posts">Edgar Gonçalves</a>
                </li>
                <li>
                  <a href="http://boss-level.com" title="boss-level.com » Clojure">Edmund Jackson</a>
                </li>
                <li>
                  <a href="http://www.elangocheran.com/blog" title="Sequenced Thoughts from C/S » clojure">Elango Cheran</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=c4fc06896b8f6e45b3be8c84dea6ab71" title="Element 84">Element 84</a>
                </li>
                <li>
                  <a href="http://nailthatbug.net" title="nail that bug » clojure">Emil Kruczek</a>
                </li>
                <li>
                  <a href="http://www.enrico-franchi.org/search/label/Clojure" title="RiK0 Tech Temple">Enrico Franchi</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=5165f98663367ef66efa5fc3d5d40c10" title="Epistemological Engineering">Epistemological Engineering</a>
                </li>
                <li>
                  <a href="http://ericlavigne.wordpress.com" title="Eric Lavigne">Eric Lavigne</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=58940503ad2c238e3f83863ff36725c1" title="Eric Merritt">Eric Merritt</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b4447e3659bc8e935fbb2c5091671c05" title="Erik Akron">Erik Akron</a>
                </li>
                <li>
                  <a href="http://blog.ethanjfast.com" class="message" title="404: not found">Ethan Fast</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a3322ead4699fdfd38b55c9443a74287" title="Ethan Herdrick">Ethan Herdrick</a>
                </li>
                <li>
                  <a href="http://euroclojure.com/2012" title="EuroClojure 2012">Euroclojure</a>
                </li>
                <li>
                  <a href="http://www.exampler.com/blog" class="message" title="no data">Exploration Through Example</a>
                </li>
                <li>
                  <a href="http://kimavcrp.blogspot.com/search/label/clojure" title="Exploring the programming world">Exploring the programming world</a>
                </li>
                <li>
                  <a href="http://fsteeg.com" title="Geschreibsel » clojure">Fabian Steeg</a>
                </li>
                <li>
                  <a href="http://blog.factual.com" title="Factual Blog » clojure">Factual dev blog</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2cc2b617d679b3305570fc1e4cf2743c" title="Felix Dahlke">Felix Dahlke</a>
                </li>
                <li>
                  <a href="http://shenfeng.me" title="shenfeng's blog">Feng Shen</a>
                </li>
                <li>
                  <a class="message" title="no data">Fight Code Entropy</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2620de78bcda86952188892c48b4caf1" title="Flying Machine Studios">Flying Machine Studios</a>
                </li>
                <li>
                  <a href="http://formpluslogic.blogspot.com/" title="Form plus Logic">Form plus Logic</a>
                </li>
                <li>
                  <a href="http://functionaljobs.com/" title="Functional Jobs: Search 'clojure'">Functional Jobs</a>
                </li>
                <li>
                  <a href="http://gtrak.wordpress.com" title="gtrak's lair » Clojure">Gary Trakhman</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=873d34495de5a0e1086b8a6ebac98b31" title="Gavin McGovern">Gavin McGovern</a>
                </li>
                <li>
                  <a class="message" title="404: not found">Gaz Jones</a>
                </li>
                <li>
                  <a href="http://thegeez.github.com/" title="thegeez blog">Gijs Stuurman</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=f9ae2c837b5eca584b02e1f4d772e8ce" title="Glen Rubin">Glen Rubin</a>
                </li>
                <li>
                  <a href="http://orthogonal.me" title="The Occasional Blogger » Clojure">Glen Stampoultzis</a>
                </li>
                <li>
                  <a href="http://patterngazer.blogspot.com/search/label/clojure" title="Being an apprentice software craftsman">Globulon</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=c32d9e8ef66b86e970c4aafed23edc5f" title="Greg Osuri's Clojure posts">Greg Osuri</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=e8e3866611996c2766b5a105c68b6c1b" title="Greg Slepak">Greg Slepak</a>
                </li>
                <li>
                  <a href="http://thinkrevoactevo.blogspot.com/search/label/clojure" title="Think revo, act evo">Herwig Hochleitner</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=8057e8200675f0718e9c503c3c712460" title="Heuristic Fencepost">Heuristic Fencepost</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=091158c30864860e3042e7e9a44b619c" title="Holger Durer">Holger Durer</a>
                </li>
                <li>
                  <a href="http://codemeself.blogspot.com/search/label/clojure" title="code me self">Hubert Iwaniuk</a>
                </li>
                <li>
                  <a href="http://hugoduncan.org/tag/" title="Hugo Duncan : clojure">Hugo Duncan</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=824556de17ca6513ac86b8adf68ea31a" title="ISTI Off the Record">ISTI Off the Record</a>
                </li>
                <li>
                  <a href="http://ianeslick.com" title="Frumious Abstractions">Ian Eslick</a>
                </li>
                <li>
                  <a href="http://ianeslick.com" class="message" title="duplicate subscription: http://ianeslick.com/rss.xml?tag=clojure">Ian Eslick</a>
                </li>
                <li>
                  <a href="http://ianp.org" class="message" title="404: not found">Ian Phillips</a>
                </li>
                <li>
                  <a href="http://ilyasterin.com" title="/dev/maverick » clojure">Ilya Sterin</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=8f6aa3dc4efdaf19b78f4afa9ba05fb3" title="Imagine27's Clojure posts">Imagine27</a>
                </li>
                <li>
                  <a href="http://immutant.org/" title="Immutant">Immutant</a>
                </li>
                <li>
                  <a href="http://blog.isabel-drost.de" title="Inductive Bias » clojure">Inductive Bias</a>
                </li>
                <li>
                  <a href="http://toinfinity.wordpress.com" title="Infinity: Easier Than You Think. Infinitely. » Clojure">Infinity: Easier Than You Think. Infinitely.</a>
                </li>
                <li>
                  <a href="http://www.inerciasensorial.com.br" title="Inércia Sensorial » Clojure">Inércia Sensorial</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2ded344d16edc2ca2057029693edbb9e" title="Irakli Gozalishvili">Irakli Gozalishvili</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1bda07488d67aa0b84379e3c36fa02ef" title="Isaac Hodes">Isaac Hodes</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=7f242ee5d40f73cd2ddd662025ac456c" title="Isaac Praveen">Isaac Praveen</a>
                </li>
                <li>
                  <a href="http://inecas.posterous.com" title="my missing blog">Ivan Necas</a>
                </li>
                <li>
                  <a href="http://pupeno.com" title="Pablo's blog » Clojure">J. Pablo Fernández</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1d37e15aab3f0c5d82f165e65aa0c034" title="Jacek Laskowski">Jacek Laskowski</a>
                </li>
                <li>
                  <a href="http://chopmode.wordpress.com" title="chop-mode » clojure">Jacob Poulsgaard Tjørnholm</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=58ddaa58c30fb4a3c9dcda993008d442" title="Jake McCrary">Jake McCrary</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=d6dadbbf9c6d16fb50c2e96309c85743" title="Jan Rychter">Jan Rychter</a>
                </li>
                <li>
                  <a href="http://jasonaeschliman.blogspot.com/search/label/clojure" title="_">Jason Aeschliman</a>
                </li>
                <li>
                  <a href="http://w01fe.com" title="A Blog.">Jason Wolfe</a>
                </li>
                <li>
                  <a href="http://jatinpuri.com" title="JATIN PURI » Clojure">Jatin Puri</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=f8b56ef73099743fdfe6336dd7cd0d5c" title="Javalobby">Javalobby</a>
                </li>
                <li>
                  <a href="http://blog.jayfields.com/search/label/clojure" title="Jay Fields' Thoughts">Jay Fields</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=e94523cfeb242289dbe8c3c13824893a" title="Jayway team">Jayway team</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=893ce799a0335da4ca871dc7c3ddb5c3" title="Jeff Foster">Jeff Foster</a>
                </li>
                <li>
                  <a href="http://thecarefulprogrammer.blogspot.com/search/label/Clojure" title="The Careful Programmer">Jeff Heon</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=6f0ac172fdf66c9d0d0860b7c05e7a5b" title="Jeff Rose">Jeff Rose</a>
                </li>
                <li>
                  <a class="message" title="404: not found">Jeff Tucker</a>
                </li>
                <li>
                  <a href="http://jeroenvloothuis.blogspot.com/search/label/clojure" title="Jeroen Vloothuis">Jeroen Vloothuis</a>
                </li>
                <li>
                  <a href="http://jessehowarth.com/clojure" title="Clojure - Jesse Howarth">Jesse Howarth</a>
                </li>
                <li>
                  <a class="message" title="404: not found">Jieren Chen</a>
                </li>
                <li>
                  <a href="http://www.clojure.net" title="A Clojure Story">Jim Duey</a>
                </li>
                <li>
                  <a href="http://blog.n01se.net" title="searching for signal » clojure">Joel Martin</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2e0f98bb77e1242ddd6137974c608f0f" title="John Biesnecker">John Biesnecker</a>
                </li>
                <li>
                  <a href="http://jondotcomdotorg.net" title="jon.com.org.net » clojure">Jon Bristow</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=ed5777051f4ca556882cceb6bff2b041" title="Jon Romero">Jon Romero</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=ae4f8deee74599b1cb1ed2d60ccbd12e" title="Jozef Wagner">Jozef Wagner</a>
                </li>
                <li>
                  <a href="http://jukkaz.wordpress.com" title="Jukka Zitting » clojure">Jukka Zitting</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=e1e08ff60f05678ec60e0a0106d5761c" title="Jumble Agile Manuals">Jumble Agile Manuals</a>
                </li>
                <li>
                  <a href="http://jkkramer.wordpress.com" title="Justin Kramer » Clojure">Justin Kramer</a>
                </li>
                <li>
                  <a href="http://blog.higher-order.net" title="Higher-Order » Clojure">Karl Krukow</a>
                </li>
                <li>
                  <a href="http://clojure.lang.dk" title="clojure.lang.dk » clojure">Karsten Lang</a>
                </li>
                <li>
                  <a href="http://blog.kartikshah.com/search/label/clojure" class="message" title="no data">Kartik Shah</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1c9b63737a8994f788918e978eb023c1" title="Keep IT Simply Simple (Clojure posts)">Keep IT Simply Simple</a>
                </li>
                <li>
                  <a href="http://def-learn.blogspot.com/search/label/clojure" title="(def-learn something)">Kevin Hostelley</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b414301f97980eda90fb2de43c0f7109" title="Konrad Hinsen">Konrad Hinsen</a>
                </li>
                <li>
                  <a href="http://inclojurewetrust.blogspot.com/" title="In Clojure We Trust">Kototama</a>
                </li>
                <li>
                  <a href="http://zianet.dk/blog" title="Kristian Kristensen's Blog » Clojure">Kristian Kristensen</a>
                </li>
                <li>
                  <a href="http://kylecordes.com" title="Kyle Cordes » clojure">Kyle Cordes</a>
                </li>
                <li>
                  <a href="http://ketain.blogspot.com/search/label/Clojure" class="message" title="404: not found">Kétain Dubé!</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=79aef1deb9444e26d8d52d8f09bf4b67" title="LShift's Clojure posts">LShift Ltd.</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2ec8ad48b9a08731956ff2caa9acb9d9" title="Lau B. Jensen">Lau B. Jensen</a>
                </li>
                <li>
                  <a href="http://www.learningclojure.com/" title="Learning Clojure">Learning Clojure</a>
                </li>
                <li>
                  <a href="http://www.lispcast.com/" title="LispCast">LispCast</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=c7a8e9f969d2bcec0d8adbc32a32302b" title="Pipes Output">Luke VanderHart</a>
                </li>
                <li>
                  <a href="http://lylejohnson.name/blog" title="Lovable Lyle » Clojure">Lyle Johnson</a>
                </li>
                <li>
                  <a href="http://blog.malcolmsparks.com" title="Clojure in a bank">Malcolm Sparks</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=ae21699a287e52d467f8cffe7945e4d2" title="Marc Limotte">Marc Limotte</a>
                </li>
                <li>
                  <a href="http://mcav.com/" title="Marcus Cavanaugh">Marcus Cavanaugh</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a2d30487f61a012c6c3b699941f3197e" title="Marius Kjeldahl">Marius Kjeldahl</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b940a51bb4440a4817478df38a4bfc12" title="Mark McGranaghan's Clojure postings">Mark McGranaghan</a>
                </li>
                <li>
                  <a href="http://www.markhneedham.com/blog" title="Mark Needham » Clojure">Mark Needham</a>
                </li>
                <li>
                  <a href="http://clojure-yap.blogspot.com/" title="Clojure Yap">Mark Nutter</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=f7204ecce7ec8bc20c74661ec8e7d1a4" title="Mark Reid's Clojure posts">Mark Reid</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a0161f6185ca965613735b6b06f2e3ef" title="Mark Watson">Mark Watson</a>
                </li>
                <li>
                  <a href="http://www.spyfoos.com" title="Spyfoos' Speculations » clojure">Martin Clausen</a>
                </li>
                <li>
                  <a href="http://martinsprogrammingblog.blogspot.com/search/label/clojure" title="Martin's Computer Programming Blog">Martin Trojer</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=98d3cd4cd71fb7ef5f79b82e5cd6fd3a" title="Matt Clark">Matt Clark</a>
                </li>
                <li>
                  <a href="http://matthewm.net/blog" title="Free Lunch » clojure">Matthew Maravillas</a>
                </li>
                <li>
                  <a href="http://mattiasholmqvist.se" title="Mattias Holmqvist - Writings about software development » clojure">Mattias Holmqvist</a>
                </li>
                <li>
                  <a href="http://mattyjwilliams.blogspot.com/search/label/clojure" title="mattyw">Matty Williams</a>
                </li>
                <li>
                  <a href="http://maurits.wordpress.com" title="Maurits thinks aloud » Clojure">Maurits Rijk</a>
                </li>
                <li>
                  <a href="http://max-weber.tumblr.com/" title="Software needs passion">Max Weber</a>
                </li>
                <li>
                  <a href="http://kotka.de/blog/index.html" title="Kotka">Meikel Brandmeyer</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=8810479b2a28033db7ae36f962e205d6" title="Pipes Output">Michael Barker</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a8c5c15e7a71b7c9a5095cc5ebb6147b" title="Fogus">Michael Fogus</a>
                </li>
                <li>
                  <a href="http://www.michaelharrison.ws/weblog" title="goodmike blogs here » clojure">Michael Harrison</a>
                </li>
                <li>
                  <a class="message" title="404: not found">Michael Kohl</a>
                </li>
                <li>
                  <a href="http://michakurt.blogspot.com/search/label/clojure" title="mk">Michael Krause</a>
                </li>
                <li>
                  <a href="http://resatori.com" title="resatori » Clojure">Michael Sappler</a>
                </li>
                <li>
                  <a title="">Michael Schneider</a>
                </li>
                <li>
                  <a href="http://hircus.wordpress.com" title="Intuitionistically Uncertain » Clojure">Michel Alexandre Salim</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=94f5d778548fdbf32cd9c46662f63a07" title="Mikael Sundberg">Mikael Sundberg</a>
                </li>
                <li>
                  <a href="http://blog.mired.org/search/label/clojure" title="Mired in code">Mike Meyer</a>
                </li>
                <li>
                  <a href="http://clojurewise.blogspot.com/" title="ClojureWise">Miki Tebeka</a>
                </li>
                <li>
                  <a href="http://blog.milehighcode.com/search/label/clojure" title="Mile High Code">Mile High Code</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=82870f3dc7b3f8270341d7edfcbcaa78" title="Pipes Output">Min Huang</a>
                </li>
                <li>
                  <a href="http://morphling.wordpress.com" title="Common Sense for Dummies » Clojure">Morphling</a>
                </li>
                <li>
                  <a href="http://mostlylazy.com" title="Mostly λazy…a Clojure podcast">Mostly λazy…a Clojure podcast</a>
                </li>
                <li>
                  <a href="http://blog.danieljanus.pl" title="musings of a Lispnik">Musings of a Lispnik</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=fec20d286af3981ed1e4579766d25032" title="My Corner of the World">My Corner of the World</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=180af42010b57c605f7b7475b311ec32" title="Nathan Marz">Nathan Marz</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=e1261fa92fd1c8b3d5536be2208cb927" title="Neale Swinnerton">Neale Swinnerton</a>
                </li>
                <li>
                  <a href="http://netzhansa.blogspot.com/search/label/clojure" title="netzhansa">Netzhansa</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=5fa36ac4f289decb1c87a4665d5f08c3" title="Nick Mudge">Nick Mudge</a>
                </li>
                <li>
                  <a href="http://www.niclas-meier.de" title="byte bohemian » Clojure">Niclas Meier</a>
                </li>
                <li>
                  <a href="http://www.nicobalestra.com" class="message" title="internal server error">Nico Balestra</a>
                </li>
                <li>
                  <a href="http://whollyweirdwyrd.blogspot.com/search/label/clojure" title="Mu">Nicolas Buduroi</a>
                </li>
                <li>
                  <a href="http://www.chaomancy.com/blog/" title="Chaomancy - Clojure">Nicolas Duchenne</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4e1982719b79c21c815dc8b5e6789800" title="Nurullah Akkaya">Nurullah Akkaya</a>
                </li>
                <li>
                  <a href="http://objectcommando.com/blog" title="Object Commando » Clojure">Object Commando</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a95334ceb5e0fb26ecf791f82dab500d" class="message" title="internal server error">Object Mentor</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=ec6f43fcafdaa65dbd76221d1fe07e27" title="On Beyond Lambda">On Beyond Lambda</a>
                </li>
                <li>
                  <a href="http://onclojure.com" title="On Clojure">On Clojure</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1adfa4e3b059d564c840e7ac9a797cf1" title="OnyCloud">OnyCloud</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=e3acda502422e928a0186c566537fec4" title="OrderHarmony">OrderHarmony</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b48edd214140e18dab212c3ea7237bb9" title="Paavo Anselmi Parkkinen's Clojure posts">Paavo Anselmi Parkkinen</a>
                </li>
                <li>
                  <a href="http://palletops.com/" title="Pallet, DevOps for the JVM">Pallet blog</a>
                </li>
                <li>
                  <a href="http://tm.durusau.net" title="Another Word For It » Clojure">Patrick Durusau</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b502b5f586e3cf34b6cb55420e489fd9" title="Clojure @nklein software">Patrick Stein</a>
                </li>
                <li>
                  <a href="http://paudo.posterous.com" title="Man over machine">Paudi Moriarty</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1e66a60c7887c0e7a6c1764643ec9014" title="Paul Gearon">Paul Gearon</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=21c2a96208e329bcffb14a3d4c4f6002" title="Paul Gross">Paul Gross</a>
                </li>
                <li>
                  <a href="http://oobaloo.co.uk" title="pingles">Paul Ingles</a>
                </li>
                <li>
                  <a href="http://www.paullegato.com" title="Paul Legato » clojure">Paul Legato</a>
                </li>
                <li>
                  <a href="http://earthly-powers.blogspot.com/search/label/clojure" title="Earthly Powers">Paul Sandoz</a>
                </li>
                <li>
                  <a href="http://paulsanwald.com/blog.html" title="Paul's Blog">Paul Sanwald</a>
                </li>
                <li>
                  <a href="http://paul.stadig.name/search/label/clojure" title="Paul Stadig">Paul Stadig</a>
                </li>
                <li>
                  <a href="http://paulosuzart.github.com/" title="Category: clojure | Paulo Suzart Blog">Paulo Suzart</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1dea81b8a32de2b074ad7f37f9f48bb6" title="Pepijn de Vos (Wishful Coding)">Pepijn de Vos</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b91b982d225d86cda9278274c6f709d2" title="Peteris Erins">Peteris Erins</a>
                </li>
                <li>
                  <a href="http://technomancy.us/" title="Technomancy">Phil Hagelberg</a>
                </li>
                <li>
                  <a href="http://rhebus.posterous.com" title="Philip Potter's Blog">Philip Potter</a>
                </li>
                <li>
                  <a href="http://philipp.meier.name/" title="Category: clojure | Philipp Meier - Software Developer">Philipp Meier</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2b4df27a8a423f38ec23838506223255" title="Pierre-Yves Ritschard">Pierre-Yves Ritschard</a>
                </li>
                <li>
                  <a href="http://pramode.net/clojure/" title="Pramode C.E - Code Clojure">Pramode C.E</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=70e7bf2bcf7efd6c56d483cfa7c380ed" title="Prismatic">Prismatic</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=ed581e0d677e30a30351ffa9c62233e9" title="Clojure@ProDevTips">ProDevTips</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=d2acfee24baebb7f8c431da701c6cc49" title="RJMetrics">RJMetrics</a>
                </li>
                <li>
                  <a href="http://blog.bensmann.com" title="Ralf Bensmann">Ralf Bensmann</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=19146ef303cb4c99a8ef9f0704241e1d" title="Ralph Moritz">Ralph Moritz</a>
                </li>
                <li>
                  <a href="http://cynojure.posterous.com" title="cynojure">Ram Krishnan</a>
                </li>
                <li>
                  <a href="http://raphamiard.posterous.com" title="Raphaël's programming notes">Raphael Amiard</a>
                </li>
                <li>
                  <a href="http://blog.raek.se" title="raek's blog » Clojure">Rasmus Svensson</a>
                </li>
                <li>
                  <a href="http://blog.raynes.me/" title="Bathroom Reading Material">Raynes</a>
                </li>
                <li>
                  <a href="http://read-eval-puke.blogspot.com/" title="read-eval-puke">Read-Eval-Puke</a>
                </li>
                <li>
                  <a href="http://clojure.blogspot.com/" title="Clojure">Rich Hickey</a>
                </li>
                <li>
                  <a href="http://www.myclojureadventure.com/search/label/Clojure" title="My Clojure Adventure">Rob Rowe</a>
                </li>
                <li>
                  <a href="http://rrees.wordpress.com" title="Echo One » clojure">Robert Rees</a>
                </li>
                <li>
                  <a href="http://www.haltingproblem.net/weblog" class="message" title="404: not found">Roland Sadowski</a>
                </li>
                <li>
                  <a href="http://rubylearning.com/blog" title="RubyLearning Blog » Clojure">RubyLearning Blog</a>
                </li>
                <li>
                  <a href="http://saaientist.blogspot.com/search/label/clojure" title="Saaien Tist">Saaien Tist</a>
                </li>
                <li>
                  <a href="http://www.magpiebrain.com" title="Magpiebrain » clojure">Sam Newman</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b53585eb30456f828f918603b550d795" title="Sam Ritchie">Sam Ritchie</a>
                </li>
                <li>
                  <a href="http://blog.samibadawi.com/search/label/Clojure" title="AI Computer Vision">Sami Badawi</a>
                </li>
                <li>
                  <a href="http://fulldisclojure.blogspot.com/" title="Full Disclojure">Sean Devlin</a>
                </li>
                <li>
                  <a href="http://vimeo.com/channels/fulldisclojure" title="Vimeo / Full Disclojure">Sean Devlin (vimeo)</a>
                </li>
                <li>
                  <a href="http://www.seekingclojure.com/" title="Seeking Clojure">Seeking Clojure</a>
                </li>
                <li>
                  <a href="http://sastanin.tumblr.com/" title="140+">Sergey Astanin</a>
                </li>
                <li>
                  <a href="http://sbtourist.blogspot.com/search/label/clojure" title="Thoughts and Fragments">Sergio Bossa</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=c44f0f77404cfd463727381809ce5cae" title="Sfalma Blog">Sfalma</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=cf1831abf6eae4a599aa41fbc230b11c" title="Shantanu Kumar">Shantanu Kumar</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=9c0caa21a64acf838e4b38033aaff0bc" title="Sharing at Work">Sharing at Work</a>
                </li>
                <li>
                  <a title="Shashy's Blog">Shashy Dass</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b1d6f54bf5d0acc0ae8a672269672930" title="Siddhartha Reddy">Siddhartha Reddy</a>
                </li>
                <li>
                  <a href="http://simonholgate.wordpress.com" title="Simon Holgate's Blog » Clojure">Simon Holgate</a>
                </li>
                <li>
                  <a href="http://techbehindtech.com" title="Tech behind Tech » Clojure">Siva Jagadeesan</a>
                </li>
                <li>
                  <a href="http://blog.rguha.net" title="So much to do, so little time » clojure">So much to do, so little time</a>
                </li>
                <li>
                  <a href="http://www.snowfrog.net" title="Sonia Hamilton » Clojure">Sonia Hamilton</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b4133f3f3655c17455e32c1233bc6617" title="SourceNinja">SourceNinja</a>
                </li>
                <li>
                  <a href="http://squirrel.pl/blog" title="Squirrel's » Clojure">Squirrel</a>
                </li>
                <li>
                  <a href="http://clojurecljub.wordpress.com" title="Clojure Lunch Cljub">St. Louis Clojure Discussion Group</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=9824d2e12e9d4a9dadc8289ad75e82ac" title="Stathis Sideris">Stathis Sideris</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=dabeb77a16f672f564fd503bd663555b" title="Stefan Tilkov's Clojure posts">Stefan Tilkov</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=eb3a37b540911df844dc7807ed1f5cb2" title="Stephan Schmidt's Clojure posts">Stephan Schmidt</a>
                </li>
                <li>
                  <a href="http://items.sjbach.com" title="items.sjbach.com">Stephen Bach</a>
                </li>
                <li>
                  <a href="http://steve.vinoski.net/blog" title="Steve Vinoski's Blog » clojure">Steve Vinoski</a>
                </li>
                <li>
                  <a href="http://stevendick.github.com/" title="Category: Clojure | &lt;insert witty blog title&gt;">Steven Dick</a>
                </li>
                <li>
                  <a href="http://proctorit.wordpress.com" title="Proctor It » Clojure">Steven Proctor</a>
                </li>
                <li>
                  <a href="http://stuartsierra.com" title="Digital Digressions by Stuart Sierra">Stuart Sierra</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=ccf2f5acc3da2242ae06edbf92be95a9" title="Stuff Aria Likes">Stuff Aria Likes</a>
                </li>
                <li>
                  <a href="http://sunng.info/blog" title="Here comes the Sun » clojure">Sun Ning</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=30609a351165bee1ff87cfdb2f1f1cc9" title="Sustainable Code">Sustainable Code</a>
                </li>
                <li>
                  <a href="http://www.swaroopch.com" title="Swaroop C H » clojure">Swaroop C H</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=7517aa5c41a965c5d62b843adbbd9f49" title="Swizec Teller">Swizec Teller</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=195a584c0a9289abd33bd2467546734d" title="Long-standing Bug Clojure-related stuff">Szymon Witamborski</a>
                </li>
                <li>
                  <a href="http://szamitogepesnyelveszet.blogspot.com/search/label/Clojure" title="Számítógépes nyelvészet">Számítógépes nyelvészet</a>
                </li>
                <li>
                  <a href="http://tapestryjava.blogspot.com/search/label/clojure" title="Tapestry Central">Tapestry Central</a>
                </li>
                <li>
                  <a href="http://tsdh.wordpress.com" title="Tassilo's Blog » Clojure">Tassilo Horn</a>
                </li>
                <li>
                  <a href="http://www.sauria.com/blog" title="Ted Leung on the Air » Clojure">Ted Leung</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b632367883d51d21470d9ffcf5b7581c" title="The Blackstag Blog">The Blackstag Blog</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=6d75628a16dcb59b7d5cbb113d5d6948" title="The Clean Coder">The Clean Coder</a>
                </li>
                <li>
                  <a href="http://oblong-code.blogspot.com/search/label/clojure" title="The Oblong">The Oblong</a>
                </li>
                <li>
                  <a href="http://weakreference.blogspot.com/search/label/clojure" title="The Weak Reference">The Weak Reference</a>
                </li>
                <li>
                  <a href="http://blog.yieldbot.com" title="The Yieldbot Blog">The Yieldbot Blog</a>
                </li>
                <li>
                  <a href="http://blog.zolodeck.com" title="The making of Zolodeck » clojure">The making of Zolodeck</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=0c1edc8d0c3d1d861a2473bf662f7be0" title="TheServerSide">TheServerSide</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2ef0d48f4cec64c18902da450377e129" title="Theory In Practise">Theory In Practise</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=07906a90788326999ae45455523d50f2" title="This Window: Close It">This Window: Close It</a>
                </li>
                <li>
                  <a href="http://justyouraveragehacker.wordpress.com" title="just your average hacker » clojure">Thomas Karolski</a>
                </li>
                <li>
                  <a href="http://messynotebook.com" title="The Messy Notebook » Clojure">Thomas Kjeldahl Nilsson</a>
                </li>
                <li>
                  <a href="http://programming-puzzler.blogspot.com/" title="Thoughts on Programming">Thoughts on Programming</a>
                </li>
                <li>
                  <a href="http://www.brool.com" title="brool » clojure">Tim Lopez</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b2fec5fd649959045fdddb1b40fc59db" title="Tim McCormack">Tim McCormack</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=820f20fd619c7d616501fc35cd840520" title="Tim Riddell's Clojure posts">Tim Riddell</a>
                </li>
                <li>
                  <a href="http://timothypratley.blogspot.com/" title="Programming">Timothy Pratley</a>
                </li>
                <li>
                  <a href="http://tohono.blogspot.com/search/label/Clojure" title="Tohono Consulting">Tom Hicks</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=68c540caa8931b5b8bae2952cc346565" title="Tom Schutzer-Weissmann">Tom Schutzer-Weissmann</a>
                </li>
                <li>
                  <a href="http://disclojure.org" title="Disclojure, Public Disclosure of All Things Clojure">Toni Batchelli</a>
                </li>
                <li>
                  <a href="http://www.unlimitednovelty.com/search/label/clojure" title="Unlimited Novelty">Tony Arcieri</a>
                </li>
                <li>
                  <a href="http://ashenfad.blogspot.com/search/label/clojure" title="Too Many NumLumps">Too Many NumLumps</a>
                </li>
                <li>
                  <a href="http://blog.tophernet.com/search/label/Clojure" title="Topher's Notes">Topher Brown</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=d3ad87e79c97f34be33ff36cb4b578b4" title="Travis Vachon - combinate.us">Travis Vachon</a>
                </li>
                <li>
                  <a href="http://travis-whitton.blogspot.com/search/label/clojure" title="so it was written...">Travis Whitton</a>
                </li>
                <li>
                  <a href="http://twoguysarguing.wordpress.com" title="Two Guys Arguing » clojure">Two Guys Arguing</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=558531c1af53cd942ca89854c501ef2b" title="Two Negatives Blog">Two Negatives Blog</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=6de60eabd37cbe85e9397d4901548e61" title="Vijay Kiran">Vijay Kiran</a>
                </li>
                <li>
                  <a href="http://www.viksit.com/taxonomy/term/45/0" title="Viksit Gaur - clojure">Viksit Gaur</a>
                </li>
                <li>
                  <a href="http://gnuvince.wordpress.com" title="Occasionally sane » clojure">Vincent Foley</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=09126eb42745a5a1b6f3d2debc37940f" title="Vitaly Peressada">Vitaly Peressada</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=3bdb998f877daebf5e6c9f860e5bef4b" title="Scheming's Clojure posts">Will Farr</a>
                </li>
                <li>
                  <a href="http://willwhim.wordpress.com" title="Will.Whim » Clojure">Will Fitzgerald</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=f3a255d0f7f7ac600bc79efecc82b7c3" title="Wille Faler">Wille Faler</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=c23b3d80907dfd11a7375ae154c9ed0e" title="William Groppe">William Groppe</a>
                </li>
                <li>
                  <a href="http://writingcoding.blogspot.com/search/label/clojure" title="Writing/Coding">Writing/Coding</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=796ee0b7c5d764dcf498b0419d0c2feb" title="X-Combinator">X-combinator</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=bc870d6bf2613969f7d010e54720eb82" title="Yoko Harada">Yoko Harada</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2859b085bb0148ae9095e616a6de354f" title="Zach Tellman's Clojure postings">Zach Tellman</a>
                </li>
                <li>
                  <a href="http://zef.me" title="I am Zef » clojure">Zef Hemel</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=811937d4e54714433e995b82d5b7be53" title="Zen and the Art of Programming">Zen and the Art of Programming</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=2812173014387ce764fca0a58aa86576" title="amalloy">amalloy</a>
                </li>
                <li>
                  <a href="http://joost.zeekat.nl" title="code.h(oe)kje » clojure">code.h(oe)kje</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a02b1b212740d4c9f6707659ef76a68d" title="dgrnbrg">dgrnbrg</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=a7ec736f326bf83b55a866ec49c48925" title="fronx">fronx</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=b4bc20031320a4c7e6cb80b68b06cbff" title="hackers-with-attitude">hackers-with-attitude</a>
                </li>
                <li>
                  <a href="http://icyrock.com/blog" class="message" title="internal server error">icyrock</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=29f0ca57d0f74f71ae843f36368e9626" title="joshfinken">joshfinken</a>
                </li>
                <li>
                  <a href="http://blog.jr0cket.co.uk/search/label/PlanetClojure" title="jr0cket - community developer">jr0cket - community developer</a>
                </li>
                <li>
                  <a class="message" title="404: not found">lice!</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=13f695b744f07195df9d4121406f4362" title="opus artificem probat">opus artificem probat</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=4dff2c43cfaed86654ab097cbc801f38" title="ossareh">ossareh</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=7cccb94a47e451a4b463741b9791d0fb" title="pseudofish">pseudofish</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=1bc48327163534238c3b8c76b81a5ba3" title="random computation">random computation</a>
                </li>
                <li>
                  <a href="http://pipes.yahoo.com/pipes/pipe.info?_id=26da0ac0c1dfbda95eb27a1b4c49be89" title="wmacgyver's clojure posts">wmacgyver</a>
                </li>
                <li>
                  <a href="http://revolucionlibrary.wordpress.com" title="Revolución Movie Library » Clojure">Željko Ziriković</a>
                </li>
            </ul>
          </section>
          
          <section class="sidebar-list">
            <h3>Planetarium</h3>
            <ul>
              <li><a href="http://planet.lisp.org/">Planet Lisp</a></li>
              <li><a href="http://www.planetscala.com/">Planet Scala</a></li>
              <li><a href="http://scheme.dk/planet/">Planet Scheme</a></li>
              <li><a href="http://planetjdk.org/">Planet JDK</a></li>
              <li><a href="http://planet.haskell.org/">Planet Haskell</a></li>
              <li><a href="http://www.planeterlang.org/">Planet Erlang</a></li>
              <li><a href="http://planet.python.org/">Planet Python</a></li>
              <li><a href="http://planetruby.0x42.net/">Planet Ruby</a></li>
              <li><a href="http://planet.perl.org/">Planet Perl</a></li>
            </ul>
          </section>
          
          <section class="sidebar-list">
            <h3>Syndicate</h3>
            <ul>
              <li><a href="http://planet.clojure.in/atom.xml">RSS</a></li>
<!--              <li><a href="http://feeds.feedburner.com/clojure">RSS</a></li>-->
              <li><a href="opml.xml">OPML</a></li>
              <li><a href="foafroll.xml">FOAF</a></li>
            </ul>
          </section>

        </div>
      </div>
    </div>
<!-- GOOG Analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12235178-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = 'async';
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();
</script>
  </body>
</html>
